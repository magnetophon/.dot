<html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Conversation with #nixos at Fri 02 Jan 2015 02:32:47 AM CET on magnetophon@irc.freenode.net (irc)</title></head><body><h3>Conversation with #nixos at Fri 02 Jan 2015 02:32:47 AM CET on magnetophon@irc.freenode.net (irc)</h3>
<font size="2">(02:32:48 AM)</font><b> The topic for #nixos is: <a href="http://nixos.org/">http://nixos.org/</a> || Latest NixOS: <a href="http://nixos.org/nixos/download.html">http://nixos.org/nixos/download.html</a> || Latest Nix: <a href="http://nixos.org/nix/download.html">http://nixos.org/nix/download.html</a> || Logs: <a href="http://nixos.org/irc/logs/">http://nixos.org/irc/logs/</a> || Swag: <a href="http://www.cafepress.co.uk/NixOS">http://www.cafepress.co.uk/NixOS</a></b><br/>
<font size="2">(02:32:48 AM)</font><b> Topic for #nixos set by niksnut!~eelco@ec2-54-216-36-73.eu-west-1.compute.amazonaws.com at 12:56:59 PM on 04/11/2014</b><br/>
<font color="#A82F2F"><font size="2">(02:32:55 AM)</font> <b>aszlig:</b></font> hm, is that a symlink as well?<br/>
<font color="#A82F2F"><font size="2">(02:33:36 AM)</font> <b>aszlig:</b></font> what does adding -f to the readlink call give?<br/>
<font color="#A82F2F"><font size="2">(02:34:24 AM)</font> <b>Sonarpulse:</b></font> /winhome/John/Code/git/RustOS/lib/rust/src/liballoc<br/>
<font color="#A82F2F"><font size="2">(02:34:57 AM)</font> <b>aszlig:</b></font> oh, wait a minute, which fs is this?<br/>
<font color="#A82F2F"><font size="2">(02:35:15 AM)</font> <b>Sonarpulse:</b></font> ntfs in fact<br/>
<font color="#A82F2F"><font size="2">(02:35:26 AM)</font> <b>Sonarpulse:</b></font> for some reason i have all my git stuff on my windows partition<br/>
<font color="#A82F2F"><font size="2">(02:35:32 AM)</font> <b>Sonarpulse:</b></font> my windows doesn&apos;t even start!<br/>
<font color="#A82F2F"><font size="2">(02:36:09 AM)</font> <b>Sonarpulse:</b></font> actually wait that was before<br/>
<font color="#A82F2F"><font size="2">(02:36:18 AM)</font> <b>Sonarpulse:</b></font> right now i have /home as a ntfs file system<br/>
<font color="#A82F2F"><font size="2">(02:36:25 AM)</font> <b>Sonarpulse:</b></font> / ext4 for nixos<br/>
<font color="#A82F2F"><font size="2">(02:36:30 AM)</font> <b>Sonarpulse:</b></font> and windows<br/>
<font color="#A82F2F"><font size="2">(02:36:35 AM)</font> <b>aszlig:</b></font> hm, if you do &quot;tar c . | tar tv&quot;, does it give any error?<br/>
<font color="#A82F2F"><font size="2">(02:37:07 AM)</font> <b>Sonarpulse:</b></font> is this making a tarball?<br/>
<font color="#A82F2F"><font size="2">(02:37:13 AM)</font> <b>Sonarpulse:</b></font> cause /lib/rust is huge<br/>
<font color="#A82F2F"><font size="2">(02:37:18 AM)</font> <b>Sonarpulse:</b></font> no error so far<br/>
<font color="#A82F2F"><font size="2">(02:37:20 AM)</font> <b>Sonarpulse:</b></font> hwoever<br/>
<font color="#A82F2F"><font size="2">(02:37:42 AM)</font> <b>aszlig:</b></font> it creates a tarball to stdout and rereading that with tar again<br/>
<font color="#A82F2F"><font size="2">(02:38:03 AM)</font> <b>aszlig:</b></font> okay, better idea then<br/>
<font color="#A82F2F"><font size="2">(02:38:30 AM)</font> <b>aszlig:</b></font> can you paste a &quot;strace -f -e trace=file nix-instantiate&quot;?<br/>
<font color="#A82F2F"><font size="2">(02:38:44 AM)</font> <b>Sonarpulse:</b></font> btw i can get around the problem i realized just by using a different src dir<br/>
<font color="#A82F2F"><font size="2">(02:38:59 AM)</font> <b>Sonarpulse:</b></font> since i am using nix-shell it doesn&apos;t really matter<br/>
<font color="#A82F2F"><font size="2">(02:39:10 AM)</font> <b>Sonarpulse:</b></font> but i&apos;ll try that<br/>
<font color="#A82F2F"><font size="2">(02:39:14 AM)</font> <b>Sonarpulse:</b></font> in case we discover a bug<br/>
<font color="#A82F2F"><font size="2">(02:42:00 AM)</font> <b>Sonarpulse:</b></font> http://sprunge.us/RXga<br/>
<font color="#A82F2F"><font size="2">(02:44:49 AM)</font> <b>Sonarpulse:</b></font> that&apos;s the paste of the strace aszlig<br/>
<font size="2">(02:45:50 AM)</font><b> johnw- is now known as johnw</b><br/>
<font color="#A82F2F"><font size="2">(02:46:29 AM)</font> <b>aszlig:</b></font> hmmmm....<br/>
<font color="#A82F2F"><font size="2">(02:46:50 AM)</font> <b>aszlig:</b></font> st_size is 50, but the actual result length is 21<br/>
<font color="#A82F2F"><font size="2">(02:47:09 AM)</font> <b>aszlig:</b></font> i guess for ntfs this is handled differently<br/>
<font color="#A82F2F"><font size="2">(02:48:24 AM)</font> <b>aszlig:</b></font> &quot;The st_size field gives the size of the file (if it is a regular file or a symbolic link) in bytes.  The size of a symbolic link is the length of the pathname it contains, without a terminating null byte.&quot;<br/>
<font color="#A82F2F"><font size="2">(02:49:33 AM)</font> <b>Sonarpulse:</b></font> uh oh<br/>
<font color="#A82F2F"><font size="2">(02:53:10 AM)</font> <b>aszlig:</b></font> well, my guess would be that it is the absolute path<br/>
<font color="#A82F2F"><font size="2">(02:53:14 AM)</font> <b>aszlig:</b></font> but it is not<br/>
<font color="#A82F2F"><font size="2">(02:53:23 AM)</font> <b>aszlig:</b></font> except for one byte<br/>
<font color="#A82F2F"><font size="2">(02:53:34 AM)</font> <b>aszlig:</b></font> /winhome/John/Code/git/RustOS/lib/rust/src/liballoc -&gt; 51<br/>
<font color="#A82F2F"><font size="2">(02:54:15 AM)</font> <b>aszlig:</b></font> Sonarpulse: what&apos;s the output of stat on the symlink?<br/>
<font color="#A82F2F"><font size="2">(02:54:22 AM)</font> <b>Sonarpulse:</b></font> checking<br/>
<font color="#A82F2F"><font size="2">(02:55:12 AM)</font> <b>Sonarpulse:</b></font> size=50<br/>
<font color="#A82F2F"><font size="2">(02:55:20 AM)</font> <b>aszlig:</b></font> and the paths?<br/>
<font color="#A82F2F"><font size="2">(02:55:48 AM)</font> <b>Sonarpulse:</b></font>   File: ‘lib/liballoc/src’ -&gt; ‘../rust/src/liballoc/’<br/>
<font color="#A82F2F"><font size="2">(02:55:48 AM)</font> <b>Sonarpulse:</b></font>  <br/>
<font color="#A82F2F"><font size="2">(02:56:02 AM)</font> <b>Sonarpulse:</b></font> sorry i have xterm, no gnome-terminal at the moment<br/>
<font color="#A82F2F"><font size="2">(02:56:08 AM)</font> <b>Sonarpulse:</b></font> and cut and paste is a pain<br/>
<font color="#A82F2F"><font size="2">(02:59:39 AM)</font> <b>idioterna:</b></font> Sonarpulse: if you have a mouse you just select and it&apos;s copied<br/>
<font color="#A82F2F"><font size="2">(02:59:47 AM)</font> <b>idioterna:</b></font> and middle button click pastes the buffer<br/>
<font color="#A82F2F"><font size="2">(02:59:57 AM)</font> <b>Sonarpulse:</b></font> i am doing that<br/>
<font color="#A82F2F"><font size="2">(03:00:22 AM)</font> <b>Sonarpulse:</b></font> x selection seems easy to clobber however<br/>
<font color="#A82F2F"><font size="2">(03:00:52 AM)</font> <b>Sonarpulse:</b></font> another thing<br/>
<font color="#A82F2F"><font size="2">(03:01:06 AM)</font> <b>Sonarpulse:</b></font> nix-shell is giving me older version of package than when i get with nix-env<br/>
<font color="#A82F2F"><font size="2">(03:01:15 AM)</font> <b>Sonarpulse:</b></font> nix-env -i that is<br/>
<font color="#A82F2F"><font size="2">(03:02:05 AM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] iElectric opened pull request #5525: Introduce patchShebangsPhase in preConfigurePhases (staging...staging.patchShebangs) http://git.io/Ro90Mg<br/>
<font color="#A82F2F"><font size="2">(03:02:56 AM)</font> <b>aszlig:</b></font> okay, they are the same but without the initial root path<br/>
<font color="#A82F2F"><font size="2">(03:03:15 AM)</font> <b>aszlig:</b></font> s/the same/absolute paths/<br/>
<font color="#A82F2F"><font size="2">(03:04:24 AM)</font> <b>aszlig:</b></font> but reparting a size for the absolute path is going to &quot;maybe[TM] violate posix&quot;, or it is a bug of the ntfs driver<br/>
<font color="#A82F2F"><font size="2">(03:04:50 AM)</font> <b>Sonarpulse:</b></font> so 50 is deref&apos;d absolute<br/>
<font color="#A82F2F"><font size="2">(03:04:56 AM)</font> <b>Sonarpulse:</b></font> and 21 is deref&apos;d relative?<br/>
<font color="#A82F2F"><font size="2">(03:05:04 AM)</font> <b>aszlig:</b></font> yep<br/>
<font color="#A82F2F"><font size="2">(03:05:28 AM)</font> <b>aszlig:</b></font> on non-ntfs you get 21 for both stat and readlink()<br/>
<font color="#A82F2F"><font size="2">(03:05:50 AM)</font> <b>aszlig:</b></font> on ntfs you get the size of the absolute path in stat and the relative path in readlink()<br/>
<font color="#A82F2F"><font size="2">(03:06:30 AM)</font> <b>Sonarpulse:</b></font> do you think the syscalls is returning != 0<br/>
<font color="#A82F2F"><font size="2">(03:06:41 AM)</font> <b>Sonarpulse:</b></font> or nix code is doing a conditional perror<br/>
<font color="#A82F2F"><font size="2">(03:06:46 AM)</font> <b>aszlig:</b></font> it is returning the size<br/>
<font color="#A82F2F"><font size="2">(03:06:57 AM)</font> <b>aszlig:</b></font> and nix is checking the size against the st_size value<br/>
<font color="#A82F2F"><font size="2">(03:07:09 AM)</font> <b>Sonarpulse:</b></font> oh yeah<br/>
<font color="#A82F2F"><font size="2">(03:08:30 AM)</font> <b>Sonarpulse:</b></font> well...<br/>
<font color="#A82F2F"><font size="2">(03:08:33 AM)</font> <b>Sonarpulse:</b></font> that&apos;s fun<br/>
<font color="#A82F2F"><font size="2">(03:12:38 AM)</font> <b>aszlig:</b></font> hm, according to readlink() it&apos;s even recommended to check that size against st_size to avoid buffer overflows in case of race conditions between those calls<br/>
<font color="#A82F2F"><font size="2">(03:13:01 AM)</font> <b>Sonarpulse:</b></font> wow<br/>
<font color="#A82F2F"><font size="2">(03:13:06 AM)</font> <b>aszlig:</b></font> so i guess this is a bug in the ntfs filesystem driver<br/>
<font color="#A82F2F"><font size="2">(03:13:11 AM)</font> <b>Sonarpulse:</b></font> yup<br/>
<font color="#A82F2F"><font size="2">(03:13:33 AM)</font> <b>Sonarpulse:</b></font> well thanks so much aszlig for doing the heavy lifting here<br/>
<font color="#A82F2F"><font size="2">(03:13:44 AM)</font> <b>Sonarpulse:</b></font> i guess i will try to track them down and report it<br/>
<font color="#A82F2F"><font size="2">(03:18:36 AM)</font> <b>aszlig:</b></font> we could however provide a better error message rather than &quot;Success&quot;<br/>
<font color="#A82F2F"><font size="2">(03:44:59 AM)</font> <b>root__:</b></font> Hi, I am new to nixos, and I am trying to get a LM setup, but where do I put .xsession files? /usr/share/ does not exist, I would just create it and place them in /usr/share/xsessions/ but I want to make sure that is the correct place in nixos.<br/>
<font size="2">(03:46:19 AM)</font><b> root__ is now known as instantepiphany</b><br/>
<font color="#A82F2F"><font size="2">(03:46:50 AM)</font> <b>iElectric:</b></font> in /home/user/<br/>
<font color="#A82F2F"><font size="2">(03:47:38 AM)</font> <b>instantepiphany:</b></font> Does nixos cause login managers to search ~/ for xsession files then?<br/>
<font color="#A82F2F"><font size="2">(03:49:38 AM)</font> <b>iElectric:</b></font> yes<br/>
<font color="#A82F2F"><font size="2">(03:51:05 AM)</font> <b>instantepiphany:</b></font> ok, thanks :)<br/>
<font color="#A82F2F"><font size="2">(03:52:40 AM)</font> <b>instantepiphany:</b></font> What is the recommended way to build from source and install the compiled program on nixos? I thought I would need this for my wm (bspwm) and was surprised that it already exists as a nixpkg, but how should i compile+install latest git versions if I need them?<br/>
<font color="#A82F2F"><font size="2">(03:53:12 AM)</font> <b>instantepiphany:</b></font> I mean once I have the compiled executable, can I just run the usual `make install` or should I use a different command to correctly place it in the nix store?<br/>
<font color="#A82F2F"><font size="2">(03:57:21 AM)</font> <b>instantepiphany:</b></font> iElectric: I have bspwm.desktop in /home/user/, but slim isn&apos;t picking it up, it just starts an xterm session.<br/>
<font size="2">(04:03:27 AM)</font><b> instantepiphany left the room (quit: Remote host closed the connection).</b><br/>
<font color="#A82F2F"><font size="2">(04:11:43 AM)</font> <b>NixOS_GitHub:</b></font> (notice) [nix] aszlig opened pull request #429: Improve handling of size mismatches in readLink() (master...readlink-size-mismatch) http://git.io/_MZOnQ<br/>
<font size="2">(05:29:24 AM)</font><b> The account has disconnected and you are no longer in this chat. You will automatically rejoin the chat when the account reconnects.</b><br/>
</body></html>
