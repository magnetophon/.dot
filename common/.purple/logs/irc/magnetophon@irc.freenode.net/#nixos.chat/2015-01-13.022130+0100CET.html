<html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Conversation with #nixos at Tue 13 Jan 2015 02:21:30 AM CET on magnetophon@irc.freenode.net (irc)</title></head><body><h3>Conversation with #nixos at Tue 13 Jan 2015 02:21:30 AM CET on magnetophon@irc.freenode.net (irc)</h3>
<font size="2">(02:21:30 AM)</font><b> The topic for #nixos is: <a href="http://nixos.org/">http://nixos.org/</a> || Latest NixOS: <a href="http://nixos.org/nixos/download.html">http://nixos.org/nixos/download.html</a> || Latest Nix: <a href="http://nixos.org/nix/download.html">http://nixos.org/nix/download.html</a> || Logs: <a href="http://nixos.org/irc/logs/">http://nixos.org/irc/logs/</a> || Swag: <a href="http://www.cafepress.co.uk/NixOS">http://www.cafepress.co.uk/NixOS</a></b><br/>
<font size="2">(02:21:30 AM)</font><b> Topic for #nixos set by niksnut!~eelco@ec2-54-216-36-73.eu-west-1.compute.amazonaws.com at 12:56:59 PM on 04/11/2014</b><br/>
<font size="2">(03:02:48 AM)</font><b> carter_ is now known as carter</b><br/>
<font color="#A82F2F"><font size="2">(03:31:24 AM)</font> <b>ewemoa:</b></font> Havvy: any particular aspect of io.js you are looking forward to?<br/>
<font color="#A82F2F"><font size="2">(03:32:14 AM)</font> <b>Havvy:</b></font> ewemoa:  I&apos;m going to need to test my modules against it.<br/>
<font color="#A82F2F"><font size="2">(03:35:35 AM)</font> <b>benley:</b></font> crap, gdal is failing to build<br/>
<font color="#A82F2F"><font size="2">(03:37:34 AM)</font> <b>ewemoa:</b></font> Havvy: that sounds like a good reason to be interested :)<br/>
<font color="#A82F2F"><font size="2">(03:38:10 AM)</font> <b>Havvy:</b></font> Unfortunately, I don&apos;t want to give up compatibility with Node.js, or else I&apos;d use some of the ES6 stuff too.<br/>
<font size="2">(03:50:49 AM)</font><b> wkennington [<em>~william@76.77.180.204</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(04:13:01 AM)</font> <b>copumpkin:</b></font> is there a way to &quot;force-redirect&quot; output to a file, even if you don&apos;t have +w on it?<br/>
<font color="#A82F2F"><font size="2">(04:13:51 AM)</font> <b>benley:</b></font> if you can&apos;t write to a file, ... well hopefully you have sudo or something?<br/>
<font color="#A82F2F"><font size="2">(04:14:08 AM)</font> <b>copumpkin:</b></font> I own it<br/>
<font color="#A82F2F"><font size="2">(04:14:12 AM)</font> <b>benley:</b></font> chmod +w it?<br/>
<font color="#A82F2F"><font size="2">(04:14:26 AM)</font> <b>copumpkin:</b></font> I was hoping for a one-shot :)<br/>
<font color="#A82F2F"><font size="2">(04:38:13 AM)</font> <b>o11c:</b></font> copumpkin: you could certainly write a small wrapper to do it<br/>
<font color="#A82F2F"><font size="2">(04:38:26 AM)</font> <b>copumpkin:</b></font> yeah, was hoping to avoid that, but I gave in and just wrote multiple commands :)<br/>
<font color="#A82F2F"><font size="2">(04:38:27 AM)</font> <b>copumpkin:</b></font> thanks<br/>
<font color="#A82F2F"><font size="2">(04:44:59 AM)</font> <b>aszlig:</b></font> damn setgroups()...<br/>
<font color="#A82F2F"><font size="2">(04:45:27 AM)</font> <b>benley:</b></font> man. git-bisect is great, but it&apos;s a lot less great when you&apos;re bisecting an entire linux distro and have to build the entire universe to find out if a commit is good or not.<br/>
<font color="#A82F2F"><font size="2">(04:45:55 AM)</font> <b>aszlig:</b></font> benley: it however works quite well with nixos<br/>
<font color="#A82F2F"><font size="2">(04:46:08 AM)</font> <b>benley:</b></font> oh yes, it&apos;s amazing that this is even possible<br/>
<font color="#A82F2F"><font size="2">(04:46:27 AM)</font> <b>benley:</b></font> I&apos;m just sitting here watching my laptop compile glibc and gcc and gettext and gmp and mhc and ... you know<br/>
<font color="#A82F2F"><font size="2">(04:46:42 AM)</font> <b>benley:</b></font> trying to track down what broke the build for GDAL<br/>
<font color="#A82F2F"><font size="2">(04:47:32 AM)</font> <b>henrytill:</b></font> benley: been there<br/>
<font color="#A82F2F"><font size="2">(04:47:46 AM)</font> <b>aszlig:</b></font> git bisect run sh -c &apos;nix-instantiate -A foo || exit 125; nix-build -A foo&apos;<br/>
<font color="#A82F2F"><font size="2">(04:47:56 AM)</font> <b>aszlig:</b></font> be sure to not forget about the former<br/>
<font color="#A82F2F"><font size="2">(04:48:13 AM)</font> <b>benley:</b></font> what&apos;s the nix-instantiate before nix-build accomplish?<br/>
<font color="#A82F2F"><font size="2">(04:48:29 AM)</font> <b>aszlig:</b></font> benley: it ensures that evaluation doesn&apos;t fail<br/>
<font color="#A82F2F"><font size="2">(04:48:49 AM)</font> <b>aszlig:</b></font> and exit code 125 results in &quot;bisect skip&quot;<br/>
<font color="#A82F2F"><font size="2">(04:48:49 AM)</font> <b>benley:</b></font> effectively short-circuiting the build if it&apos;s doomed to fail from that, I guess?<br/>
<font color="#A82F2F"><font size="2">(04:48:54 AM)</font> <b>benley:</b></font> oh nice<br/>
<font color="#A82F2F"><font size="2">(04:48:59 AM)</font> <b>benley:</b></font> perfect<br/>
<font color="#A82F2F"><font size="2">(04:49:46 AM)</font> <b>benley:</b></font> one of these days I&apos;ll get over my aversion to spinning up giant cloud VMs for this kind of thing<br/>
<font color="#A82F2F"><font size="2">(04:50:09 AM)</font> <b>henrytill:</b></font> aszlig: thanks for that, it&apos;ll definitely come in handy<br/>
<font color="#A82F2F"><font size="2">(04:50:18 AM)</font> <b>benley:</b></font> yeah, that&apos;s definitely going to come in handy.<br/>
<font color="#062585"><font size="2">(04:50:58 AM)</font> <b>***aszlig</b></font> usually bisects for stupid commit messages<br/>
<font color="#A82F2F"><font size="2">(04:52:15 AM)</font> <b>aszlig:</b></font> in order to be able to actually write in a message which commit actually broke what the new commit is fixing<br/>
<font color="#A82F2F"><font size="2">(04:53:03 AM)</font> <b>aszlig:</b></font> not really sure whether it will matter someday[TM] :-D<br/>
<font color="#A82F2F"><font size="2">(04:53:18 AM)</font> <b>henrytill:</b></font> aszlig: good form nonetheless<br/>
<font color="#A82F2F"><font size="2">(04:57:25 AM)</font> <b>ttuegel:</b></font> that&apos;s a very helpful script... when it&apos;s a failure you&apos;re bisecting :)<br/>
<font color="#A82F2F"><font size="2">(04:57:33 AM)</font> <b>ttuegel:</b></font> when it&apos;s a hardware/driver issue...<br/>
<font color="#A82F2F"><font size="2">(04:58:07 AM)</font> <b>aszlig:</b></font> ttuegel: oh, if it&apos;s the latter then you can&apos;t use bisect run anyway =)<br/>
<font color="#A82F2F"><font size="2">(04:58:14 AM)</font> <b>ttuegel:</b></font> nope!<br/>
<font color="#A82F2F"><font size="2">(04:58:16 AM)</font> <b>aszlig:</b></font> except if it&apos;s reproducable in a vm test =)<br/>
<font color="#A82F2F"><font size="2">(04:58:27 AM)</font> <b>ttuegel:</b></font> graphics driver :(<br/>
<font color="#A82F2F"><font size="2">(04:58:43 AM)</font> <b>aszlig:</b></font> oh, my favourites X-D<br/>
<font color="#A82F2F"><font size="2">(04:58:43 AM)</font> <b>benley:</b></font> oh god if you&apos;re debugging graphics drivers you have my sympathy<br/>
<font color="#A82F2F"><font size="2">(04:58:48 AM)</font> <b>ttuegel:</b></font> i strongly suspect someone broke something deep in the kernel, because both of my machines are doing it, and they have very different graphics devices<br/>
<font color="#062585"><font size="2">(04:59:04 AM)</font> <b>***benley</b></font> still watching gcc compile<br/>
<font color="#A82F2F"><font size="2">(04:59:10 AM)</font> <b>aszlig:</b></font> had to do that with intel, radeon and nouveau so far...<br/>
<font color="#A82F2F"><font size="2">(04:59:34 AM)</font> <b>ttuegel:</b></font> tonight&apos;s just intel and radeon for me.<br/>
<font color="#A82F2F"><font size="2">(04:59:48 AM)</font> <b>aszlig:</b></font> ttuegel: have fun X-/<br/>
<font color="#A82F2F"><font size="2">(04:59:57 AM)</font> <b>ttuegel:</b></font> debugging my intel wireless was fun, when somebody decided to drop my firmware because it&apos;s &quot;too old&quot;<br/>
<font color="#A82F2F"><font size="2">(05:00:20 AM)</font> <b>aszlig:</b></font> ttuegel: somebody committing in &lt;nixpkgs&gt;?<br/>
<font color="#A82F2F"><font size="2">(05:00:26 AM)</font> <b>aszlig:</b></font> or at linux mainline?<br/>
<font color="#A82F2F"><font size="2">(05:00:31 AM)</font> <b>ttuegel:</b></font> &lt;nixpkgs&gt;<br/>
<font color="#062585"><font size="2">(05:01:33 AM)</font> <b>***aszlig</b></font> suggests dropping proprietary fglrx and nvidia, because they&apos;re so 90ies as well ;-)<br/>
<font color="#A82F2F"><font size="2">(05:02:34 AM)</font> <b>aszlig:</b></font> geeesh...<br/>
<font color="#A82F2F"><font size="2">(05:02:48 AM)</font> <b>aszlig:</b></font> First, rewinding head to replay your work on top of it...<br/>
<font color="#A82F2F"><font size="2">(05:02:55 AM)</font> <b>aszlig:</b></font> ... 20 minutes passed so far<br/>
<font color="#A82F2F"><font size="2">(05:03:00 AM)</font> <b>ttuegel:</b></font> o_O<br/>
<font color="#A82F2F"><font size="2">(05:03:08 AM)</font> <b>aszlig:</b></font> ttuegel: chromium...<br/>
<font color="#A82F2F"><font size="2">(05:03:29 AM)</font> <b>aszlig:</b></font> my &quot;favourite&quot; source tree<br/>
<font color="#A82F2F"><font size="2">(05:03:36 AM)</font> <b>ttuegel:</b></font> yeah, i hit that bug today<br/>
<font color="#A82F2F"><font size="2">(05:03:46 AM)</font> <b>ttuegel:</b></font> gah, bisecting through a merge...<br/>
<font color="#A82F2F"><font size="2">(05:03:56 AM)</font> <b>aszlig:</b></font> ttuegel: the gid_map bug?<br/>
<font color="#A82F2F"><font size="2">(05:04:00 AM)</font> <b>ttuegel:</b></font> yes<br/>
<font color="#A82F2F"><font size="2">(05:04:09 AM)</font> <b>aszlig:</b></font> yep, omw fixing it<br/>
<font color="#A82F2F"><font size="2">(05:04:22 AM)</font> <b>ttuegel:</b></font> rebuilt chromium for nothing ;)<br/>
<font color="#A82F2F"><font size="2">(05:04:40 AM)</font> <b>aldiyen:</b></font> is there a standard for the naming of package names in the pkgs/top-level/all-packages.nix file? in particular, some of them use camel case, while others have underscores<br/>
<font color="#A82F2F"><font size="2">(05:04:52 AM)</font> <b>aszlig:</b></font> the problem there is that setting the gid map doesn&apos;t work if the parent namespace doesn&apos;t have CAP_SETGID<br/>
<font color="#A82F2F"><font size="2">(05:05:06 AM)</font> <b>aszlig:</b></font> which you only have if you&apos;re _really_ running as uid 0<br/>
<font color="#A82F2F"><font size="2">(05:05:26 AM)</font> <b>aszlig:</b></font> aldiyen: well, using dashes is preferred<br/>
<font color="#A82F2F"><font size="2">(05:05:50 AM)</font> <b>aszlig:</b></font> aldiyen: http://nixos.org/nixpkgs/manual/#idm140351253865296<br/>
<font color="#A82F2F"><font size="2">(05:06:52 AM)</font> <b>semigroup:</b></font> Are NixOS modules usable on a per-user basis? I haven&apos;t been able to discern from the docs whether there&apos;s a configuration.nix for users as well, or whether I just have to nix-env -i things<br/>
<font color="#A82F2F"><font size="2">(05:07:06 AM)</font> <b>aszlig:</b></font> ttuegel: the biggest problem now is that only the zygote master knows about user namespaces...<br/>
<font color="#A82F2F"><font size="2">(05:07:32 AM)</font> <b>copumpkin:</b></font> guilec is ridiculously slow<br/>
<font color="#A82F2F"><font size="2">(05:07:38 AM)</font> <b>copumpkin:</b></font> or perhaps it&apos;s just the thing being compiled<br/>
<font color="#A82F2F"><font size="2">(05:07:49 AM)</font> <b>aldiyen:</b></font> aszlig: ah, I see. thanks. almost none of them have dashes :P<br/>
<font color="#A82F2F"><font size="2">(05:08:35 AM)</font> <b>aszlig:</b></font> ttuegel: so making failure of setresgid() non-fatal probably will have implications if you&apos;re _not_ using user namespaces<br/>
<font color="#A82F2F"><font size="2">(05:09:44 AM)</font> <b>aszlig:</b></font> semigroup: more or less, iirc there was nix-rehash that should do that, but i haven&apos;t looked into it by myself yet<br/>
<font size="2">(05:10:33 AM)</font><b> Hakisho_ is now known as Hakisho</b><br/>
<font color="#A82F2F"><font size="2">(05:11:18 AM)</font> <b>aszlig:</b></font> this is ridiculous, still rebasing...<br/>
<font color="#A82F2F"><font size="2">(05:12:11 AM)</font> <b>aszlig:</b></font> 9.7G    .git<br/>
<font color="#A82F2F"><font size="2">(05:12:25 AM)</font> <b>MP2E:</b></font> o.O<br/>
<font color="#A82F2F"><font size="2">(05:12:25 AM)</font> <b>aszlig:</b></font> maybe that explains something<br/>
<font color="#A82F2F"><font size="2">(05:13:45 AM)</font> <b>aldiyen:</b></font> how much are you rebasing on top??<br/>
<font color="#A82F2F"><font size="2">(05:14:01 AM)</font> <b>aszlig:</b></font> aldiyen: one single commit<br/>
<font color="#A82F2F"><font size="2">(05:14:07 AM)</font> <b>aldiyen:</b></font> is it like, really huge?<br/>
<font color="#A82F2F"><font size="2">(05:14:17 AM)</font> <b>McEnroe:</b></font> How should I deal with a package whose name starts with a number?<br/>
<font color="#A82F2F"><font size="2">(05:14:40 AM)</font> <b>aszlig:</b></font> aszlig    1747 98.1 55.2 4335488 2194472 pts/5 R+   04:45  27:16 git format-patch -k --stdout --full-index --cherry-pick --right-only --src-prefix=a/ --dst-prefix=b/ --no-renames --no-cover-letter 228969930f051061841771790e381c9e3fa328be...0fec7e4a742f001c9816a8b58a1120fb44230867<br/>
<font color="#A82F2F"><font size="2">(05:14:46 AM)</font> <b>ttuegel:</b></font> McEnroe: attribute names can be arbitrary strings if you put them in double quotes<br/>
<font color="#A82F2F"><font size="2">(05:15:51 AM)</font> <b>aszlig:</b></font> so mainly a cpu/memory issue i guess<br/>
<font color="#A82F2F"><font size="2">(05:16:06 AM)</font> <b>aszlig:</b></font> and i&apos;m doing this on my &quot;downgraded&quot; machine...<br/>
<font color="#A82F2F"><font size="2">(05:19:00 AM)</font> <b>McEnroe:</b></font> ttuegel: Oooh. That&apos;s nice. Thanks!<br/>
<font color="#A82F2F"><font size="2">(05:22:45 AM)</font> <b>aszlig:</b></font> oh...<br/>
<font color="#A82F2F"><font size="2">(05:23:05 AM)</font> <b>aszlig:</b></font> now i know why it took so long... that branch had a different base branch<br/>
<font color="#A82F2F"><font size="2">(05:25:43 AM)</font> <b>aldiyen:</b></font> ahahahaha<br/>
<font color="#A82F2F"><font size="2">(05:25:45 AM)</font> <b>aldiyen:</b></font> that&apos;d do it<br/>
<font color="#A82F2F"><font size="2">(05:28:55 AM)</font> <b>LeppardLabs:</b></font> I am new to NixOS and I am trying to figure out how to install Samba as a Active Directory Domain Controller. The official installation instructions call for running &quot;samba-tool domain provision --use-rfc2307 --interactive&quot;, which seems to do a lot of impure things. What would be the Nix way of doing this?<br/>
<font color="#A82F2F"><font size="2">(05:35:29 AM)</font> <b>aldiyen:</b></font> LeppardLabs: hmm, sounds tricky. I assume that this command provisions the domain in some way that mutates the system configuration after installation?<br/>
<font color="#A82F2F"><font size="2">(05:37:01 AM)</font> <b>LeppardLabs:</b></font> Yes, it seems to. It also seems to be non-deterministic, in that it creates SIDs that can change between runs of the command.<br/>
