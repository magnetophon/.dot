<html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Conversation with #nixos at Sat 10 Jan 2015 02:41:58 PM CET on magnetophon@irc.freenode.net (irc)</title></head><body><h3>Conversation with #nixos at Sat 10 Jan 2015 02:41:58 PM CET on magnetophon@irc.freenode.net (irc)</h3>
<font size="2">(02:41:59 PM)</font><b> The topic for #nixos is: <a href="http://nixos.org/">http://nixos.org/</a> || Latest NixOS: <a href="http://nixos.org/nixos/download.html">http://nixos.org/nixos/download.html</a> || Latest Nix: <a href="http://nixos.org/nix/download.html">http://nixos.org/nix/download.html</a> || Logs: <a href="http://nixos.org/irc/logs/">http://nixos.org/irc/logs/</a> || Swag: <a href="http://www.cafepress.co.uk/NixOS">http://www.cafepress.co.uk/NixOS</a></b><br/>
<font size="2">(02:41:59 PM)</font><b> Topic for #nixos set by niksnut!~eelco@ec2-54-216-36-73.eu-west-1.compute.amazonaws.com at 12:56:59 PM on 04/11/2014</b><br/>
<font color="#A82F2F"><font size="2">(02:42:53 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] the-kenny pushed 1 new commit to master: http://git.io/O7pGeQ<br/>
<font color="#A82F2F"><font size="2">(02:42:53 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 7aca9db Moritz Ulrich: dfu-programmer: Update to 0.7.1.<br/>
<font color="#16569E"><font size="2">(02:43:21 PM)</font> <b>magnetophon:</b></font> nkar: I was online for a while; did you get any suggestions for managing dotfiles? <br/>
<font color="#A82F2F"><font size="2">(02:45:44 PM)</font> <b>the-kenny:</b></font> magnetophon: I suggested GNU stow<br/>
<font color="#A82F2F"><font size="2">(02:45:54 PM)</font> <b>the-kenny:</b></font> But NixOS itself doesn&apos;t provide tooling for it<br/>
<font color="#A82F2F"><font size="2">(02:45:54 PM)</font> <b>nkar:</b></font> magnetophon: nothing new.  here&apos;s the gist: create a git repository and symlink from there.  if you want to push it somewhere, don&apos;t forget to remove things like private keys.<br/>
<font color="#A82F2F"><font size="2">(02:46:47 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] vbgl pushed 2 new commits to master: http://git.io/ppmOpA<br/>
<font color="#A82F2F"><font size="2">(02:46:47 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 5709041 koral: mkvtoolnix: 7.3.0 -&gt; 7.5.0<br/>
<font color="#A82F2F"><font size="2">(02:46:47 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 967f343 vbgl: Merge pull request #5684 from k0ral/mkvtoolnix...<br/>
<font color="#A82F2F"><font size="2">(02:48:12 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] nckx opened pull request #5687: Add ipv6calc: calculate/manipulate (not only) IPv6 addresses (master...ipv6calc) http://git.io/3QP0JA<br/>
<font color="#16569E"><font size="2">(02:49:29 PM)</font> <b>magnetophon:</b></font> the-kenny, nkar: Thanks. in Debian I was using https://jim.github.io/briefcase/ which has a nice workflow for managing private stuff, but I haven't looked into it enough to get it working in NixOS. There's also https://github.com/aszlig/vuizvui which is a NixOS way of doing it, but I don't understand it yet.<br/>
<font color="#16569E"><font size="2">(02:50:14 PM)</font> <b>magnetophon:</b></font> I'd love to see a proper and documented way of combining the best of those two...<br/>
<font color="#A82F2F"><font size="2">(02:50:15 PM)</font> <b>nkar:</b></font> magnetophon: cool! thanks for the pointers<br/>
<font color="#A82F2F"><font size="2">(02:52:09 PM)</font> <b>izietto:</b></font> Hello! can I ask for help?<br/>
<font color="#A82F2F"><font size="2">(02:54:12 PM)</font> <b>the-kenny:</b></font> Only with Permit A 38<br/>
<font color="#A82F2F"><font size="2">(02:54:48 PM)</font> <b>izietto:</b></font> ok, take my permit -&gt; Permit A 38<br/>
<font color="#A82F2F"><font size="2">(02:54:56 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] k0ral opened pull request #5689: Added mkvtoolnix-cli = mkvtoolnix without GUI dependencies. (master...mkvtoolnix) http://git.io/fZfrYg<br/>
<font color="#A82F2F"><font size="2">(02:55:41 PM)</font> <b>the-kenny:</b></font> izietto: three questions then<br/>
<font color="#A82F2F"><font size="2">(02:55:42 PM)</font> <b>the-kenny:</b></font> :p<br/>
<font color="#A82F2F"><font size="2">(02:55:45 PM)</font> <b>the-kenny:</b></font> just ask<br/>
<font color="#A82F2F"><font size="2">(02:55:49 PM)</font> <b>the-kenny:</b></font> no need to ask to ask<br/>
<font color="#A82F2F"><font size="2">(02:56:40 PM)</font> <b>izietto:</b></font> every irc channel says this, but it seems to me more educated to ask... but probably I&apos;m wrong :) anyway<br/>
<font color="#A82F2F"><font size="2">(02:57:03 PM)</font> <b>izietto:</b></font> I want to build a custom package for Ruby 2.2.0, so I edited ruby 2.1.3 package obtaining this: https://gist.github.com/mdesantis/0e836f304419a66bb811<br/>
<font color="#A82F2F"><font size="2">(02:57:43 PM)</font> <b>izietto:</b></font> I tried to build with this command: nix-build -E &apos;(import &lt;nixpkgs&gt; {}).callPackage ./ruby-2.2.0.nix {}&apos;<br/>
<font color="#A82F2F"><font size="2">(02:58:13 PM)</font> <b>izietto:</b></font> but it gives me this error: error: anonymous function at &quot;/home/demo/ruby-2.2.0.nix&quot;:1:1 called without required argument ?ruby_2_2_0?, at &quot;/nix/var/nix/profiles/per-user/root/channels/nixos/nixpkgs/lib/customisation.nix&quot;:58:12<br/>
<font color="#A82F2F"><font size="2">(02:58:58 PM)</font> <b>izietto:</b></font> so I wonder: how it is possible that ruby_2_1_3 function is defined inside ruby_2_1_3 package, but in mine it is not defined?<br/>
<font color="#A82F2F"><font size="2">(02:59:04 PM)</font> <b>izietto:</b></font> what is the difference?<br/>
<font color="#A82F2F"><font size="2">(02:59:31 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] vbgl closed pull request #5685: Update mpg321 from 0.2.13-2 to 0.3.2. (master...mpg321-updates) http://git.io/-xb7oQ<br/>
<font color="#A82F2F"><font size="2">(02:59:33 PM)</font> <b>izietto:</b></font> and above all: how can I build a custom package for ruby 2.2.0?<br/>
<font color="#A82F2F"><font size="2">(02:59:38 PM)</font> <b>izietto:</b></font> seen? three questions :D<br/>
<font color="#A82F2F"><font size="2">(03:00:19 PM)</font> <b>the-kenny:</b></font> hmm isn&apos;t that used for bootstrapping?<br/>
<font color="#A82F2F"><font size="2">(03:00:28 PM)</font> <b>the-kenny:</b></font> I suppose you could just use an &apos;older&apos; ruby there<br/>
<font color="#A82F2F"><font size="2">(03:01:11 PM)</font> <b>izietto:</b></font> do you mean bootstrapping ruby?<br/>
<font color="#A82F2F"><font size="2">(03:02:35 PM)</font> <b>the-kenny:</b></font> I&apos;m not familiar with the expression, but to me it looks like the arg is used for bootstrapping. If that&apos;s the case, you could pass in some older ruby and use that to build the new ruby<br/>
<font color="#A82F2F"><font size="2">(03:02:46 PM)</font> <b>the-kenny:</b></font> but someone with more knowledge about the expression might be able to say more<br/>
<font color="#A82F2F"><font size="2">(03:03:26 PM)</font> <b>izietto:</b></font> it seems to me that it is used somehow in order to choose about applying a patch or not<br/>
<font color="#A82F2F"><font size="2">(03:03:55 PM)</font> <b>izietto:</b></font> I&apos;m talking about this line: baseruby = ruby_2_2_0.override { useRailsExpress = false; };<br/>
<font color="#A82F2F"><font size="2">(03:04:04 PM)</font> <b>the-kenny:</b></font> well, basically what it does is passing itself into itself and build itself with an argument changed<br/>
<font color="#A82F2F"><font size="2">(03:04:08 PM)</font> <b>the-kenny:</b></font> that&apos;s the .override<br/>
<font color="#A82F2F"><font size="2">(03:05:10 PM)</font> <b>the-kenny:</b></font> your nix-build call doesn&apos;t work because the attribute pkgs.ruby_2_2_0 isn&apos;t set (obviously)<br/>
<font color="#A82F2F"><font size="2">(03:05:32 PM)</font> <b>the-kenny:</b></font> in order for this to work you&apos;d have to add your callPackage ... to all-packages.nix<br/>
<font color="#A82F2F"><font size="2">(03:07:10 PM)</font> <b>izietto:</b></font> oh<br/>
<font color="#A82F2F"><font size="2">(03:07:14 PM)</font> <b>the-kenny:</b></font> let me try something<br/>
<font color="#A82F2F"><font size="2">(03:08:35 PM)</font> <b>izietto:</b></font> so the original package definition works because it is part of all-packages<br/>
<font color="#A82F2F"><font size="2">(03:08:42 PM)</font> <b>izietto:</b></font> ok I wait :)<br/>
<font color="#A82F2F"><font size="2">(03:08:47 PM)</font> <b>the-kenny:</b></font> and gets passed itself as an argument<br/>
<font color="#A82F2F"><font size="2">(03:09:12 PM)</font> <b>izietto:</b></font> yes it makes sense<br/>
<font color="#A82F2F"><font size="2">(03:09:17 PM)</font> <b>the-kenny:</b></font> if you build ruby_2_1_3 it&apos;s built twice: once with useRailsExpress = false and once true<br/>
<font color="#A82F2F"><font size="2">(03:11:33 PM)</font> <b>izietto:</b></font> maybe in order to provide both? I don&apos;t think that compiling with patches requires a standard compiling<br/>
<font color="#16569E"><font size="2">(03:12:28 PM)</font> <b>magnetophon:</b></font> goibhniu, henrytill: Could you have a look at https://github.com/NixOS/nixpkgs/pull/5633  It's a bugfix for faust in 14.12, as the version currently in there doesn't do anything. Master already has a newer version with added functionality (thanks for the merge, goibhniu!), but it would be nice if stable has a working version too, no? <br/>
<font color="#A82F2F"><font size="2">(03:12:33 PM)</font> <b>the-kenny:</b></font> the version built with useRailsExpress = false then gets passed as --with-basruby=<br/>
<font color="#A82F2F"><font size="2">(03:12:36 PM)</font> <b>the-kenny:</b></font> *baseruby<br/>
<font color="#A82F2F"><font size="2">(03:13:35 PM)</font> <b>izietto:</b></font> you are right<br/>
<font color="#A82F2F"><font size="2">(03:13:56 PM)</font> <b>musicmatze:</b></font> Are you guys okay with me writing &quot;Is this issue actually relevant anymore?&quot;-like comments on github? I see that there are a lot issues around which are really old and might be outdated...<br/>
<font color="#A82F2F"><font size="2">(03:14:15 PM)</font> <b>the-kenny:</b></font> musicmatze: it would be nice if you could check somehow for yourself<br/>
<font color="#A82F2F"><font size="2">(03:14:30 PM)</font> <b>the-kenny:</b></font> musicmatze: else: I&apos;m fine with it, but I don&apos;t have that big of a voice here<br/>
<font color="#A82F2F"><font size="2">(03:14:40 PM)</font> <b>the-kenny:</b></font> izietto: the simplest solution would be cloning nixpkgs and adding a new attribute to all-packages.nix, I&apos;d suggest that<br/>
<font color="#A82F2F"><font size="2">(03:14:43 PM)</font> <b>the-kenny:</b></font> sorry for the inconvenience<br/>
<font color="#A82F2F"><font size="2">(03:16:12 PM)</font> <b>musicmatze:</b></font> the-kenny: That would be nice, indeed, and I will do it wherever possible...<br/>
<font color="#A82F2F"><font size="2">(03:17:09 PM)</font> <b>izietto:</b></font> np, thank you for your help :) with cloning you mean clone the repository?<br/>
<font color="#A82F2F"><font size="2">(03:17:20 PM)</font> <b>the-kenny:</b></font> yup<br/>
<font color="#A82F2F"><font size="2">(03:17:29 PM)</font> <b>the-kenny:</b></font> just git clone https://github.com/nixos/nixpkgs<br/>
<font color="#A82F2F"><font size="2">(03:17:54 PM)</font> <b>izietto:</b></font> and then how I specify to the build the nixpkgs dir? with env var?<br/>
<font color="#A82F2F"><font size="2">(03:21:37 PM)</font> <b>izietto:</b></font> something like NIX_PATH=/my/nixpkgs/clone:$NIX_PATH right?<br/>
<font color="#A82F2F"><font size="2">(03:22:33 PM)</font> <b>the-kenny:</b></font> nix-build . -A pkgs.ruby_2_2_0<br/>
<font color="#A82F2F"><font size="2">(03:22:56 PM)</font> <b>the-kenny:</b></font> the -E stuff is actually a hack<br/>
<font color="#A82F2F"><font size="2">(03:23:10 PM)</font> <b>goibhniu:</b></font> magnetophon: I don&apos;t get it, is this the same faust expression we have in unstable now?<br/>
<font color="#A82F2F"><font size="2">(03:23:35 PM)</font> <b>goibhniu:</b></font> magnetophon: if so, why not cherry pick the change from unstable?<br/>
<font color="#16569E"><font size="2">(03:25:45 PM)</font> <b>magnetophon:</b></font> goibhniu: no, the one in unstable has faust2jack (so more functionality), but since there is a bug in the latest upstream release, which affects faust2jack, I needed to base that version on a 'random' git pull, so imo not the ideal starting point for NixOS stable. <br/>
<font color="#16569E"><font size="2">(03:26:06 PM)</font> <b>magnetophon:</b></font> goibhniu: does that make sense?<br/>
<font color="#A82F2F"><font size="2">(03:26:16 PM)</font> <b>goibhniu:</b></font> magnetophon: BTW there are some nice conventions regarding git commit messages e.g. http://robots.thoughtbot.com/5-useful-tips-for-a-better-commit-message<br/>
<font color="#16569E"><font size="2">(03:26:30 PM)</font> <b>magnetophon:</b></font> goibhniu: thanks<br/>
<font color="#062585"><font size="2">(03:26:43 PM)</font> <b>***magnetophon</b></font> goes reading<br/>
<font color="#A82F2F"><font size="2">(03:27:57 PM)</font> <b>felixsch:</b></font> Is there anything I need to do to get bash-completion to working. set bash.enableCompletion, installed bashCompletion and sourced /etc/profile. But it&apos;s still not working...<br/>
<font color="#A82F2F"><font size="2">(03:28:10 PM)</font> <b>goibhniu:</b></font> magnetophon: the main thing (IMO) is to describe what the commit does, using the imperative: e.g. &quot;Fix faust2* scripts&quot; (or something like that)<br/>
<font color="#A82F2F"><font size="2">(03:29:28 PM)</font> <b>goibhniu:</b></font> magnetophon: If you can update the commit message, I&apos;ll merge<br/>
<font color="#16569E"><font size="2">(03:29:48 PM)</font> <b>magnetophon:</b></font> goibhniu: what's unclear about &quot;bugfix. The version in 14.12 doesn't do anything&quot;?<br/>
<font color="#A82F2F"><font size="2">(03:30:08 PM)</font> <b>goibhniu:</b></font> I don&apos;t know what part of faust doesn&apos;t do anything, and what gets fixed<br/>
<font color="#A82F2F"><font size="2">(03:30:50 PM)</font> <b>goibhniu:</b></font> and the phrasing explains what was wrong previously, not what you&apos;ve fixed ... does it make sense?<br/>
<font color="#A82F2F"><font size="2">(03:31:11 PM)</font> <b>izietto:</b></font> the-kenny, but if I use nix-build . -A pkgs.ruby_2_2_0 how does nix-build know that it should use nixpkgs from the cloned dir?<br/>
<font color="#A82F2F"><font size="2">(03:31:34 PM)</font> <b>izietto:</b></font> ah because of the dot<br/>
<font color="#16569E"><font size="2">(03:31:55 PM)</font> <b>magnetophon:</b></font> goibhniu: everything gets fixed. the current version of faust literally does not do anything. none of it. Sorry, I'm really not getting you.<br/>
<font color="#A82F2F"><font size="2">(03:31:55 PM)</font> <b>the-kenny:</b></font> yes :)<br/>
<font color="#A82F2F"><font size="2">(03:31:57 PM)</font> <b>izietto:</b></font> so I should run that command inside the cloned dir<br/>
<font color="#A82F2F"><font size="2">(03:31:59 PM)</font> <b>the-kenny:</b></font> you can also pass a path<br/>
<font color="#A82F2F"><font size="2">(03:32:05 PM)</font> <b>the-kenny:</b></font> nix-build path/to/nixpkgs<br/>
<font color="#A82F2F"><font size="2">(03:32:32 PM)</font> <b>izietto:</b></font> ah ok! I try<br/>
<font color="#16569E"><font size="2">(03:32:39 PM)</font> <b>magnetophon:</b></font> goibhniu: how would you describe that?<br/>
<font color="#A82F2F"><font size="2">(03:32:40 PM)</font> <b>goibhniu:</b></font> magnetophon: instead of a message saying &quot;this used to be broken&quot; ... it&apos;s more useful to say &quot;Fix X by patching Y&quot;<br/>
<font color="#A82F2F"><font size="2">(03:34:33 PM)</font> <b>goibhniu:</b></font> magnetophon: how about &quot;Fix faust: use patchShebangs and patch bin/*faust2* scripts&quot; ... something like that<br/>
<font color="#A82F2F"><font size="2">(03:35:26 PM)</font> <b>goibhniu:</b></font> magnetophon: shouldn&apos;t this PR be against 14.12 rather than master?<br/>
<font color="#16569E"><font size="2">(03:36:09 PM)</font> <b>magnetophon:</b></font> goibhniu: I asked about that in here, and someone (I think vcuncat) said to PR against master.<br/>
<font color="#16569E"><font size="2">(03:36:24 PM)</font> <b>magnetophon:</b></font> goibhniu: though if you want I can change that too.<br/>
<font color="#A82F2F"><font size="2">(03:37:24 PM)</font> <b>goibhniu:</b></font> magnetophon: in general that&apos;s true, but IIUC you want to use faust in master from git (because of bugs), but faust in 14.12 from a stable release ... is that right?<br/>
<font color="#16569E"><font size="2">(03:37:41 PM)</font> <b>magnetophon:</b></font> goibhniu: yes<br/>
<font color="#A82F2F"><font size="2">(03:37:55 PM)</font> <b>goibhniu:</b></font> do you also want this patch applied to master?<br/>
<font color="#16569E"><font size="2">(03:38:46 PM)</font> <b>magnetophon:</b></font> goibhniu: No, as that would remove the added functionality in there (faust2jack). So I'll do a PR against 14.12. <br/>
<font color="#A82F2F"><font size="2">(03:39:22 PM)</font> <b>goibhniu:</b></font> ok, perfect!<br/>
<font color="#16569E"><font size="2">(03:40:17 PM)</font> <b>magnetophon:</b></font> goibhniu: One more thing: the full description of the fix does not fit in the 50 char 'title line' So I'd leave the title as is (other suggestions welcome), and add a description of the fix after an empty line?  <br/>
<font color="#A82F2F"><font size="2">(03:41:16 PM)</font> <b>goibhniu:</b></font> magnetophon: you mean you&apos;d keep &quot;bugfix. The version in 14.12 doesn&apos;t do anything&quot;?<br/>
<font color="#16569E"><font size="2">(03:41:34 PM)</font> <b>magnetophon:</b></font> goibhniu: other suggestions welcome<br/>
<font color="#A82F2F"><font size="2">(03:42:00 PM)</font> <b>goibhniu:</b></font> magnetophon: please try to phrase it in the imperative describing what this commit does e.g. &quot;Fix faust&quot; is better<br/>
<font color="#16569E"><font size="2">(03:42:32 PM)</font> <b>magnetophon:</b></font> goibhniu: OK<br/>
<font color="#A82F2F"><font size="2">(03:42:41 PM)</font> <b>goibhniu:</b></font> and more details after an empty line would be great<br/>
<font color="#16569E"><font size="2">(03:42:47 PM)</font> <b>magnetophon:</b></font> cool<br/>
<font color="#A82F2F"><font size="2">(03:42:51 PM)</font> <b>goibhniu:</b></font> thanks!<br/>
<font color="#16569E"><font size="2">(03:42:57 PM)</font> <b>magnetophon:</b></font> goibhniu: thanks!<br/>
<font color="#A82F2F"><font size="2">(03:45:48 PM)</font> <b>goibhniu:</b></font> magnetophon: you&apos;ll also notice that a lot of people prefix the commit message with the thing they&apos;ve changed, e.g. &quot;Faust: bugfix&quot;<br/>
<font color="#A82F2F"><font size="2">(03:47:08 PM)</font> <b>goibhniu:</b></font> it makes the commit log really neat<br/>
<font color="#16569E"><font size="2">(03:47:22 PM)</font> <b>magnetophon:</b></font> goibhniu: Yeah, I tried to fit that in, but it went over 50 chars that way, iirc.  I thought it to be more important to stress that this commit needed to be in 14.12, and why. Live and learn...<br/>
<font color="#A82F2F"><font size="2">(03:48:05 PM)</font> <b>goibhniu:</b></font> ok, cool!<br/>
<font color="#A82F2F"><font size="2">(03:49:42 PM)</font> <b>izietto:</b></font> are sha256 lines different form the ones that sha256sum outputs?<br/>
<font color="#A82F2F"><font size="2">(03:50:38 PM)</font> <b>izietto:</b></font> because the sha256 coherence check fails but I&apos;m sure it&apos;s correct, using sha256sum...<br/>
<font size="2">(03:59:41 PM)</font><b> goibhniu left the room (quit: Ping timeout: 244 seconds).</b><br/>
<font color="#A82F2F"><font size="2">(04:00:25 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] peti pushed 6 new commits to master: http://git.io/iqu51w<br/>
<font color="#A82F2F"><font size="2">(04:00:25 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master cbca401 Peter Simons: configuration-ghc-7.9.x: fix license attribute for doctest override<br/>
<font color="#A82F2F"><font size="2">(04:00:25 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master fa27f2a Peter Simons: hackage-packages.nix: rebuild from Hackage 2015-01-10T13:56:15+0100<br/>
<font color="#A82F2F"><font size="2">(04:00:25 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master afca614 Peter Simons: haskell-generic-builder: simplify &quot;package.conf.d&quot; management...<br/>
<font color="#A82F2F"><font size="2">(04:01:52 PM)</font> <b>mbuf:</b></font> for nixos-deploy-network, we already need systems with nixos pre-installed?<br/>
<font color="#A82F2F"><font size="2">(04:02:08 PM)</font> <b>mbuf:</b></font> or is there a way to do a network install of nixos?<br/>
<font color="#A82F2F"><font size="2">(04:02:10 PM)</font> <b>ktosiek:</b></font> izietto: you mean the fetchurl sha256? I&apos;m afraid they are, try using nix-prefetch-url to download the archive and get the right hash<br/>
<font color="#A82F2F"><font size="2">(04:04:07 PM)</font> <b>shortcircuit:</b></font> What is up with &apos;/etc/zshrc:12: promptinit: function definition file not found&apos; in unstable?<br/>
<font color="#A82F2F"><font size="2">(04:04:13 PM)</font> <b>ktosiek:</b></font> hmm, oh wait, it&apos;s the same<br/>
<font color="#062585"><font size="2">(04:05:28 PM)</font> <b>***ktosiek</b></font> has a feeling nix uses a different encoding for hashes than just base16<br/>
<font color="#A82F2F"><font size="2">(04:07:03 PM)</font> <b>izietto:</b></font> ktosiek, is base32 I read on the manual, but seems that you can&apos;t just `curl {url} &amp;&amp; nix-hash --base32 {file}`<br/>
<font color="#A82F2F"><font size="2">(04:08:03 PM)</font> <b>izietto:</b></font> and somehow nix-prefetch-url doesn&apos;t work well too... I indagate 8-)<br/>
<font size="2">(04:09:16 PM)</font><b> MichaelRaskin [<em>~MichaelRa@195.91.224.161</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(04:09:23 PM)</font> <b>ktosiek:</b></font> how is nix-prefetch-url not working?<br/>
<font color="#A82F2F"><font size="2">(04:13:44 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] magnetophon opened pull request #5690: Faustbugfix (master...faustbugfix) http://git.io/qG-dAg<br/>
<font color="#16569E"><font size="2">(04:14:42 PM)</font> <b>magnetophon:</b></font> hmmm, goibhniu left the room....  Anyone else care to look at this?^^<br/>
<font color="#A82F2F"><font size="2">(04:15:59 PM)</font> <b>izietto:</b></font> ktosiek, I think nix-prefetch-url is not working because it is linked with nixpkgs from nixos, but I&apos;m using a cloned nixpkgs<br/>
<font color="#A82F2F"><font size="2">(04:16:23 PM)</font> <b>izietto:</b></font> I&apos;m buildin g with nix-build . -A pkgs.ruby_2_2_0<br/>
<font color="#A82F2F"><font size="2">(04:16:34 PM)</font> <b>ktosiek:</b></font> well, if you don&apos;t change how hashes are generated then it shouldn&apos;t matter where the nix-prefetch-url comes from<br/>
<font color="#A82F2F"><font size="2">(04:16:42 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] magnetophon closed pull request #5633: bugfix. The version in 14.12 doesn&apos;t do anything. (master...faust_bugfix) http://git.io/h7n26Q<br/>
<font color="#A82F2F"><font size="2">(04:19:44 PM)</font> <b>izietto:</b></font> ktosiek, this is the output of: nix-prefetch-url https://github.com/ruby/ruby/archive/v2_2_0.tar.gz<br/>
<font color="#A82F2F"><font size="2">(04:19:47 PM)</font> <b>izietto:</b></font> path is ?/nix/store/i3c42s0awdak54g62s522scfkp4w711j-v2_2_0.tar.gz?<br/>
<font color="#A82F2F"><font size="2">(04:19:47 PM)</font> <b>izietto:</b></font> 10yzkv2q7iq3vg6kqhzmgxwp7b5rvlafflk2smpa3l7r5vwdkj5r<br/>
<font color="#A82F2F"><font size="2">(04:20:22 PM)</font> <b>izietto:</b></font> and the build fails with this error:<br/>
<font color="#A82F2F"><font size="2">(04:20:25 PM)</font> <b>izietto:</b></font> unpacking source archive /tmp/nix-build-ruby-v2_2_0-src.drv-0/v2_2_0.tar.gz<br/>
<font color="#A82F2F"><font size="2">(04:20:25 PM)</font> <b>izietto:</b></font> output path ?/nix/store/4zwxmjc7w39xqircw0b15q7cpa0sp2ww-ruby-v2_2_0-src? should have r:sha256 hash ?10yzkv2q7iq3vg6kqhzmgxwp7b5rvlafflk2smpa3l7r5vwdkj5r?, instead has ?1w7rr2nq1bbw6aiagddzlrr3rl95kk33x4pv6570nm072g55ybpi?<br/>
<font color="#A82F2F"><font size="2">(04:20:55 PM)</font> <b>ktosiek:</b></font> oh, hmm<br/>
<font color="#A82F2F"><font size="2">(04:21:08 PM)</font> <b>izietto:</b></font> so somehow it is pointing to another store folder O.O<br/>
<font color="#A82F2F"><font size="2">(04:21:10 PM)</font> <b>ktosiek:</b></font> how is that file downloaded? With fetchurl?<br/>
<font color="#A82F2F"><font size="2">(04:21:23 PM)</font> <b>izietto:</b></font> no, with fetchfromgithub<br/>
<font color="#A82F2F"><font size="2">(04:21:30 PM)</font> <b>izietto:</b></font> fetchFromGitHub<br/>
<font color="#A82F2F"><font size="2">(04:21:41 PM)</font> <b>izietto:</b></font> maybe that&apos;s the problem??<br/>
<font color="#A82F2F"><font size="2">(04:21:43 PM)</font> <b>ktosiek:</b></font> yup<br/>
<font color="#A82F2F"><font size="2">(04:22:11 PM)</font> <b>izietto:</b></font> omg<br/>
<font color="#A82F2F"><font size="2">(04:22:12 PM)</font> <b>ktosiek:</b></font> nix-prefetch-url is for fetchurl, and it seems fetchFromGitHub unpacks the tgz<br/>
<font color="#A82F2F"><font size="2">(04:22:20 PM)</font> <b>ktosiek:</b></font> let me just look at the code<br/>
<font color="#A82F2F"><font size="2">(04:22:48 PM)</font> <b>izietto:</b></font> ty, I look too<br/>
<font color="#A82F2F"><font size="2">(04:26:17 PM)</font> <b>ktosiek:</b></font> it&apos;s using fetchzip: https://github.com/NixOS/nixpkgs/blob/master/pkgs/build-support/fetchzip/default.nix<br/>
<font color="#A82F2F"><font size="2">(04:27:09 PM)</font> <b>ktosiek:</b></font> oh, and there&apos;s a pkgs/build-support/fetchzip/nix-prefetch-zip in nixpkgs too :-)<br/>
<font color="#A82F2F"><font size="2">(04:27:21 PM)</font> <b>izietto:</b></font> ohhhhhhhhhhh<br/>
<font color="#A82F2F"><font size="2">(04:27:37 PM)</font> <b>izietto:</b></font> wonderful!! thanks!!!<br/>
<font size="2">(04:31:10 PM)</font><b> goibhniu [<em>~goibhniu@pdpc/supporter/active/goibhniu</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(04:31:38 PM)</font> <b>izietto:</b></font> uhm... how can I install them? nix-env -i fetchzip doesn&apos;t work<br/>
<font color="#16569E"><font size="2">(04:32:07 PM)</font> <b>magnetophon:</b></font> goibhniu: I messed up the PR, as it is against master.  discussing that with henrytill in a private chat...<br/>
<font color="#A82F2F"><font size="2">(04:32:57 PM)</font> <b>ktosiek:</b></font> izietto: I think you&apos;d have to just run nix-prefetch-zip from a nixpkgs checkout<br/>
<font color="#A82F2F"><font size="2">(04:33:01 PM)</font> <b>goibhniu:</b></font> magnetophon: ok, lemme know if you need a hand<br/>
<font color="#A82F2F"><font size="2">(04:34:02 PM)</font> <b>ktosiek:</b></font> izietto: and &quot;fetchzip&quot; is what fetchFromGitHub uses internally, you don&apos;t have to explicitly install it<br/>
<font color="#A82F2F"><font size="2">(04:35:06 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] magnetophon opened pull request #5691: Faust: bugfix for 14.12 (release-14.12...faustbugfix) http://git.io/iS3dag<br/>
<font color="#16569E"><font size="2">(04:35:47 PM)</font> <b>magnetophon:</b></font> goibhniu: I need a hand :D    ^^<br/>
<font color="#A82F2F"><font size="2">(04:36:07 PM)</font> <b>izietto:</b></font> ktosiek, right! anyway... it works! yuppieeee<br/>
<font color="#A82F2F"><font size="2">(04:39:02 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] magnetophon closed pull request #5690: Faustbugfix (master...faustbugfix) http://git.io/qG-dAg<br/>
<font color="#16569E"><font size="2">(04:39:47 PM)</font> <b>magnetophon:</b></font> Sorry for the noise everybody. I have a lot to learn!<br/>
<font color="#A82F2F"><font size="2">(04:40:08 PM)</font> <b>mbuf:</b></font> anyone here use nixos-deploy-network?<br/>
<font size="2">(04:41:28 PM)</font><b> goibhniu1 [<em>~goibhniu@e181017077.adsl.alicedsl.de</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(04:41:38 PM)</font> <b>mbuf:</b></font> or deploy nixos to a large number of VMs?<br/>
<font color="#A82F2F"><font size="2">(04:42:11 PM)</font> <b>henrytill:</b></font> mbuf: i believe nixos-deploy-network has been superseded by nixops<br/>
<font size="2">(04:42:19 PM)</font><b> goibhniu left the room (quit: Ping timeout: 245 seconds).</b><br/>
<font color="#A82F2F"><font size="2">(04:43:13 PM)</font> <b>mbuf:</b></font> henrytill, so you can instantiate a new VM using it?<br/>
<font color="#A82F2F"><font size="2">(04:43:46 PM)</font> <b>henrytill:</b></font> mbuf: with nixops, yes<br/>
<font color="#A82F2F"><font size="2">(04:44:04 PM)</font> <b>mbuf:</b></font> henrytill, thanks!<br/>
<font color="#A82F2F"><font size="2">(04:44:08 PM)</font> <b>henrytill:</b></font> http://nixos.org/nixops/<br/>
<font size="2">(04:46:01 PM)</font><b> goibhniu1 left the room (quit: Ping timeout: 264 seconds).</b><br/>
<font color="#A82F2F"><font size="2">(04:49:51 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] benmos opened pull request #5693: Upgrading Riemann 0.26 -&gt; 0.27 (master...riemann-0.2.7) http://git.io/IPwKyg<br/>
<font size="2">(04:51:29 PM)</font><b> goibhniu [<em>~goibhniu@pdpc/supporter/active/goibhniu</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(04:52:46 PM)</font> <b>kmicu:</b></font> If any of you will experience some problems with zsh’s promptinit function not available in FPATH after that change https://github.com/NixOS/nixpkgs/commit/766207ca1d52db37df5ca17b9bd3bd21a03dfafd then ping me. At this moment I’m not sure if my setup is wrong or that change is wrong :)<br/>
<font size="2">(05:17:07 PM)</font><b> The account has disconnected and you are no longer in this chat. You will automatically rejoin the chat when the account reconnects.</b><br/>
</body></html>
