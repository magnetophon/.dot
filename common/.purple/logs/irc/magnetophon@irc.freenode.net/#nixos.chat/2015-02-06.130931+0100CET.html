<html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Conversation with #nixos at Fri 06 Feb 2015 01:09:31 PM CET on magnetophon@irc.freenode.net (irc)</title></head><body><h3>Conversation with #nixos at Fri 06 Feb 2015 01:09:31 PM CET on magnetophon@irc.freenode.net (irc)</h3>
<font size="2">(01:09:32 PM)</font><b> The topic for #nixos is: <a href="http://nixos.org/">http://nixos.org/</a> || Latest NixOS: <a href="http://nixos.org/nixos/download.html">http://nixos.org/nixos/download.html</a> || Latest Nix: <a href="http://nixos.org/nix/download.html">http://nixos.org/nix/download.html</a> || Logs: <a href="http://nixos.org/irc/logs/">http://nixos.org/irc/logs/</a> || Swag: <a href="http://www.cafepress.co.uk/NixOS">http://www.cafepress.co.uk/NixOS</a></b><br/>
<font size="2">(01:09:33 PM)</font><b> Topic for #nixos set by niksnut!~eelco@ec2-54-216-36-73.eu-west-1.compute.amazonaws.com at 12:56:59 PM on 04/11/2014</b><br/>
<font color="#A82F2F"><font size="2">(01:09:33 PM)</font> <b>iElectric:</b></font> aszlig: yeah and lucifer is already overloaded<br/>
<font color="#062585"><font size="2">(01:09:34 PM)</font> <b>***iElectric</b></font> would kill for munin.nixos.org<br/>
<font color="#A82F2F"><font size="2">(01:09:54 PM)</font> <b>aszlig:</b></font> yep<br/>
<font color="#A82F2F"><font size="2">(01:09:56 PM)</font> <b>aszlig:</b></font> i&apos;m going to replace the cp -rt with mv -t<br/>
<font color="#A82F2F"><font size="2">(01:09:58 PM)</font> <b>iElectric:</b></font> so maybe non-local build might help?<br/>
<font color="#A82F2F"><font size="2">(01:10:51 PM)</font> <b>aszlig:</b></font> that way it really shouldn&apos;t make any difference io-wise<br/>
<font color="#A82F2F"><font size="2">(01:12:09 PM)</font> <b>aszlig:</b></font> so if it has to send the sources to the build machine and later retrieving the splitted output paths again it&apos;s about the same io load as with the mv<br/>
<font color="#A82F2F"><font size="2">(01:12:58 PM)</font> <b>iElectric:</b></font> well source derivation does much more than that<br/>
<font color="#A82F2F"><font size="2">(01:12:59 PM)</font> <b>aszlig:</b></font> at least if it&apos;s not crossing file systems...<br/>
<font color="#A82F2F"><font size="2">(01:13:11 PM)</font> <b>aszlig:</b></font> yep, it also applies patches<br/>
<font size="2">(01:14:14 PM)</font><b> nckx|away is now known as nckx</b><br/>
<font color="#A82F2F"><font size="2">(01:14:17 PM)</font> <b>aszlig:</b></font> so it&apos;s just a *little* more io load =)<br/>
<font color="#A82F2F"><font size="2">(01:15:00 PM)</font> <b>iElectric:</b></font> well, worth a shot<br/>
<font color="#A82F2F"><font size="2">(01:15:46 PM)</font> <b>aszlig:</b></font> hmhm, i&apos;m not going to change to...<br/>
<font color="#A82F2F"><font size="2">(01:15:51 PM)</font> <b>aszlig:</b></font> ...mv<br/>
<font color="#A82F2F"><font size="2">(01:16:08 PM)</font> <b>aszlig:</b></font> i think it&apos;s better to patch it on-the-fly<br/>
<font color="#A82F2F"><font size="2">(01:16:22 PM)</font> <b>aszlig:</b></font> and directly unpack into the output store path<br/>
<font color="#A82F2F"><font size="2">(01:17:03 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] pSub pushed 2 new commits to master: http://git.io/brK6<br/>
<font color="#A82F2F"><font size="2">(01:17:03 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 681f373 Joachim Fasting: dnscrypt-proxy: bump to version 1.4.3<br/>
<font color="#A82F2F"><font size="2">(01:17:03 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master e938e70 Pascal Wittmann: Merge pull request #6197 from joachifm/update-dnscrypt-proxy...<br/>
<font color="#A82F2F"><font size="2">(01:17:18 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] pSub pushed 2 new commits to master: http://git.io/brKH<br/>
<font color="#A82F2F"><font size="2">(01:17:18 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 2d4fe59 Joachim Fasting: libsodium: bump to version 1.0.2<br/>
<font color="#A82F2F"><font size="2">(01:17:18 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 44e1a08 Pascal Wittmann: Merge pull request #6196 from joachifm/update-libsodium...<br/>
<font color="#A82F2F"><font size="2">(01:17:18 PM)</font> <b>aszlig:</b></font> that way we&apos;re absolutely sure we won&apos;t get the same overhead as before when crossing filesystems<br/>
<font color="#A82F2F"><font size="2">(01:17:23 PM)</font> <b>aszlig:</b></font> aprepos...<br/>
<font color="#A82F2F"><font size="2">(01:17:47 PM)</font> <b>aszlig:</b></font> upstream chromium user namespace support has finally hit the dev channel<br/>
<font color="#A82F2F"><font size="2">(01:18:29 PM)</font> <b>iElectric:</b></font> they are slowly catching up :D<br/>
<font color="#A82F2F"><font size="2">(01:18:41 PM)</font> <b>aszlig:</b></font> we still will need to patch for example the gid_map changes, but it&apos;s a start<br/>
<font color="#A82F2F"><font size="2">(01:19:06 PM)</font> <b>aszlig:</b></font> unfortunately the latest version isn&apos;t yet on omahaproxy<br/>
<font color="#A82F2F"><font size="2">(01:19:18 PM)</font> <b>iElectric:</b></font> auch<br/>
<font color="#A82F2F"><font size="2">(01:19:19 PM)</font> <b>iElectric:</b></font> btw<br/>
<font color="#A82F2F"><font size="2">(01:19:26 PM)</font> <b>aszlig:</b></font> so it doesn&apos;t have plugins<br/>
<font color="#A82F2F"><font size="2">(01:19:38 PM)</font> <b>iElectric:</b></font> anyone knows if there is a reason to keep 7 years old mozilla bulid: https://github.com/NixOS/nixpkgs/issues/6199<br/>
<font color="#062585"><font size="2">(01:19:54 PM)</font> <b>***iElectric</b></font> giggles<br/>
<font color="#A82F2F"><font size="2">(01:20:46 PM)</font> <b>aszlig:</b></font> iElectric: maybe nostalgic reasons? ;-)<br/>
<font color="#A82F2F"><font size="2">(01:21:04 PM)</font> <b>iElectric:</b></font> I&apos;d go for netscape then<br/>
<font color="#A82F2F"><font size="2">(01:21:21 PM)</font> <b>aszlig:</b></font> we should package mosaic<br/>
<font color="#A82F2F"><font size="2">(01:22:01 PM)</font> <b>Phlogistique:</b></font> Hi<br/>
<font color="#A82F2F"><font size="2">(01:22:10 PM)</font> <b>Phlogistique:</b></font> I installed firefox from Nix on a Debian system<br/>
<font color="#A82F2F"><font size="2">(01:22:21 PM)</font> <b>Phlogistique:</b></font> now, my fonts in Firefox are ugly (not antialiased)<br/>
<font color="#A82F2F"><font size="2">(01:22:27 PM)</font> <b>Phlogistique:</b></font> some of my fonts, at least<br/>
<font color="#A82F2F"><font size="2">(01:23:46 PM)</font> <b>Phlogistique:</b></font> It might be just bitmap versions of some fonts showing up for no good reason<br/>
<font color="#A82F2F"><font size="2">(01:25:10 PM)</font> <b>aszlig:</b></font> iElectric: there we go, a (gnu/)linux port: http://www.floodgap.com/retrotech/machten/mosaic/mosaic27ck10.tar.gz<br/>
<font color="#16569E"><font size="2">(01:25:12 PM)</font> <b>magnetophon:</b></font> I'm trying to test an updated pkg for jack2, but it keeps running the old one, even if I explicitly, manually start the new one. 'which' return sthe corect version, but when I run /path/to/new/version I get the old. Any ideas how to troubleshoot this?<br/>
<font color="#16569E"><font size="2">(01:25:50 PM)</font> <b>magnetophon:</b></font> aszlig: heh.  do you have one for IE6?<br/>
<font color="#A82F2F"><font size="2">(01:26:10 PM)</font> <b>aszlig:</b></font> magnetophon: ies4linux maybe? ;-)<br/>
<font color="#A82F2F"><font size="2">(01:26:33 PM)</font> <b>aszlig:</b></font> magnetophon: that sounds really odd, so does the old path still have a gcroot somewhere?<br/>
<font size="2">(01:26:44 PM)</font><b> musicmatze1 is now known as musicmatze</b><br/>
<font color="#16569E"><font size="2">(01:26:58 PM)</font> <b>magnetophon:</b></font> aszlig: what is a gcroot, how do I check?<br/>
<font color="#062585"><font size="2">(01:27:03 PM)</font> <b>***magnetophon</b></font> googles...<br/>
<font color="#A82F2F"><font size="2">(01:27:07 PM)</font> <b>Phlogistique:</b></font> Here is a picture of a web page with some fonts not antialiased, and some fonts with a horrible subpixel antialiasing http://noerubinste.in/font-problem.png<br/>
<font color="#A82F2F"><font size="2">(01:27:34 PM)</font> <b>iElectric:</b></font> cc ttuegel<br/>
<font color="#A82F2F"><font size="2">(01:27:47 PM)</font> <b>Phlogistique:</b></font> Is there a way for the Nix-installed Firefox to pick up the font config from the host system?<br/>
<font color="#A82F2F"><font size="2">(01:28:40 PM)</font> <b>aszlig:</b></font> magnetophon: nix-store --gc --print-roots<br/>
<font color="#A82F2F"><font size="2">(01:30:08 PM)</font> <b>aszlig:</b></font> magnetophon: you could also use --print-live in this case to see whether the old jack2 path is still available<br/>
<font color="#16569E"><font size="2">(01:30:15 PM)</font> <b>magnetophon:</b></font> aszlig: ah, a garbage collect root.  google was pointing me at scary MS stuff...  But yes, the old one is installed too.<br/>
<font color="#A82F2F"><font size="2">(01:30:46 PM)</font> <b>aszlig:</b></font> my *guess* would be that there is some state file which references absolute paths to the jack binary<br/>
<font color="#16569E"><font size="2">(01:31:27 PM)</font> <b>magnetophon:</b></font> aszlig: yeah, looks like it.  maybe I should just remove jack (the old one) from my system pkgs...<br/>
<font color="#A82F2F"><font size="2">(01:31:27 PM)</font> <b>aszlig:</b></font> so strace is your friend i guess<br/>
<font color="#A82F2F"><font size="2">(01:32:22 PM)</font> <b>aszlig:</b></font> magnetophon: it might make more sense to figure out what was happening to not stumble on it again in the future<br/>
<font color="#16569E"><font size="2">(01:33:00 PM)</font> <b>magnetophon:</b></font> aszlig: I've never been able to see strace as a friend. we've always met in unfortunate circumstances   :/<br/>
<font color="#16569E"><font size="2">(01:34:02 PM)</font> <b>magnetophon:</b></font> aszlig: yeah, i guess I should find out what's happening, but I don't know how, and I don't want to bother you guys unnecessarily...<br/>
<font color="#A82F2F"><font size="2">(01:34:10 PM)</font> <b>aszlig:</b></font> magnetophon: strace -f -o /path/to/logfile command # and then just search for the old store path in the logfile :-)<br/>
<font color="#16569E"><font size="2">(01:34:27 PM)</font> <b>magnetophon:</b></font> aszlig: OK, thanks<br/>
<font color="#A82F2F"><font size="2">(01:42:04 PM)</font> <b>votzlokk:</b></font> Hi folks! Is there a command to remove a package built with nix-build?<br/>
<font color="#A82F2F"><font size="2">(01:42:18 PM)</font> <b>bennofs:</b></font> votzlokk: just cr<br/>
<font color="#A82F2F"><font size="2">(01:42:24 PM)</font> <b>bennofs:</b></font> votzlokk: just rm the result symlink<br/>
<font color="#A82F2F"><font size="2">(01:42:36 PM)</font> <b>bennofs:</b></font> votzlokk: the next garbage collection will then delete the store path too<br/>
<font size="2">(01:43:03 PM)</font><b> pSub_ is now known as pSub</b><br/>
<font color="#A82F2F"><font size="2">(01:43:19 PM)</font> <b>kragniz:</b></font> Lethalman: go support is looking awesome!<br/>
<font color="#A82F2F"><font size="2">(01:43:24 PM)</font> <b>Lethalman:</b></font> kragniz, thanks<br/>
<font color="#A82F2F"><font size="2">(01:43:29 PM)</font> <b>votzlokk:</b></font> bennofs, is that a /nix/store/blahblahhash-name-of-devirvative that is need to RM?<br/>
<font color="#A82F2F"><font size="2">(01:43:32 PM)</font> <b>Lethalman:</b></font> most of work being done by ehmry :)<br/>
<font color="#A82F2F"><font size="2">(01:43:57 PM)</font> <b>Lethalman:</b></font> votzlokk, never delete /nix/store stuff by hand<br/>
<font color="#A82F2F"><font size="2">(01:44:09 PM)</font> <b>bennofs:</b></font> votzlokk: no, when you nix-build a package, the &quot;package&quot; is not really &quot;installed&quot;, the only thing that happens is that you get a &quot;result&quot; symbolic link in the current directory and a new store path is added<br/>
<font color="#A82F2F"><font size="2">(01:44:29 PM)</font> <b>Phlogistique:</b></font> well, I just launched nix-env -u and it&apos;s downloading a new libXft and cairo, so maybe that will make things better<br/>
<font color="#A82F2F"><font size="2">(01:45:28 PM)</font> <b>bennofs:</b></font> votzlokk: so to a remove a package, you just remove the &quot;result&quot; symlink. Then, when you run nix-collect-garbage, nix will find that the store path which was previously referenced by this result symlink has no references anymore and will delete it. Unreferenced store paths generally do no harm, other than taking up disk space (they should not interact with the system in any way)<br/>
<font color="#16569E"><font size="2">(01:45:35 PM)</font> <b>magnetophon:</b></font> aszlig: hmmm, I'm only getting references to the new version from strace. nothing points at the old. But htop stil says I started the old....  :(<br/>
<font color="#A82F2F"><font size="2">(01:46:20 PM)</font> <b>votzlokk:</b></font> bennofs, ah, i see. Thank you. But i still don&apos;t get how that symlink looks like<br/>
<font color="#A82F2F"><font size="2">(01:46:28 PM)</font> <b>votzlokk:</b></font> *what<br/>
<font color="#A82F2F"><font size="2">(01:47:34 PM)</font> <b>bennofs:</b></font> votzlokk: It will link to a nix store path, which looks like /nix/store/&lt;somehash&gt;-...  .<br/>
<font color="#A82F2F"><font size="2">(01:48:21 PM)</font> <b>bennofs:</b></font> votzlokk: For example, if you do nix-build -A coreutils &apos;&lt;nixpkgs&gt;&apos;, the result symlink that is created will have a &quot;bin&quot;, &quot;libexec&quot; and &quot;share&quot; subdirectory<br/>
<font color="#A82F2F"><font size="2">(01:48:54 PM)</font> <b>bennofs:</b></font> votzlokk: The path to which &quot;result&quot; points is something like /nix/store/h4ssyq8lac0ywmn8j0lsichvj9fvcfyd-coreutils-8.23 in this example<br/>
<font color="#A82F2F"><font size="2">(01:49:55 PM)</font> <b>votzlokk:</b></font> bennofs, thank you :)<br/>
<font color="#A82F2F"><font size="2">(01:50:11 PM)</font> <b>votzlokk:</b></font> df -h<br/>
<font color="#A82F2F"><font size="2">(01:50:16 PM)</font> <b>votzlokk:</b></font> oops.<br/>
<font color="#A82F2F"><font size="2">(01:51:31 PM)</font> <b>Phlogistique:</b></font> So, I have an up-to-date Firefox installed from nixpkgs-unstable on my Debian, and the fonts in it are ugly, whereas the fonts in the Debian-installed version are normal<br/>
<font color="#A82F2F"><font size="2">(01:51:42 PM)</font> <b>Phlogistique:</b></font> What can I look into to debug this problem?<br/>
<font color="#16569E"><font size="2">(01:54:04 PM)</font> <b>magnetophon:</b></font> hmmm, i removed jack2 from my system pkgs and I STILL get the old one....<br/>
<font color="#16569E"><font size="2">(01:55:52 PM)</font> <b>magnetophon:</b></font> fyi: jack2 is a dbus app. don't know if that has anything to do with it, but I figured it might.<br/>
<font color="#16569E"><font size="2">(01:58:55 PM)</font> <b>magnetophon:</b></font> is a reverse lookup of a store path possible?  IOW: how do I ask who points to /my/store/path/foo <br/>
<font color="#A82F2F"><font size="2">(02:00:54 PM)</font> <b>pSub:</b></font> magnetophon: IIRC nix-store -Q --referrers<br/>
<font color="#16569E"><font size="2">(02:01:06 PM)</font> <b>magnetophon:</b></font> pSub: thanks<br/>
<font color="#A82F2F"><font size="2">(02:07:13 PM)</font> <b>avn:</b></font> wmertens_: ty<br/>
<font color="#A82F2F"><font size="2">(02:07:49 PM)</font> <b>rushmorem:</b></font> kragniz, Lethalman I can&apos;t find any references to this go support you guys are talking about... Is it already merged into NixOS/nixpkgs?<br/>
<font color="#A82F2F"><font size="2">(02:07:50 PM)</font> <b>wmertens_:</b></font> avn: also, buildEnv is python-only<br/>
<font color="#A82F2F"><font size="2">(02:08:03 PM)</font> <b>kragniz:</b></font> rushmorem: not merged yet<br/>
<font color="#A82F2F"><font size="2">(02:08:14 PM)</font> <b>kragniz:</b></font> rushmorem: https://github.com/NixOS/nixpkgs/pull/6119<br/>
<font color="#A82F2F"><font size="2">(02:08:55 PM)</font> <b>rushmorem:</b></font> kragniz, awesome. Thanks!<br/>
<font color="#A82F2F"><font size="2">(02:09:44 PM)</font> <b>Phlogistique:</b></font> alright, I fixed part of the problem by doing cp {,/nix/store/v3plw9ini4p7c64x5vvv9hvklkcw1a1w-fontconfig-2.11.1}/etc/fonts/conf.d/70-no-bitmaps.conf<br/>
<font color="#A82F2F"><font size="2">(02:09:49 PM)</font> <b>wmertens_:</b></font> kragniz: wow that&apos;s a big PR<br/>
<font color="#A82F2F"><font size="2">(02:10:10 PM)</font> <b>Phlogistique:</b></font> I guess that&apos;s the wrong way to go, though. How do I configure that properly?<br/>
<font color="#A82F2F"><font size="2">(02:10:24 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] peti pushed 4 new commits to master: http://git.io/brNL<br/>
<font color="#A82F2F"><font size="2">(02:10:24 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master f145201 Peter Simons: git-annex: disable shared linking for this executable...<br/>
<font color="#A82F2F"><font size="2">(02:10:24 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 3f9bec6 Peter Simons: hackage-packages: re-generate from Hackage 2015-02-06T12:29:41+0100<br/>
<font color="#A82F2F"><font size="2">(02:10:24 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 88c8c76 Peter Simons: haskell-gtk3: fix build by adding the missing pkgs.gtk3 build input...<br/>
<font color="#A82F2F"><font size="2">(02:10:51 PM)</font> <b>ttuegel:</b></font> Phlogistique: what fontconfig version does debian use?<br/>
<font color="#A82F2F"><font size="2">(02:11:41 PM)</font> <b>Phlogistique:</b></font> ttuegel: 2.11.0 (Nix uses 2.11.1)<br/>
<font color="#A82F2F"><font size="2">(02:13:25 PM)</font> <b>ttuegel:</b></font> Phlogistique: good. part of the problem may be that nix doesn&apos;t use /etc/fonts for fontconfig-2.11. the person you actually need to talk to is vcunat, i just created the font configuration on nixos (but that won&apos;t affect you)<br/>
<font color="#A82F2F"><font size="2">(02:14:14 PM)</font> <b>avn:</b></font> wmertens_: I mean pkgs/build-support/buildenv/default.nix originally ;)<br/>
<font color="#A82F2F"><font size="2">(02:14:33 PM)</font> <b>Phlogistique:</b></font> ttuegel: Thanks a lot<br/>
<font color="#A82F2F"><font size="2">(02:15:21 PM)</font> <b>fmapE:</b></font> iElectric: Is it expected behavior for running nix-env -f &lt;path-to-checkout&gt; -iA nixpkgs.haskell-ng.packages.ghc784.gtk3 to try to install all dependencies down to and including the kernel in my user env?<br/>
<font color="#A82F2F"><font size="2">(02:15:57 PM)</font> <b>iElectric:</b></font> well if substituter can&apos;t get binaries, yet<br/>
<font color="#A82F2F"><font size="2">(02:16:41 PM)</font> <b>ttuegel:</b></font> Phlogistique: off the top of my head, one thing you could try is setting the env var FONTCONFIG_FILE to wherever debian keeps their fonts.conf... probably /etc/fonts/fonts.conf<br/>
<font size="2">(02:17:21 PM)</font><b> pyon is now known as geometric-pyon</b><br/>
<font color="#A82F2F"><font size="2">(02:17:37 PM)</font> <b>fmapE:</b></font> iElectric: So developing nixpkgs on top of NixOS could be a fearful process<br/>
<font color="#A82F2F"><font size="2">(02:17:41 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] wmertens pushed 3 new commits to master: http://git.io/brx5<br/>
<font color="#A82F2F"><font size="2">(02:17:41 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 540e3a6 Nikolay Amiantov: manual/release-notes: add unstable release notes with first entries<br/>
<font color="#A82F2F"><font size="2">(02:17:41 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 4b1a60b Nikolay Amiantov: remove old aliases of some packages<br/>
<font color="#A82F2F"><font size="2">(02:17:41 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 1d9d947 Wout Mertens: Merge pull request #6187 from abbradar/notes-unstable...<br/>
<font color="#A82F2F"><font size="2">(02:17:54 PM)</font> <b>iElectric:</b></font> fmapE: to many variables to answer that :)<br/>
<font color="#A82F2F"><font size="2">(02:18:03 PM)</font> <b>iElectric:</b></font> &quot;depends what you&apos;re doing&quot;<br/>
<font color="#A82F2F"><font size="2">(02:18:17 PM)</font> <b>iElectric:</b></font> if nixpkgs is in sync with your nixos, there shouldn&apos;t be any difference<br/>
<font color="#A82F2F"><font size="2">(02:18:41 PM)</font> <b>fmapE:</b></font> iElectric: I checked out nixpkgs master<br/>
<font color="#A82F2F"><font size="2">(02:19:20 PM)</font> <b>fmapE:</b></font> iElectric: &quot;in sync&quot; is hard for me to grok, given that this behavior doesn&apos;t happen with the nixpkgs unstable channel but does happen with the latest master branch<br/>
<font color="#A82F2F"><font size="2">(02:19:38 PM)</font> <b>fmapE:</b></font> iElectric: What do you mean &quot;in sync&quot;?<br/>
<font color="#062585"><font size="2">(02:20:17 PM)</font> <b>***fmapE</b></font> just got an email that somebody pushed the fix he was writing...but still wants to know how to contribute.<br/>
<font color="#A82F2F"><font size="2">(02:21:11 PM)</font> <b>avn:</b></font> Well, can I persist all my profiles in ~/.nixpkgs/* ? (I still misunderstand something...)<br/>
<font color="#16569E"><font size="2">(02:21:35 PM)</font> <b>magnetophon:</b></font> OK, so it turns out there are lots of user space apps pointing at jack_old_version, none of which look suspicious (I know what they do and they are not called as a consequence of starting jack), and a couple of /nix/store/hash-system-path.drv instances. So I suspect the later ones are at fault, but I'm not sure what my next move is...<br/>
<font color="#A82F2F"><font size="2">(02:22:04 PM)</font> <b>iElectric:</b></font> fmapE: are you using nixos 14.12?<br/>
<font color="#A82F2F"><font size="2">(02:24:10 PM)</font> <b>fmapE:</b></font> iElectric: yes<br/>
<font color="#A82F2F"><font size="2">(02:24:27 PM)</font> <b>iElectric:</b></font> then use nixpkgs release-14.12 branch<br/>
<font color="#A82F2F"><font size="2">(02:24:33 PM)</font> <b>iElectric:</b></font> to have the same binaries<br/>
<font color="#A82F2F"><font size="2">(02:24:51 PM)</font> <b>fmapE:</b></font> iElectric: And I can make pull-requests to that branch?<br/>
<font color="#A82F2F"><font size="2">(02:25:06 PM)</font> <b>iElectric:</b></font> for bugfixes and security updates<br/>
<font color="#A82F2F"><font size="2">(02:25:12 PM)</font> <b>fmapE:</b></font> OK<br/>
<font color="#A82F2F"><font size="2">(02:25:29 PM)</font> <b>iElectric:</b></font> fmapE: so if stdenv changes<br/>
<font color="#A82F2F"><font size="2">(02:25:31 PM)</font> <b>fmapE:</b></font> So how does the nixpkgs unstable channel avoid that behavior?<br/>
<font color="#A82F2F"><font size="2">(02:25:43 PM)</font> <b>fmapE:</b></font> (Because it&apos;s tracking master right?)<br/>
<font color="#A82F2F"><font size="2">(02:25:54 PM)</font> <b>iElectric:</b></font> fmapE: then you need different binaries up to bootstrap of gcc<br/>
<font color="#A82F2F"><font size="2">(02:26:31 PM)</font> <b>iElectric:</b></font> so master and release-14.12 have diverged in that regard<br/>
<font color="#A82F2F"><font size="2">(02:27:00 PM)</font> <b>fmapE:</b></font> ok that still doesn&apos;t answer my Q about nixpkgs unstable<br/>
<font color="#A82F2F"><font size="2">(02:27:03 PM)</font> <b>avn:</b></font> It is possible to describe my &quot;default&quot; envs in .nixpkgs/config.nix to be installed/updated via nix-env -i  (w/o other params, etc)?<br/>
<font color="#A82F2F"><font size="2">(02:27:24 PM)</font> <b>iElectric:</b></font> fmapE: what behavior?<br/>
<font color="#A82F2F"><font size="2">(02:27:46 PM)</font> <b>iElectric:</b></font> avn: yes, using overridePackages function and buildEnv<br/>
<font color="#A82F2F"><font size="2">(02:28:14 PM)</font> <b>fmapE:</b></font> iElectric: when I install packages to my user env from the nixpkgs unstable channel, it doesn&apos;t try to reinstall all deps back to the kernel<br/>
<font color="#A82F2F"><font size="2">(02:28:34 PM)</font> <b>fmapE:</b></font> But unstable channel tracks (slightly behind) master right?<br/>
<font color="#A82F2F"><font size="2">(02:28:50 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] peti pushed 1 new commit to master: http://git.io/bovr<br/>
<font color="#A82F2F"><font size="2">(02:28:50 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 964742c Peter Simons: haskell-postgrest: broken because of dependency on outdated optparse-applicative<br/>
<font color="#A82F2F"><font size="2">(02:29:26 PM)</font> <b>avn:</b></font> iElectric: I see example on wiki:  nix-env -iA clangEnv -f clangenv.nix -p /nix/var/nix/gcroots/profiles/per-user/clang<br/>
<font color="#A82F2F"><font size="2">(02:29:57 PM)</font> <b>avn:</b></font> it is possible to &quot;hardwire&quot; profiles names in config.nix?<br/>
<font color="#A82F2F"><font size="2">(02:30:33 PM)</font> <b>iElectric:</b></font> fmapE: again, if stdenv changes then you have to install new tree of dependencies up to a gcc<br/>
<font color="#A82F2F"><font size="2">(02:32:04 PM)</font> <b>fmapE:</b></font> iElectric: But it&apos;s not just up to gcc. It&apos;s up to and including the linux kernel<br/>
<font color="#A82F2F"><font size="2">(02:32:22 PM)</font> <b>iElectric:</b></font> avn: https://nixos.org/wiki/Howto_keep_multiple_packages_up_to_date_at_once#The_collection_way<br/>
<font color="#062585"><font size="2">(02:33:30 PM)</font> <b>***fmapE</b></font> is only partially un-befuddled<br/>
<font color="#A82F2F"><font size="2">(02:34:52 PM)</font> <b>iElectric:</b></font> fmapE: see what stdenv consists of http://nixos.org/nixpkgs/manual/#idm140737319373840<br/>
<font color="#A82F2F"><font size="2">(02:35:08 PM)</font> <b>avn:</b></font> iElectric: each answer produce new question ;)  When I should use buildEnv and when myEnvFun?<br/>
<font color="#A82F2F"><font size="2">(02:35:13 PM)</font> <b>iElectric:</b></font> if anything in stdenv changes, all packages are rebuilt<br/>
<font color="#A82F2F"><font size="2">(02:35:24 PM)</font> <b>iElectric:</b></font> avn: myEnvFun is not documented<br/>
<font color="#A82F2F"><font size="2">(02:35:35 PM)</font> <b>iElectric:</b></font> it uses buildEnv<br/>
<font color="#A82F2F"><font size="2">(02:35:43 PM)</font> <b>iElectric:</b></font> so it&apos;s higher level<br/>
<font color="#A82F2F"><font size="2">(02:35:51 PM)</font> <b>iElectric:</b></font> see source to understand it<br/>
<font color="#A82F2F"><font size="2">(02:36:05 PM)</font> <b>iElectric:</b></font> imo it should never be used in wiki until it has docs<br/>
<font color="#A82F2F"><font size="2">(02:36:57 PM)</font> <b>avn:</b></font> iElectric: Can you take look on this expression? I think -- I am overbloat it.  https://gist.github.com/avnik/d6cf56dd64bba4e2699f<br/>
<font color="#A82F2F"><font size="2">(02:37:09 PM)</font> <b>avn:</b></font> Now I try to convert it into &quot;environment&quot;<br/>
<font color="#A82F2F"><font size="2">(02:37:29 PM)</font> <b>fmapE:</b></font> iElectric: OK thanks<br/>
<font color="#A82F2F"><font size="2">(02:37:33 PM)</font> <b>avn:</b></font> As I guess -- custom gcc need some quircks<br/>
<font color="#A82F2F"><font size="2">(02:37:38 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] peti pushed 1 new commit to master: http://git.io/boTT<br/>
<font color="#A82F2F"><font size="2">(02:37:39 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master fca0ba8 Peter Simons: haskell-MoeDict: build succeeds now<br/>
<font color="#A82F2F"><font size="2">(02:39:00 PM)</font> <b>avn:</b></font> well, as I see now wrapGCC (or now wrapCC) is exported, so most of bloat can be omitted<br/>
<font color="#A82F2F"><font size="2">(02:39:28 PM)</font> <b>iElectric:</b></font> you&apos;re returning now wrapGCC<br/>
<font color="#A82F2F"><font size="2">(02:39:41 PM)</font> <b>iElectric:</b></font> instead use buildEnv that has wrapGCC installed<br/>
<font color="#A82F2F"><font size="2">(02:40:01 PM)</font> <b>iElectric:</b></font> it&apos;s copy/paste from the wiki<br/>
<font color="#A82F2F"><font size="2">(02:40:14 PM)</font> <b>iElectric:</b></font> and putting wrapGCC into `paths` arg of buildEnv<br/>
<font color="#A82F2F"><font size="2">(02:40:21 PM)</font> <b>avn:</b></font> It was my first effort, I try to make things proper now<br/>
<font color="#A82F2F"><font size="2">(02:50:15 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] lethalman pushed 2 new commits to master: http://git.io/boqx<br/>
<font color="#A82F2F"><font size="2">(02:50:15 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master b5baa2c Matthias Beyer: Add package: luakit...<br/>
<font color="#A82F2F"><font size="2">(02:50:16 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 4428076 lethalman: Merge pull request #5805 from matthiasbeyer/add-luakit...<br/>
<font color="#A82F2F"><font size="2">(02:51:08 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] lethalman pushed 1 new commit to master: http://git.io/boml<br/>
<font color="#A82F2F"><font size="2">(02:51:08 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master f53e18f Luca Bruno: Fix luakit description<br/>
<font color="#A82F2F"><font size="2">(02:52:39 PM)</font> <b>Lethalman:</b></font> iElectric, it&apos;s weird I can&apos;t reproduce the nixpkgs.tarball fail, has it been fixed perhaps?<br/>
<font color="#A82F2F"><font size="2">(02:53:37 PM)</font> <b>iElectric:</b></font> which fail?<br/>
<font color="#A82F2F"><font size="2">(02:54:17 PM)</font> <b>Lethalman:</b></font> iElectric, nixos tested fails, that&apos;s why release is stuck at 1 feb<br/>
<font color="#A82F2F"><font size="2">(02:54:26 PM)</font> <b>Lethalman:</b></font> thought you had a look at it, nvm<br/>
<font color="#A82F2F"><font size="2">(02:58:10 PM)</font> <b>iElectric:</b></font> Lethalman: pretty much only kernel was updated meanwhile<br/>
<font color="#A82F2F"><font size="2">(02:59:11 PM)</font> <b>iElectric:</b></font> see https://github.com/NixOS/nixpkgs/compare/96d6344...b26a6e8<br/>
<font color="#A82F2F"><font size="2">(02:59:24 PM)</font> <b>iElectric:</b></font> and http://hydra.nixos.org/job/nixos/trunk-combined/tested/all?page=2<br/>
<font color="#A82F2F"><font size="2">(03:01:01 PM)</font> <b>iElectric:</b></font> so it was probably https://github.com/NixOS/nixpkgs/commit/bbd6384f62d9570f2b4dab1a51f8a9bb44e2fb9a<br/>
<font color="#A82F2F"><font size="2">(03:02:26 PM)</font> <b>iElectric:</b></font> niksnut: 14.12 last updated 16 days ago even though tested job passed 4 days ago: http://hydra.nixos.org/job/nixos/release-14.12/tested#tabs-status<br/>
<font color="#A82F2F"><font size="2">(03:06:27 PM)</font> <b>goibhniu:</b></font> hi ewemoa: don&apos;t you use myEnvFun a lot?<br/>
<font color="#A82F2F"><font size="2">(03:09:15 PM)</font> <b>ewemoa:</b></font> goibhniu: yes i do<br/>
<font color="#A82F2F"><font size="2">(03:10:19 PM)</font> <b>goibhniu:</b></font> ewemoa: did you try using nix-shell by setting TMPDIR and using --out-link as a replacement?<br/>
<font color="#A82F2F"><font size="2">(03:11:14 PM)</font> <b>ewemoa:</b></font> goibhniu: tbh i don&apos;t remember :) ...but --out-link sounds quite unfamiliar<br/>
<font color="#A82F2F"><font size="2">(03:11:42 PM)</font> <b>goibhniu:</b></font> kk, I&apos;ll test it out over the weekend and see if that&apos;s a viable replacement<br/>
<font color="#A82F2F"><font size="2">(03:12:10 PM)</font> <b>ewemoa:</b></font> goibhniu: good luck!<br/>
<font color="#A82F2F"><font size="2">(03:13:02 PM)</font> <b>bennofs:</b></font> goibhniu: what does setting TMPDIR achieve when using nix-shell?<br/>
<font color="#A82F2F"><font size="2">(03:14:36 PM)</font> <b>goibhniu:</b></font> AFAIK the env-vars file will end up there, and you can source that to re-enter the environment without evaluating the nix expression<br/>
<font size="2">(03:27:14 PM)</font><b> c74d is now known as Guest40627</b><br/>
<font color="#A82F2F"><font size="2">(03:32:24 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] pSub pushed 2 new commits to master: http://git.io/boEN<br/>
<font color="#A82F2F"><font size="2">(03:32:25 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master e27ff48 Pascal Wittmann: linux-console-tools: update from 1.4.7 to 1.4.8<br/>
<font color="#A82F2F"><font size="2">(03:32:25 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 288ed0c Pascal Wittmann: xosd: update from 2.2.12 to 2.2.14 and added meta information<br/>
<font color="#16569E"><font size="2">(03:33:47 PM)</font> <b>magnetophon:</b></font> goibhniu: about the jack issue: I got a reply from one of the jack devs: &quot;check which lib is installed on /usr/local&quot;. of course it doesn't work like that in nixos, but I'm not sure how I &lt;should&gt; do that.<br/>
<font color="#16569E"><font size="2">(03:35:02 PM)</font> <b>magnetophon:</b></font> goibhniu: not sure if you saw, but I keep running the old ver, while trying to run the new ver, even with the old ver removed from system pkgs. strace only refers to the new version!?<br/>
<font color="#A82F2F"><font size="2">(03:35:21 PM)</font> <b>aszlig:</b></font> iElectric: geesh, now source unpacking takes around 10 times longer, but with less IO load X-/<br/>
<font color="#A82F2F"><font size="2">(03:36:23 PM)</font> <b>goibhniu:</b></font> magnetophon: probably because of dbus?<br/>
<font color="#062585"><font size="2">(03:36:31 PM)</font> <b>***goibhniu</b></font> didn&apos;t see the issue<br/>
<font color="#16569E"><font size="2">(03:36:56 PM)</font> <b>magnetophon:</b></font> goibhniu: yeah, I also suspect dbus, but I have no idea how to fix that.<br/>
<font color="#16569E"><font size="2">(03:37:20 PM)</font> <b>magnetophon:</b></font> goibhniu: did you ever update jackd? how did you test it?<br/>
<font color="#A82F2F"><font size="2">(03:37:32 PM)</font> <b>aszlig:</b></font> magnetophon: how on earth is it able to start up something which isn&apos;t there anymore? O_o<br/>
<font color="#16569E"><font size="2">(03:38:33 PM)</font> <b>magnetophon:</b></font> aszlig: idk. of course the old ver is still in the store, and various progs are pointing at it, so that's probably how...<br/>
<font color="#A82F2F"><font size="2">(03:38:51 PM)</font> <b>aszlig:</b></font> and you didn&apos;t find anything in the strace log?<br/>
<font color="#A82F2F"><font size="2">(03:39:04 PM)</font> <b>aszlig:</b></font> ah, wait a minute<br/>
<font color="#16569E"><font size="2">(03:39:04 PM)</font> <b>magnetophon:</b></font> aszlig: only refs to the new ver<br/>
<font color="#A82F2F"><font size="2">(03:39:12 PM)</font> <b>aszlig:</b></font> dbus is probably launching jackd<br/>
<font color="#16569E"><font size="2">(03:39:18 PM)</font> <b>magnetophon:</b></font> yes<br/>
<font color="#A82F2F"><font size="2">(03:39:19 PM)</font> <b>aszlig:</b></font> so it won&apos;t show up in strace<br/>
<font color="#062585"><font size="2">(03:39:48 PM)</font> <b>***magnetophon</b></font> is getting hopeful for a solution...<br/>
<font color="#16569E"><font size="2">(03:40:08 PM)</font> <b>magnetophon:</b></font> I know nothing of dbus.  :(<br/>
<font color="#A82F2F"><font size="2">(03:40:19 PM)</font> <b>goibhniu:</b></font> magnetophon: did you start it with `jackdbus auto`?<br/>
<font color="#A82F2F"><font size="2">(03:40:50 PM)</font> <b>goibhniu:</b></font> ... and that jackdbus is the one in ~/.nix-profile<br/>
<font color="#16569E"><font size="2">(03:40:51 PM)</font> <b>magnetophon:</b></font> goibhniu: i straced both that one, and 'jack_control start'.<br/>
<font color="#A82F2F"><font size="2">(03:41:00 PM)</font> <b>goibhniu:</b></font> kk<br/>
<font color="#16569E"><font size="2">(03:41:47 PM)</font> <b>magnetophon:</b></font> goibhniu: and they both referenced the new one in the strace log.  but as aszlig pointed out, the issue is probably dbus related.<br/>
<font color="#A82F2F"><font size="2">(03:42:18 PM)</font> <b>goibhniu:</b></font> did you restart dbus?<br/>
<font color="#16569E"><font size="2">(03:43:00 PM)</font> <b>magnetophon:</b></font> goibhniu: nope. how?<br/>
<font color="#A82F2F"><font size="2">(03:43:53 PM)</font> <b>aszlig:</b></font> ah, do you have any logfile in ~/.jackdbus?<br/>
<font color="#16569E"><font size="2">(03:43:58 PM)</font> <b>magnetophon:</b></font> I did do a couple of &quot;nix-store -q --referrers&quot; queries, and afaik dbus-conf points to the old ver (via system-path)<br/>
<font color="#A82F2F"><font size="2">(03:44:37 PM)</font> <b>goibhniu:</b></font> systemctl restart dbus<br/>
<font color="#A82F2F"><font size="2">(03:45:36 PM)</font> <b>aszlig:</b></font> magnetophon: try to search for something like org.jackaudio.service<br/>
<font color="#A82F2F"><font size="2">(03:45:56 PM)</font> <b>aszlig:</b></font> maybe in ~/.nix-profile or in /nix/var/nix/profiles/system/sw<br/>
<font color="#A82F2F"><font size="2">(03:46:08 PM)</font> <b>aszlig:</b></font> somewhere should be the old path<br/>
<font color="#A82F2F"><font size="2">(03:46:21 PM)</font> <b>edwtjo:</b></font> iElectric, Lethalman: another datapoint, i need to put doCheck false on both libsigsegv and coreutils to build HEAD, bus errors ensue otherwise<br/>
<font color="#16569E"><font size="2">(03:46:24 PM)</font> <b>magnetophon:</b></font> aszlig: i do not have .jackdbus<br/>
