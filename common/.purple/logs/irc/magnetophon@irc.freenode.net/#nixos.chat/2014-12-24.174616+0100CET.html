<html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Conversation with #nixos at Wed 24 Dec 2014 05:46:16 PM CET on magnetophon@irc.freenode.net (irc)</title></head><body><h3>Conversation with #nixos at Wed 24 Dec 2014 05:46:16 PM CET on magnetophon@irc.freenode.net (irc)</h3>
<font size="2">(05:46:17 PM)</font><b> The topic for #nixos is: <a href="http://nixos.org/">http://nixos.org/</a> || Latest NixOS: <a href="http://nixos.org/nixos/download.html">http://nixos.org/nixos/download.html</a> || Latest Nix: <a href="http://nixos.org/nix/download.html">http://nixos.org/nix/download.html</a> || Logs: <a href="http://nixos.org/irc/logs/">http://nixos.org/irc/logs/</a> || Swag: <a href="http://www.cafepress.co.uk/NixOS">http://www.cafepress.co.uk/NixOS</a></b><br/>
<font size="2">(05:46:17 PM)</font><b> Topic for #nixos set by niksnut!~eelco@ec2-54-216-36-73.eu-west-1.compute.amazonaws.com at 12:56:59 PM on 04/11/2014</b><br/>
<font color="#A82F2F"><font size="2">(05:46:17 PM)</font> <b>verne.freenode.net:</b></font> (notice) [freenode-info] channel trolls and no channel staff around to help? please check with freenode support: http://freenode.net/faq.shtml#gettinghelp<br/>
<font size="2">(05:58:49 PM)</font><b> MichaelRaskin left the room (quit: Quit: MichaelRaskin).</b><br/>
<font color="#A82F2F"><font size="2">(06:08:06 PM)</font> <b>pmahoney:</b></font> can a nix expression obtain the (impure) directory in which it lives?  (e.g. path = ./. copies the dir into the nix store and returns that path)<br/>
<font color="#A82F2F"><font size="2">(06:11:06 PM)</font> <b>pmahoney:</b></font> hm, perhaps nix-shell will be better for this<br/>
<font color="#A82F2F"><font size="2">(06:16:08 PM)</font> <b>pmahoney:</b></font> but i still need that path...   i&apos;m trying to create a command in the nix store that starts a ruby app after cd&apos;ing into (my development source tree) outside this nix store.  (for development purposes)<br/>
<font color="#A82F2F"><font size="2">(06:22:21 PM)</font> <b>stepkut:</b></font> so, rather than assume my server will never get hacked, I&apos;d like to instead assume it will get hacked, and have a good system for detecting that and restoring the server.. I feel like nixops could be a critical piece of this<br/>
<font size="2">(06:40:13 PM)</font><b> MichaelRaskin [<em>~MichaelRa@195.91.224.161</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(06:44:36 PM)</font> <b>stepkut:</b></font> the nix manual claims that, nix-env --switch-profile /nix/var/nix/profiles/new-profile, will create the profile if it doesn&apos;t exist.. but that does not seem to be happening for me. It creates the symlink but the directory is not created<br/>
<font size="2">(06:48:42 PM)</font><b> Lethalman [<em>~lethal@95.74.113.233</em>] entered the room.</b><br/>
<font size="2">(07:07:21 PM)</font><b> goibhniu [<em>~goibhniu@pdpc/supporter/active/goibhniu</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(07:17:35 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] peti pushed 1 new commit to master: http://git.io/S1cIOA<br/>
<font color="#A82F2F"><font size="2">(07:17:35 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 23010cf Karn Kallio: gnupg: Port socket activation patch to version 2.1.1.<br/>
<font size="2">(07:27:49 PM)</font><b> goibhniu left the room (quit: Ping timeout: 272 seconds).</b><br/>
<font color="#A82F2F"><font size="2">(07:31:18 PM)</font> <b>pmade:</b></font> I&apos;d like to fix a python package that comes with a script (googlecl).  Currently when you run `google&apos; it can&apos;t find the googlecl module that comes with the package.  It seems like the pypy wrapper isn&apos;t setting PYTHONPATH or something.  Any pointers so I can get this working?<br/>
<font color="#A82F2F"><font size="2">(07:48:47 PM)</font> <b>ambro718:</b></font> is it possible to use the nixos configuration system for configuring software outside of nixos modules?<br/>
<font color="#A82F2F"><font size="2">(07:50:03 PM)</font> <b>ambro718:</b></font> I&apos;m making some software which would be deployed via nix, but it should be usable as both a systemd service, and as a stand-alone executable built with nix.<br/>
<font color="#A82F2F"><font size="2">(07:51:16 PM)</font> <b>Lethalman:</b></font> ambro718, yes<br/>
<font color="#A82F2F"><font size="2">(07:51:20 PM)</font> <b>Lethalman:</b></font> ambro718, see nix-rehash<br/>
<font color="#A82F2F"><font size="2">(07:51:26 PM)</font> <b>Lethalman:</b></font> ambro718, you can use nixos services with supervisord<br/>
<font color="#A82F2F"><font size="2">(07:51:38 PM)</font> <b>Lethalman:</b></font> I use that for my own projects<br/>
<font color="#A82F2F"><font size="2">(07:51:50 PM)</font> <b>ambro718:</b></font> how about without supervisord?<br/>
<font color="#A82F2F"><font size="2">(07:51:58 PM)</font> <b>Lethalman:</b></font> ambro718, what would you use then?<br/>
<font color="#A82F2F"><font size="2">(07:52:40 PM)</font> <b>ambro718:</b></font> the user would write a nix file instantiating my application with the desired configuration, build it, and the result would be an executable<br/>
<font color="#A82F2F"><font size="2">(07:52:56 PM)</font> <b>ambro718:</b></font> nix-build .... -o ./application;  ./application<br/>
<font color="#A82F2F"><font size="2">(07:53:14 PM)</font> <b>Lethalman:</b></font> that&apos;s already so<br/>
<font color="#A82F2F"><font size="2">(07:53:18 PM)</font> <b>Lethalman:</b></font> what&apos;s your problem?<br/>
<font color="#A82F2F"><font size="2">(07:53:30 PM)</font> <b>ambro718:</b></font> I want to use the nixos configuration system (the option types and checking)<br/>
<font color="#A82F2F"><font size="2">(07:53:58 PM)</font> <b>Lethalman:</b></font> for?<br/>
<font color="#A82F2F"><font size="2">(07:54:14 PM)</font> <b>Lethalman:</b></font> you can use nixos modules of course<br/>
<font color="#A82F2F"><font size="2">(07:54:14 PM)</font> <b>ambro718:</b></font> so whatever configuration the user specifies, it would be checked by the nixos modules stuff<br/>
<font color="#A82F2F"><font size="2">(07:54:16 PM)</font> <b>Lethalman:</b></font> as said nix-rehash for example uses it<br/>
<font color="#A82F2F"><font size="2">(07:54:32 PM)</font> <b>Lethalman:</b></font> check it for an example usage<br/>
<font color="#A82F2F"><font size="2">(07:54:39 PM)</font> <b>ambro718:</b></font> okay thanks<br/>
<font color="#A82F2F"><font size="2">(08:11:39 PM)</font> <b>ambro718:</b></font> Hey, is there something like stdenv.lib.cleanSource but which would only take files that are under git control?<br/>
<font color="#A82F2F"><font size="2">(08:24:05 PM)</font> <b>aszlig:</b></font> ambro718: hm, fetchgit?<br/>
<font color="#A82F2F"><font size="2">(08:27:05 PM)</font> <b>ambro718:</b></font> maybe, not sure if it behaves like I want (do include modified tracked files and added files not yet committed)<br/>
<font color="#A82F2F"><font size="2">(08:27:13 PM)</font> <b>aszlig:</b></font> if this is not what you want you could also use something like runCommand &quot;blah&quot; {} &quot;${git}/bin/git -C sourcedir archive -o \&quot;$out\&quot;&quot;;<br/>
<font color="#A82F2F"><font size="2">(08:27:15 PM)</font> <b>ambro718:</b></font> as opposed to just taking HEAD<br/>
<font color="#A82F2F"><font size="2">(08:27:24 PM)</font> <b>aszlig:</b></font> ah<br/>
<font color="#A82F2F"><font size="2">(08:28:04 PM)</font> <b>aszlig:</b></font> well, you could also use ls-files for that...<br/>
<font color="#A82F2F"><font size="2">(08:28:11 PM)</font> <b>ambro718:</b></font> the intention is to use for testing during develpment, so I don&apos;t have to commit just to test<br/>
<font color="#A82F2F"><font size="2">(08:28:44 PM)</font> <b>aszlig:</b></font> and only create a store path that contains tracked files<br/>
<font color="#A82F2F"><font size="2">(08:29:18 PM)</font> <b>ambro718:</b></font> how would I use git ls-files with nix?<br/>
<font color="#A82F2F"><font size="2">(08:29:31 PM)</font> <b>aszlig:</b></font> git ls-files | xargs cp -t &quot;$out&quot; # ... or something like that (untested)<br/>
<font color="#A82F2F"><font size="2">(08:30:07 PM)</font> <b>aszlig:</b></font> runCommand &quot;blah&quot; {} &quot;${git}/bin/git -C sourcedir ls-files | xargs cp -t \&quot;$out\&quot;&quot;<br/>
<font color="#A82F2F"><font size="2">(08:30:40 PM)</font> <b>aszlig:</b></font> (forgot to add -R to cp)<br/>
<font color="#A82F2F"><font size="2">(08:30:58 PM)</font> <b>aszlig:</b></font> maybe also -d or even a<br/>
<font color="#A82F2F"><font size="2">(08:31:02 PM)</font> <b>aszlig:</b></font> anyway<br/>
<font color="#A82F2F"><font size="2">(08:31:05 PM)</font> <b>aszlig:</b></font> need to go<br/>
<font color="#A82F2F"><font size="2">(08:31:10 PM)</font> <b>aszlig:</b></font> c&apos;ya later<br/>
<font color="#A82F2F"><font size="2">(08:31:15 PM)</font> <b>ambro718:</b></font> can&apos;t I do something like this?   let files=(make nix execute git ls-files); in builtins.filterSource (path: path is in files); sourceDir<br/>
<font color="#A82F2F"><font size="2">(08:31:18 PM)</font> <b>ambro718:</b></font> see you<br/>
<font color="#A82F2F"><font size="2">(08:45:11 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] wyvie opened pull request #5461: Added openarena 0.8.8 (master...openarena) http://git.io/qLivww<br/>
