<html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Conversation with #nixos at Fri 06 Mar 2015 03:43:36 PM CET on magnetophon@irc.freenode.net (irc)</title></head><body><h3>Conversation with #nixos at Fri 06 Mar 2015 03:43:36 PM CET on magnetophon@irc.freenode.net (irc)</h3>
<font size="2">(03:43:36 PM)</font><b> The topic for #nixos is: <a href="http://nixos.org/">http://nixos.org/</a> || Latest NixOS: <a href="http://nixos.org/nixos/download.html">http://nixos.org/nixos/download.html</a> || Latest Nix: <a href="http://nixos.org/nix/download.html">http://nixos.org/nix/download.html</a> || Logs: <a href="http://nixos.org/irc/logs/">http://nixos.org/irc/logs/</a> || Swag: <a href="http://www.cafepress.co.uk/NixOS">http://www.cafepress.co.uk/NixOS</a></b><br/>
<font size="2">(03:43:36 PM)</font><b> Topic for #nixos set by niksnut!~eelco@ec2-54-216-36-73.eu-west-1.compute.amazonaws.com at 12:56:59 PM on 04/11/2014</b><br/>
<font size="2">(03:56:21 PM)</font><b> goibhniu1 [<em>~goibhniu@p5DCBE196.dip0.t-ipconnect.de</em>] entered the room.</b><br/>
<font size="2">(03:56:32 PM)</font><b> goibhniu left the room (quit: Ping timeout: 245 seconds).</b><br/>
<font color="#A82F2F"><font size="2">(03:58:22 PM)</font> <b>wjlroe:</b></font> Is there a way to concat lists, so that something like this&apos;ll work: environment.systemPackages = with pkgs; [ go ] ++ with pkgs.nodePackages; [ jshint ];  ?<br/>
<font color="#A82F2F"><font size="2">(04:00:12 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] edolstra pushed 3 new commits to master: http://git.io/xjgR<br/>
<font color="#A82F2F"><font size="2">(04:00:12 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 692ed08 Eelco Dolstra: Fix eval-release.nix evaluation<br/>
<font color="#A82F2F"><font size="2">(04:00:12 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master f110e67 Eelco Dolstra: chromedriver: Fix evaluation<br/>
<font color="#A82F2F"><font size="2">(04:00:12 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 3b9b620 Eelco Dolstra: Revert &quot;linux: disable UEVENT_HELPER*&quot;...<br/>
<font color="#A82F2F"><font size="2">(04:01:10 PM)</font> <b>Lethalman:</b></font> wjlroe, what&apos;s your problem?<br/>
<font color="#A82F2F"><font size="2">(04:01:22 PM)</font> <b>Lethalman:</b></font> that should work, don&apos;t get the problem<br/>
<font color="#A82F2F"><font size="2">(04:01:54 PM)</font> <b>wjlroe:</b></font> Lethalman: well it&apos;s a syntax error :/<br/>
<font color="#A82F2F"><font size="2">(04:02:04 PM)</font> <b>Lethalman:</b></font> then use parenthesis<br/>
<font color="#A82F2F"><font size="2">(04:02:13 PM)</font> <b>wjlroe:</b></font> Lethalman: basically I guess it can&apos;t work out the scope of the with statement<br/>
<font color="#A82F2F"><font size="2">(04:03:52 PM)</font> <b>wjlroe:</b></font> Lethalman: ah, seems to work. Cheers<br/>
<font color="#A82F2F"><font size="2">(04:05:39 PM)</font> <b>viric:</b></font> ambro718: all your arm changes are in master, iiuc<br/>
<font color="#A82F2F"><font size="2">(04:25:07 PM)</font> <b>ambro718:</b></font> viric: the old ones, yes<br/>
<font color="#A82F2F"><font size="2">(04:25:12 PM)</font> <b>ambro718:</b></font> have been for some time<br/>
<font color="#A82F2F"><font size="2">(04:26:20 PM)</font> <b>viric:</b></font> ?<br/>
<font color="#A82F2F"><font size="2">(04:26:32 PM)</font> <b>viric:</b></font> it was not a question<br/>
<font color="#A82F2F"><font size="2">(04:27:25 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] peti pushed 7 new commits to master: http://git.io/xj1Q<br/>
<font color="#A82F2F"><font size="2">(04:27:26 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 5f736a0 Peter Simons: hackage-packages.nix: re-generate from Hackage 2015-03-06T11:14:49+0100<br/>
<font color="#A82F2F"><font size="2">(04:27:26 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 43c4372 Peter Simons: haskell-jose test suite has been fixed.<br/>
<font color="#A82F2F"><font size="2">(04:27:26 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 956ccc7 Peter Simons: haskell-hlibBladeRF fails its test suite.<br/>
<font color="#A82F2F"><font size="2">(04:27:26 PM)</font> <b>viric:</b></font> I pushed the changes :)<br/>
<font color="#A82F2F"><font size="2">(04:28:24 PM)</font> <b>ambro718:</b></font> viric: I have no idea what you&apos;re talking about. The ones you merged to staging weeks ago?<br/>
<font color="#A82F2F"><font size="2">(04:28:47 PM)</font> <b>viric:</b></font> I pushed the spidermonkey thing to master<br/>
<font color="#A82F2F"><font size="2">(04:29:02 PM)</font> <b>viric:</b></font> +polkit dependency change<br/>
<font color="#A82F2F"><font size="2">(04:31:08 PM)</font> <b>ambro718:</b></font> viric: NixOS/nixpkgs master? I don&apos;t see them there.<br/>
<font color="#A82F2F"><font size="2">(04:31:16 PM)</font> <b>viric:</b></font> hm maybe I did a mess<br/>
<font color="#A82F2F"><font size="2">(04:31:36 PM)</font> <b>ambro718:</b></font> looking at https://github.com/NixOS/nixpkgs/blob/master/pkgs/development/interpreters/spidermonkey/17.0.nix<br/>
<font color="#A82F2F"><font size="2">(04:31:41 PM)</font> <b>viric:</b></font> ah mein fault<br/>
<font color="#A82F2F"><font size="2">(04:32:20 PM)</font> <b>ambro718:</b></font> ah ok :) I was really confused what you were talking about couse I didn&apos;t see anything...<br/>
<font color="#A82F2F"><font size="2">(04:32:35 PM)</font> <b>viric:</b></font> I was pushing to viric&apos;s.<br/>
<font color="#A82F2F"><font size="2">(04:32:46 PM)</font> <b>viric:</b></font> that may be very outdated.<br/>
<font color="#A82F2F"><font size="2">(04:33:56 PM)</font> <b>ambro718:</b></font> I think you just pushed to the wrong remote, but the right thing<br/>
<font size="2">(04:35:15 PM)</font><b> pmahoney [<em>~user@50.56.229.7</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(04:40:46 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nix] blueyed opened pull request #497: Fix typos: s/the the/the/ (master...fix-the-the) http://git.io/xjQb<br/>
<font size="2">(04:41:29 PM)</font><b> ambro718 left the room (quit: Ping timeout: 245 seconds).</b><br/>
<font size="2">(04:42:30 PM)</font><b> goibhniu1 is now known as goibhniu</b><br/>
<font color="#A82F2F"><font size="2">(04:43:45 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nix] edolstra pushed 1 new commit to master: http://git.io/xjdu<br/>
<font color="#A82F2F"><font size="2">(04:43:45 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nix/master e659978 Daniel Hahler: Fix typos: s/the the/the/<br/>
<font color="#A82F2F"><font size="2">(04:43:52 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nix] edolstra closed pull request #497: Fix typos: s/the the/the/ (master...fix-the-the) http://git.io/xjQb<br/>
<font color="#A82F2F"><font size="2">(04:45:11 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] viric pushed 12 new commits to master: http://git.io/xjFB<br/>
<font color="#A82F2F"><font size="2">(04:45:11 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 1c7fc46 Lluís Batlle i Rossell: Adding the raspberrypi2 platform.<br/>
<font color="#A82F2F"><font size="2">(04:45:11 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 56989d9 Lluís Batlle i Rossell: Updating the raspberry pi kernel sources to recent, for pi2<br/>
<font color="#A82F2F"><font size="2">(04:45:11 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 3e92c4e Lluís Batlle i Rossell: Trying to make DTBs if set in platform.<br/>
<font color="#A82F2F"><font size="2">(04:47:01 PM)</font> <b>viric:</b></font> ambro718: now?<br/>
<font color="#A82F2F"><font size="2">(04:48:58 PM)</font> <b>ambro718:</b></font> viric: yes, thanks.<br/>
<font color="#A82F2F"><font size="2">(04:49:14 PM)</font> <b>ambro718:</b></font> viric: have you tried to get anything working beyond this?<br/>
<font color="#A82F2F"><font size="2">(04:49:40 PM)</font> <b>viric:</b></font> meh I forgot the kernel I see<br/>
<font color="#A82F2F"><font size="2">(04:49:51 PM)</font> <b>ambro718:</b></font> the nixos build fails yes<br/>
<font color="#A82F2F"><font size="2">(04:50:00 PM)</font> <b>viric:</b></font> ah no, sorry.<br/>
<font color="#A82F2F"><font size="2">(04:50:10 PM)</font> <b>viric:</b></font> I&apos;ll see what fails next, trying to build nixos<br/>
<font color="#A82F2F"><font size="2">(04:50:39 PM)</font> <b>ambro718:</b></font> I get a &quot;file not found&quot; error in nixos derivation. Lost the exact error...<br/>
<font color="#A82F2F"><font size="2">(04:51:44 PM)</font> <b>viric:</b></font> we&apos;ll see.<br/>
<font color="#A82F2F"><font size="2">(04:51:53 PM)</font> <b>viric:</b></font> the kernel built fine here<br/>
<font size="2">(05:25:03 PM)</font><b> suvash is now known as suvash_away</b><br/>
<font color="#A82F2F"><font size="2">(05:29:05 PM)</font> <b>funfunctor:</b></font> hi<br/>
<font color="#A82F2F"><font size="2">(05:41:19 PM)</font> <b>giogadi:</b></font> Hi everyone! I&apos;m having problems with fetchFromGitHub. No matter what I can&apos;t get the sha256 checksums on the archives from github to match<br/>
<font color="#A82F2F"><font size="2">(05:42:04 PM)</font> <b>giogadi:</b></font> I manually download the archive and get the checksum that way, and use that checksum in the call to fetchFromGithub and nix complains about invalid checksums<br/>
<font color="#A82F2F"><font size="2">(05:42:45 PM)</font> <b>giogadi:</b></font> I went to check other uses of fetchFromGitHub in nixpkgs, and found I also could not reproduce the checksums in those derivations either<br/>
<font color="#A82F2F"><font size="2">(05:46:39 PM)</font> <b>rzetterberg:</b></font> giogadi: Hey, I had a similar problem with gitlab recently. Maybe looking at the discussion can give you some insight. https://github.com/NixOS/nixpkgs/issues/6326<br/>
<font color="#A82F2F"><font size="2">(05:47:56 PM)</font> <b>giogadi:</b></font> rzetterberg: thanks for the heads-up. There doesn&apos;t seem to be a clear answer in that issue though..<br/>
<font color="#A82F2F"><font size="2">(05:49:11 PM)</font> <b>rzetterberg:</b></font> giogadi: Well, recent changes solved it for me. Maybe try master branch and see whether that changes anything for you?<br/>
<font color="#A82F2F"><font size="2">(05:49:30 PM)</font> <b>giogadi:</b></font> rzetterberg: I&apos;m on master. I pulled just yesterday :-/<br/>
<font color="#A82F2F"><font size="2">(05:49:38 PM)</font> <b>giogadi:</b></font> I&apos;m on OSX though, if that complicates things<br/>
<font color="#A82F2F"><font size="2">(05:49:40 PM)</font> <b>rzetterberg:</b></font> giogadi: Just thought that maybe you got affected by the same problem.<br/>
<font color="#A82F2F"><font size="2">(05:50:11 PM)</font> <b>giogadi:</b></font> It&apos;s probably related<br/>
<font color="#A82F2F"><font size="2">(05:50:27 PM)</font> <b>rzetterberg:</b></font> giogadi: Ah, I&apos;m on NixOS myself. No experience with using Nix on OSX I&apos;m afraid :/<br/>
<font color="#A82F2F"><font size="2">(05:51:04 PM)</font> <b>giogadi:</b></font> I&apos;ll go ahead and open an issue then. Thanks for your help!<br/>
<font size="2">(05:51:05 PM)</font><b> silver_ is now known as silver</b><br/>
<font color="#A82F2F"><font size="2">(05:51:29 PM)</font> <b>rzetterberg:</b></font> giogadi: No problem! Good luck<br/>
<font size="2">(05:51:38 PM)</font><b> giogadi left the room (quit: Quit: Page closed).</b><br/>
<font size="2">(05:52:09 PM)</font><b> rzetterberg left the room (quit: Remote host closed the connection).</b><br/>
<font color="#A82F2F"><font size="2">(06:00:13 PM)</font> <b>shlevy:</b></font> niksnut: ping<br/>
<font size="2">(06:02:54 PM)</font><b> nkar_ is now known as nkar</b><br/>
<font color="#A82F2F"><font size="2">(06:11:18 PM)</font> <b>Ralith:</b></font> shlevy: merged your PR to my branch, thanks!<br/>
<font color="#A82F2F"><font size="2">(06:12:01 PM)</font> <b>shlevy:</b></font> Ralith: Cool, now working on getting clang++ working<br/>
<font color="#A82F2F"><font size="2">(06:21:43 PM)</font> <b>ambro718:</b></font> (just in case anyone knows this..) I have installed KDE via Nix on an old RHEL-style distro, it&apos;s mostly working OK, but the cursor settings in the native Gnome2 desktop do not affect any of the Nix-installed programs (KDE, Chromium).<br/>
<font color="#A82F2F"><font size="2">(06:22:13 PM)</font> <b>ambro718:</b></font> the setup is basically &quot;nix-env -i stuff&quot; with some setting of KDEDIRS, XDG_CONFIG_DIRS, XDG_DATA_DIRS<br/>
<font color="#A82F2F"><font size="2">(06:22:58 PM)</font> <b>favetelinguis:</b></font> Just installed nixos with the following graphics card. http://www.tweaktown.com/pressrelease/138/leadtek_launches_winfast_px9500_gt_512mb/index.html<br/>
<font color="#A82F2F"><font size="2">(06:23:07 PM)</font> <b>ambro718:</b></font> otoh, the KDE System Settings doesn&apos;t work for setting cursors, it doesn&apos;t find any cursor themes<br/>
<font color="#A82F2F"><font size="2">(06:23:14 PM)</font> <b>niksnut:</b></font> shlevy: pong<br/>
<font color="#A82F2F"><font size="2">(06:23:29 PM)</font> <b>seanz:</b></font> Can anyone tell me why I see a hipchat default.nix file available but am not able to install it through nix-env -i?<br/>
<font color="#A82F2F"><font size="2">(06:24:16 PM)</font> <b>shlevy:</b></font> niksnut: clang purity patches mean that the driver doesn&apos;t automatically add c++ headers to the search path. For libc++, this is fine because libc++ setup hook handles it. Is there a good solution for the libstdc++ case on Linux?<br/>
<font color="#A82F2F"><font size="2">(06:24:19 PM)</font> <b>niksnut:</b></font> seanz: probably you don&apos;t have &quot;allowUnfree = true;&quot; in ~/.nixpkgs/config.nix<br/>
<font color="#A82F2F"><font size="2">(06:24:23 PM)</font> <b>favetelinguis:</b></font> The font is almost unreadable, and looks like this http://imageshack.com/a/img910/3353/qHqwWp.jpg when i take the picture with my phone. However when i take a screendump it looks perfect, there is no problem with the image. What is up with that?<br/>
<font color="#A82F2F"><font size="2">(06:24:29 PM)</font> <b>seanz:</b></font> niksnut: Checking...<br/>
<font color="#A82F2F"><font size="2">(06:24:43 PM)</font> <b>shlevy:</b></font> niksnut: Adding it to the gcc setup hook seems like it will conflict with the libc++ setup hook, since gcc is always in buildInputs, right?<br/>
<font color="#A82F2F"><font size="2">(06:25:12 PM)</font> <b>seanz:</b></font> niksnut: Looks like you were right! Thanks.<br/>
<font color="#A82F2F"><font size="2">(06:25:24 PM)</font> <b>niksnut:</b></font> shlevy: you&apos;re talking about the libstdc++ headers?<br/>
<font color="#A82F2F"><font size="2">(06:26:22 PM)</font> <b>shlevy:</b></font> niksnut: Yep. clang can&apos;t find them currently (because of https://github.com/NixOS/nixpkgs/blob/d1e302121a1cbe4ead2573c8790a15ebec094af4/pkgs/development/compilers/llvm/3.5/clang.nix#L29 )<br/>
<font color="#A82F2F"><font size="2">(06:26:31 PM)</font> <b>niksnut:</b></font> why would there be a conflict?<br/>
<font color="#A82F2F"><font size="2">(06:26:52 PM)</font> <b>shlevy:</b></font> Because there&apos;s no &quot;libstdc++&quot; package the way there&apos;s a libc++ package<br/>
<font color="#A82F2F"><font size="2">(06:27:06 PM)</font> <b>shlevy:</b></font> libc++ gets added to buildInputs, we assume we want to use it so we use its headers<br/>
<font color="#A82F2F"><font size="2">(06:28:04 PM)</font> <b>shlevy:</b></font> Without knowing the ordering of buildInputs and how clang handles -isystem ordering, it&apos;s not obvious what will happen if the gcc setup hook sets isystem for its c++ headers *and* libc++ setup hook does it for its headers<br/>
<font color="#A82F2F"><font size="2">(06:29:51 PM)</font> <b>niksnut:</b></font> well, clang on linux should probably libstdc++ and not libc++<br/>
<font color="#A82F2F"><font size="2">(06:29:55 PM)</font> <b>niksnut:</b></font> +use<br/>
<font color="#A82F2F"><font size="2">(06:30:00 PM)</font> <b>shlevy:</b></font> Sure, by default<br/>
<font color="#A82F2F"><font size="2">(06:30:07 PM)</font> <b>shlevy:</b></font> But we want to be *able* to use libc++<br/>
<font color="#A82F2F"><font size="2">(06:32:23 PM)</font> <b>funfunctor:</b></font> hi<br/>
<font color="#A82F2F"><font size="2">(06:33:12 PM)</font> <b>seanz:</b></font> What is the recommended way to modify my hosts file?<br/>
<font color="#A82F2F"><font size="2">(06:33:39 PM)</font> <b>seanz:</b></font> Ah...networking.extraHosts<br/>
<font color="#A82F2F"><font size="2">(06:34:15 PM)</font> <b>erasmas:</b></font> seanz: also networking.extraConfig lets you pass in a string literal to be appended to /etc/hosts<br/>
<font color="#A82F2F"><font size="2">(06:34:46 PM)</font> <b>seanz:</b></font> erasmas: Thank you, person I have never met before. :)<br/>
<font color="#A82F2F"><font size="2">(06:35:23 PM)</font> <b>seanz:</b></font> Happiness - it worked!<br/>
<font color="#A82F2F"><font size="2">(06:36:38 PM)</font> <b>nslqqq:</b></font> how to override a module?<br/>
<font color="#A82F2F"><font size="2">(06:37:15 PM)</font> <b>niksnut:</b></font> shlevy: what changed? didn&apos;t libstc++ use to work with clang in nixpkgs?<br/>
<font color="#A82F2F"><font size="2">(06:37:34 PM)</font> <b>shlevy:</b></font> niksnut: Yeah, because we didn&apos;t have the purity patch right :D<br/>
<font color="#A82F2F"><font size="2">(06:37:52 PM)</font> <b>niksnut:</b></font> what is the purity patch?<br/>
<font color="#A82F2F"><font size="2">(06:37:55 PM)</font> <b>shlevy:</b></font> the problem is clang uses the same flag to gate &quot;use headers from /usr/include&quot; and &quot;use headers from gcc&quot;<br/>
<font color="#A82F2F"><font size="2">(06:38:05 PM)</font> <b>shlevy:</b></font> So I&apos;m working on a patch to work around that<br/>
<font color="#A82F2F"><font size="2">(06:38:41 PM)</font> <b>shlevy:</b></font> Aaaand it works.<br/>
<font color="#A82F2F"><font size="2">(06:39:30 PM)</font> <b>blueyed:</b></font> Is it expected that http://nixos.org/channels/nixpkgs-unstable/ is not being updated since a while?<br/>
<font color="#A82F2F"><font size="2">(06:40:03 PM)</font> <b>shlevy:</b></font> niksnut: So now I have a patch that works, except it means not respecting -nostdlibinc stuff<br/>
<font color="#A82F2F"><font size="2">(06:40:26 PM)</font> <b>Ralith:</b></font> shlevy: it seems like maybe some of this logic should live in the driver?<br/>
<font color="#A82F2F"><font size="2">(06:40:42 PM)</font> <b>shlevy:</b></font> Ralith: The problem is the driver is too clever<br/>
<font color="#A82F2F"><font size="2">(06:40:47 PM)</font> <b>Ralith:</b></font> er, sorry<br/>
<font color="#A82F2F"><font size="2">(06:40:50 PM)</font> <b>Ralith:</b></font> in the wrapper script*<br/>
<font color="#A82F2F"><font size="2">(06:41:05 PM)</font> <b>shlevy:</b></font> Right, that&apos;s the idea behind the setup hook<br/>
<font color="#A82F2F"><font size="2">(06:41:29 PM)</font> <b>shlevy:</b></font> when we add libc++ to buildInputs, the setup hook sets variables that the driver uses to say &quot;OK, let&apos;s point to libc++ stuff&quot;<br/>
<font color="#A82F2F"><font size="2">(06:41:55 PM)</font> <b>Ralith:</b></font> I have at least one project where a working -nostdlibinc is required (though perhaps I should just be using a compiler with no wrapper then)<br/>
<font color="#A82F2F"><font size="2">(06:41:58 PM)</font> <b>shlevy:</b></font> There&apos;s just not an obvious equivalent for libstdc++, since gcc is *always* in buildInputs so we need some way to say &quot;if both are there, prefer libc++&quot;<br/>
<font color="#A82F2F"><font size="2">(06:42:05 PM)</font> <b>shlevy:</b></font> Ralith: is it C or C++?<br/>
<font color="#A82F2F"><font size="2">(06:42:07 PM)</font> <b>Ralith:</b></font> C++<br/>
<font color="#A82F2F"><font size="2">(06:42:10 PM)</font> <b>shlevy:</b></font> OK<br/>
<font color="#A82F2F"><font size="2">(06:42:14 PM)</font> <b>shlevy:</b></font> We should be able to get this working<br/>
<font color="#A82F2F"><font size="2">(06:42:48 PM)</font> <b>Ralith:</b></font> does the stdlib really need to be chosen dynamically? would it make sense to just build the appropriate stdlib paths into clang?<br/>
<font color="#A82F2F"><font size="2">(06:43:29 PM)</font> <b>shlevy:</b></font> a) don&apos;t want to rebuild clang just to use a different one and b) libc++ requires clang so that means two-stage bootstrap<br/>
<font color="#A82F2F"><font size="2">(06:43:33 PM)</font> <b>seanz:</b></font> erasmas: Do you know why I&apos;m not able to enable the &quot;set date &amp; time automatically&quot; option?<br/>
<font color="#A82F2F"><font size="2">(06:43:47 PM)</font> <b>Ralith:</b></font> it&apos;d be kinda neat to be able to switch between libstdc++ and libc++ on the fly, but this is nix--you can easily have two clang installs<br/>
<font color="#A82F2F"><font size="2">(06:44:16 PM)</font> <b>Ralith:</b></font> wait, hold on<br/>
<font color="#A82F2F"><font size="2">(06:44:21 PM)</font> <b>Ralith:</b></font> how does the -stdlib clang option work?<br/>
<font color="#A82F2F"><font size="2">(06:44:33 PM)</font> <b>shlevy:</b></font> How do you mean?<br/>
<font color="#A82F2F"><font size="2">(06:44:34 PM)</font> <b>erasmas:</b></font> seanz: not sure. is it still an option in the version you&apos;re on? I think I set time.timeZone and that was it. someone else may know<br/>
<font color="#A82F2F"><font size="2">(06:45:01 PM)</font> <b>Ralith:</b></font> can it be used to distinguish between the two without breaking -nostdlibinc?<br/>
<font color="#A82F2F"><font size="2">(06:45:03 PM)</font> <b>seanz:</b></font> erasmas: Oh, so I should expect that certain Desktop Env options will no longer work?<br/>
<font color="#A82F2F"><font size="2">(06:45:23 PM)</font> <b>shlevy:</b></font> Ralith: The problem is that we unconditionally turn of stdlibinc processing in clang<br/>
<font color="#A82F2F"><font size="2">(06:45:28 PM)</font> <b>shlevy:</b></font> And instead process it in the wrapper<br/>
<font color="#A82F2F"><font size="2">(06:45:46 PM)</font> <b>shlevy:</b></font> Because clang hard-codes stuff like /usr/include<br/>
<font color="#A82F2F"><font size="2">(06:45:56 PM)</font> <b>Ralith:</b></font> ah<br/>
<font color="#A82F2F"><font size="2">(06:46:02 PM)</font> <b>shlevy:</b></font> So there&apos;s a NIX_CXXSTDLIB_COMPILE variable<br/>
<font color="#A82F2F"><font size="2">(06:46:32 PM)</font> <b>shlevy:</b></font> And the clang wrapper checks for -nostdlib, and if it&apos;s *not* there then it adds NIX_CXXSTDLIB_COMPILE to NIX_CFLAGS_COMPILE<br/>
<font color="#A82F2F"><font size="2">(06:46:43 PM)</font> <b>Ralith:</b></font> well, that seems like it should work fine<br/>
<font color="#A82F2F"><font size="2">(06:47:05 PM)</font> <b>shlevy:</b></font> Yeah, the problem is that it&apos;s not clear where to set this stuff for libstdc++<br/>
<font color="#A82F2F"><font size="2">(06:47:12 PM)</font> <b>shlevy:</b></font> It works perfectly for libc++<br/>
<font color="#A82F2F"><font size="2">(06:47:26 PM)</font> <b>erasmas:</b></font> seanz: sorry, I never had to try anything past time.timeZone<br/>
<font color="#A82F2F"><font size="2">(06:47:39 PM)</font> <b>seanz:</b></font> erasmas: Thanks.<br/>
<font color="#A82F2F"><font size="2">(06:47:40 PM)</font> <b>Ralith:</b></font> could you just default NIX_CXXSTDLIB_COMPILE in the wrapper suitable for libstdc++ if it&apos;s unset?<br/>
<font color="#A82F2F"><font size="2">(06:48:05 PM)</font> <b>shlevy:</b></font> That&apos;ll work, yeah<br/>
<font color="#A82F2F"><font size="2">(06:48:35 PM)</font> <b>ambro718:</b></font> Does anyone else have this problem with &quot;Favorites&quot; in the KDE menu getting messed up after an update, and launchers in the pannel disappearing?<br/>
<font color="#062585"><font size="2">(06:48:55 PM)</font> <b>***Ralith</b></font> feels like that&apos;s a reasonably appropriate allocation of responsibility<br/>
<font color="#A82F2F"><font size="2">(06:48:58 PM)</font> <b>shlevy:</b></font> Yeah<br/>
<font color="#A82F2F"><font size="2">(06:49:07 PM)</font> <b>shlevy:</b></font> it&apos;s a good call<br/>
<font color="#A82F2F"><font size="2">(06:49:13 PM)</font> <b>Ralith:</b></font> great<br/>
<font color="#A82F2F"><font size="2">(06:49:25 PM)</font> <b>Ralith:</b></font> thanks for working on this issue, I was a bit intimidated by it<br/>
<font color="#A82F2F"><font size="2">(06:49:32 PM)</font> <b>Ralith:</b></font> gotta head off for now<br/>
<font color="#A82F2F"><font size="2">(06:49:43 PM)</font> <b>shlevy:</b></font> No problem, thanks for getting it over the inital hurdle<br/>
<font color="#A82F2F"><font size="2">(06:50:54 PM)</font> <b>seanz:</b></font> Has anyone here run Dragondisk in NixOS?<br/>
<font size="2">(06:53:59 PM)</font><b> Ralith left the room (quit: Ping timeout: 245 seconds).</b><br/>
<font color="#A82F2F"><font size="2">(07:01:22 PM)</font> <b>shlevy:</b></font> OK rebuilding stdenv :D<br/>
<font size="2">(07:02:51 PM)</font><b> Lethalman left the room (quit: Remote host closed the connection).</b><br/>
<font color="#A82F2F"><font size="2">(07:07:59 PM)</font> <b>favetelinguis:</b></font> So on NixOs it is only the nixstore that is immutable right? Changes i make in other directories im not able to roll back? For example my configfiles like .vimrc are one and the same no mather what?<br/>
<font color="#A82F2F"><font size="2">(07:08:21 PM)</font> <b>joelteon:</b></font> yep unless those are symlinks<br/>
<font color="#A82F2F"><font size="2">(07:08:31 PM)</font> <b>joelteon:</b></font> into the nix store<br/>
<font color="#A82F2F"><font size="2">(07:10:54 PM)</font> <b>favetelinguis:</b></font> hmm but i can not create anything myselse in the store right? so i can not put a config file in there and then create a symlink?<br/>
<font color="#A82F2F"><font size="2">(07:11:18 PM)</font> <b>joelteon:</b></font> no<br/>
<font color="#A82F2F"><font size="2">(07:14:14 PM)</font> <b>favetelinguis:</b></font> Anyone feels like giving this question some input http://stackoverflow.com/questions/28904363/font-unreadable-on-screen-but-screen-dump-looks-perfect<br/>
<font color="#A82F2F"><font size="2">(07:14:33 PM)</font> <b>favetelinguis:</b></font> cant really use my system until i fix this :(<br/>
<font color="#A82F2F"><font size="2">(07:15:46 PM)</font> <b>kmicu:</b></font> Did you try changing DPI,autohinting,subpixel settings?<br/>
<font size="2">(07:16:34 PM)</font><b> favetelinguis left the room (quit: Remote host closed the connection).</b><br/>
<font color="#A82F2F"><font size="2">(07:37:42 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] dajero closed pull request #6657: Updated Arduino to 1.6.0 (master...arduino-1.6.0) http://git.io/xyiP<br/>
<font color="#A82F2F"><font size="2">(07:42:10 PM)</font> <b>LangeOortjes:</b></font> Time to rework that PR<br/>
<font color="#A82F2F"><font size="2">(07:49:16 PM)</font> <b>bendlas:</b></font> hi everybody<br/>
<font color="#A82F2F"><font size="2">(07:50:48 PM)</font> <b>bendlas:</b></font> I&apos;d like to disable the channel-provided nixpkgs and run a nixos system directly from a checkout<br/>
<font color="#A82F2F"><font size="2">(07:51:08 PM)</font> <b>bendlas:</b></font> How do I properly set the global NIX_PATH?<br/>
<font color="#A82F2F"><font size="2">(08:03:25 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] shlevy pushed 1 new commit to staging: http://git.io/pvDg<br/>
<font color="#A82F2F"><font size="2">(08:03:25 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/staging 6b53021 Shea Levy: Merge branch &apos;master&apos; into staging<br/>
<font color="#A82F2F"><font size="2">(08:05:52 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] shlevy opened pull request #6688: cc-wrapper: Set default system include flags for non-gcc c++ on Linux (staging...cc-wrapper-clang-libstdcxx) http://git.io/pvyy<br/>
<font color="#A82F2F"><font size="2">(08:30:24 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] vbgl pushed 1 new commit to master: http://git.io/pvxh<br/>
<font color="#A82F2F"><font size="2">(08:30:24 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 116ddda Vincent Laporte: Adds ocaml-enumerate...<br/>
<font color="#A82F2F"><font size="2">(08:30:58 PM)</font> <b>avn_:</b></font> found curious bug,  after `nixos-rebuild switch` Virtualbox was updated, and vagrant now unable to stop VMs properly<br/>
<font size="2">(08:41:05 PM)</font><b> goibhniu left the room (quit: Ping timeout: 245 seconds).</b><br/>
<font color="#A82F2F"><font size="2">(08:52:00 PM)</font> <b>iElectric:</b></font> avn_: never hit that one<br/>
<font color="#A82F2F"><font size="2">(08:57:04 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] wkennington pushed 2 new commits to master: http://git.io/pfOW<br/>
<font color="#A82F2F"><font size="2">(08:57:04 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master bc49764 William A. Kennington III: spl_git: 2015-02-27 -&gt; 2015-03-03<br/>
<font color="#A82F2F"><font size="2">(08:57:04 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master e49db70 William A. Kennington III: zfs_git: 2015-03-02 -&gt; 2015-03-05<br/>
<font color="#A82F2F"><font size="2">(08:59:59 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] wkennington pushed 1 new commit to master: http://git.io/pf3y<br/>
<font color="#A82F2F"><font size="2">(08:59:59 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master a00e19c William A. Kennington III: samba4: Remove explicit libiconv specification<br/>
<font size="2">(09:27:36 PM)</font><b> icetea is now known as Guest46650</b><br/>
<font size="2">(09:29:27 PM)</font><b> Guest46650 is now known as icecream</b><br/>
<font color="#A82F2F"><font size="2">(09:49:18 PM)</font> <b>jedahu:</b></font> any nvidia legacy users here?<br/>
<font color="#A82F2F"><font size="2">(09:50:14 PM)</font> <b>jedahu:</b></font> services.xserver.videoDrivers = [ &quot;nvidiaLegacy340&quot; ]<br/>
<font color="#A82F2F"><font size="2">(09:50:55 PM)</font> <b>jedahu:</b></font> but the package that is built is still nvidia-x11-346<br/>
<font color="#A82F2F"><font size="2">(09:51:07 PM)</font> <b>jedahu:</b></font> any ideas?<br/>
<font color="#A82F2F"><font size="2">(10:16:37 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] shlevy pushed 1 new commit to master: http://git.io/pfFL<br/>
<font color="#A82F2F"><font size="2">(10:16:37 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 3ed077a Shea Levy: lldb-3.5 is broken, bug in the cmake...<br/>
<font size="2">(10:46:47 PM)</font><b> boegel is now known as boegel|afk</b><br/>
<font size="2">(11:02:13 PM)</font><b> ikwildrpepper left the room (quit: Remote host closed the connection).</b><br/>
<font color="#A82F2F"><font size="2">(11:12:06 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] wkennington pushed 1 new commit to master: http://git.io/pJCl<br/>
<font color="#A82F2F"><font size="2">(11:12:06 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master c410664 William A. Kennington III: mongodb: 2.6.7 -&gt; 2.6.8<br/>
<font color="#A82F2F"><font size="2">(11:16:45 PM)</font> <b>teoma:</b></font> I made a patch to let eCryptfs optionally use setuid wrappers (https://gist.github.com/anonymous/9c5ff0ba23d788ac186f) -- could anyone check it for beginners&apos; mistakes?<br/>
<font color="#A82F2F"><font size="2">(11:24:29 PM)</font> <b>wkennington:</b></font> offlinehacker: there?<br/>
<font color="#A82F2F"><font size="2">(11:26:50 PM)</font> <b>wkennington:</b></font> offlinehacker: how do i generate a nodejs package? npm2nix seems to be failing me<br/>
<font size="2">(12:07:47 AM)</font><b> pmahoney left the room (quit: Ping timeout: 245 seconds).</b><br/>
<font color="#A82F2F"><font size="2">(12:09:46 AM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] kirelagin opened pull request #6690: keybase: update CLI to 0.7.7 (master...keybase) http://git.io/pJ1m<br/>
<font size="2">(12:10:24 AM)</font><b> wkennington left the room (quit: Remote host closed the connection).</b><br/>
<font size="2">(12:15:10 AM)</font><b> wkennington [<em>~william@76.77.180.204</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(12:21:49 AM)</font> <b>auntie:</b></font> what are the kernel requirements for nix on just any old Linux distro?<br/>
<font color="#A82F2F"><font size="2">(12:44:53 AM)</font> <b>offlinehacker:</b></font> wkennington: yes<br/>
<font color="#A82F2F"><font size="2">(12:45:06 AM)</font> <b>offlinehacker:</b></font> wkennington: did you update to lastest npm2nix<br/>
<font color="#A82F2F"><font size="2">(12:45:11 AM)</font> <b>wkennington:</b></font> npm2nix is returning basically nothing<br/>
<font color="#A82F2F"><font size="2">(12:45:13 AM)</font> <b>wkennington:</b></font> no....<br/>
<font color="#A82F2F"><font size="2">(12:45:18 AM)</font> <b>wkennington:</b></font> should i be using the git version?<br/>
<font color="#A82F2F"><font size="2">(12:45:23 AM)</font> <b>offlinehacker:</b></font> so do it, a lot of changes lately<br/>
<font color="#A82F2F"><font size="2">(12:45:29 AM)</font> <b>offlinehacker:</b></font> use the version from git master<br/>
<font color="#A82F2F"><font size="2">(12:45:29 AM)</font> <b>wkennington:</b></font> can we push that to nixpkgs then?<br/>
<font color="#A82F2F"><font size="2">(12:45:40 AM)</font> <b>offlinehacker:</b></font> yes it&apos;s in nixpkgs master<br/>
<font color="#A82F2F"><font size="2">(12:45:40 AM)</font> <b>wkennington:</b></font> ill try it<br/>
<font color="#A82F2F"><font size="2">(12:45:48 AM)</font> <b>wkennington:</b></font> oh well im running the thing in nixpkgs master<br/>
<font color="#A82F2F"><font size="2">(12:45:59 AM)</font> <b>offlinehacker:</b></font> hmm what&apos;s the input<br/>
<font color="#A82F2F"><font size="2">(12:46:21 AM)</font> <b>offlinehacker:</b></font> i didn&apos;t do any such change that it would change from previous behaviour<br/>
<font color="#A82F2F"><font size="2">(12:46:34 AM)</font> <b>wkennington:</b></font> it&apos;s possible this packages.json file isn&apos;t quite understood<br/>
<font color="#A82F2F"><font size="2">(12:46:34 AM)</font> <b>offlinehacker:</b></font> it should crash in worst case with trace<br/>
<font color="#A82F2F"><font size="2">(12:46:34 AM)</font> <b>wkennington:</b></font> sec<br/>
<font color="#A82F2F"><font size="2">(12:46:40 AM)</font> <b>wkennington:</b></font> it doesn&apos;t crash<br/>
<font color="#A82F2F"><font size="2">(12:46:54 AM)</font> <b>wkennington:</b></font> is there only pkgs.nodePackages.npm2nix?<br/>
<font color="#A82F2F"><font size="2">(12:46:59 AM)</font> <b>offlinehacker:</b></font> yes<br/>
<font color="#A82F2F"><font size="2">(12:47:03 AM)</font> <b>wkennington:</b></font> nodejs-npm2nix-5.11.0<br/>
<font color="#A82F2F"><font size="2">(12:47:04 AM)</font> <b>wkennington:</b></font> alright<br/>
<font color="#A82F2F"><font size="2">(12:47:39 AM)</font> <b>offlinehacker:</b></font> yes<br/>
<font color="#A82F2F"><font size="2">(12:47:46 AM)</font> <b>wkennington:</b></font> http://sprunge.us/MGDT<br/>
<font color="#A82F2F"><font size="2">(12:48:10 AM)</font> <b>offlinehacker:</b></font> and you get no output<br/>
<font color="#A82F2F"><font size="2">(12:48:14 AM)</font> <b>offlinehacker:</b></font> ok let me try<br/>
<font color="#A82F2F"><font size="2">(12:48:18 AM)</font> <b>offlinehacker:</b></font> which package did you add<br/>
<font color="#A82F2F"><font size="2">(12:48:18 AM)</font> <b>wkennington:</b></font> http://sprunge.us/ffGY<br/>
<font color="#A82F2F"><font size="2">(12:48:22 AM)</font> <b>wkennington:</b></font> it&apos;s for nodebb 0.6.1<br/>
<font color="#A82F2F"><font size="2">(12:48:50 AM)</font> <b>offlinehacker:</b></font> so you added nodebb to node-packages.json<br/>
<font color="#A82F2F"><font size="2">(12:49:03 AM)</font> <b>wkennington:</b></font> no i didn&apos;t, i just passed in the packages.json file<br/>
<font color="#A82F2F"><font size="2">(12:49:12 AM)</font> <b>wkennington:</b></font> what&apos;s the proper development strategy in nixpkgs<br/>
<font color="#A82F2F"><font size="2">(12:49:18 AM)</font> <b>wkennington:</b></font> add to node-packages.json<br/>
<font color="#A82F2F"><font size="2">(12:49:33 AM)</font> <b>wkennington:</b></font> then merge the result into node-packages-generate.json<br/>
<font color="#A82F2F"><font size="2">(12:49:40 AM)</font> <b>wkennington:</b></font> or whatever the extension is<br/>
<font color="#A82F2F"><font size="2">(12:49:40 AM)</font> <b>offlinehacker:</b></font> noup<br/>
<font color="#A82F2F"><font size="2">(12:49:41 AM)</font> <b>wkennington:</b></font> .nix<br/>
<font color="#A82F2F"><font size="2">(12:49:46 AM)</font> <b>offlinehacker:</b></font> ah<br/>
<font color="#A82F2F"><font size="2">(12:49:52 AM)</font> <b>offlinehacker:</b></font> you just want to package one package<br/>
<font color="#A82F2F"><font size="2">(12:49:59 AM)</font> <b>offlinehacker:</b></font> or for your project?<br/>
<font color="#A82F2F"><font size="2">(12:50:08 AM)</font> <b>wkennington:</b></font> i just want to package nodebb in nixpkgs<br/>
<font color="#A82F2F"><font size="2">(12:50:10 AM)</font> <b>wkennington:</b></font> basically<br/>
<font color="#A82F2F"><font size="2">(12:50:22 AM)</font> <b>offlinehacker:</b></font> add it to node-packages.json<br/>
<font color="#A82F2F"><font size="2">(12:50:32 AM)</font> <b>offlinehacker:</b></font> and run generator there<br/>
<font color="#A82F2F"><font size="2">(12:50:49 AM)</font> <b>wkennington:</b></font> alright<br/>
<font color="#A82F2F"><font size="2">(12:51:06 AM)</font> <b>wkennington:</b></font> what generator?<br/>
<font color="#A82F2F"><font size="2">(12:51:13 AM)</font> <b>offlinehacker:</b></font> npm2nix<br/>
<font color="#A82F2F"><font size="2">(12:51:18 AM)</font> <b>offlinehacker:</b></font> it&apos; a generator :)<br/>
<font color="#A82F2F"><font size="2">(12:51:30 AM)</font> <b>wkennington:</b></font> alright<br/>
<font color="#A82F2F"><font size="2">(12:51:53 AM)</font> <b>wkennington:</b></font> i suppose i should probably update then add<br/>
<font color="#A82F2F"><font size="2">(12:52:29 AM)</font> <b>offlinehacker:</b></font> amm add line to node-packages.json and then run npm2nix node-packages.json node-packages-generated.nix<br/>
<font color="#A82F2F"><font size="2">(12:52:32 AM)</font> <b>wkennington:</b></font> yeah<br/>
<font color="#A82F2F"><font size="2">(12:52:34 AM)</font> <b>wkennington:</b></font> that&apos;s what i did<br/>
<font color="#A82F2F"><font size="2">(12:52:42 AM)</font> <b>offlinehacker:</b></font> and blank file?<br/>
<font color="#A82F2F"><font size="2">(12:52:51 AM)</font> <b>wkennington:</b></font> yep<br/>
<font color="#A82F2F"><font size="2">(12:53:00 AM)</font> <b>offlinehacker:</b></font> ok let me try to reproduce<br/>
<font color="#A82F2F"><font size="2">(12:53:09 AM)</font> <b>wkennington:</b></font> btw i added nothing<br/>
<font color="#A82F2F"><font size="2">(12:53:14 AM)</font> <b>wkennington:</b></font> i just ran it on what was there<br/>
<font color="#A82F2F"><font size="2">(12:53:33 AM)</font> <b>offlinehacker:</b></font> k, will try this way<br/>
<font color="#A82F2F"><font size="2">(12:56:29 AM)</font> <b>wkennington:</b></font> reproducible?<br/>
<font color="#A82F2F"><font size="2">(12:57:32 AM)</font> <b>offlinehacker:</b></font> wkennington: just a sec<br/>
<font color="#A82F2F"><font size="2">(12:57:47 AM)</font> <b>offlinehacker:</b></font> not the fastest net here<br/>
<font color="#A82F2F"><font size="2">(12:58:11 AM)</font> <b>wkennington:</b></font> ah, alright<br/>
<font color="#A82F2F"><font size="2">(01:01:06 AM)</font> <b>ewemoa:</b></font> npm2nix has been giving me problems too fwiw<br/>
<font color="#A82F2F"><font size="2">(01:01:23 AM)</font> <b>ewemoa:</b></font> i was pointed at __Sander__&apos;s reengineering version<br/>
<font color="#A82F2F"><font size="2">(01:01:28 AM)</font> <b>ewemoa:</b></font> as an alternative<br/>
<font color="#A82F2F"><font size="2">(01:01:34 AM)</font> <b>offlinehacker:</b></font> wkennington: it works for me<br/>
<font color="#A82F2F"><font size="2">(01:01:47 AM)</font> <b>offlinehacker:</b></font> ewemoa: reengeneering branch is not supported<br/>
<font color="#A82F2F"><font size="2">(01:01:58 AM)</font> <b>ewemoa:</b></font> offlinehacker: thanks<br/>
<font color="#A82F2F"><font size="2">(01:02:18 AM)</font> <b>offlinehacker:</b></font> wkennington: what i did nix-build -A npm2nix -o npm2nix<br/>
<font color="#A82F2F"><font size="2">(01:02:20 AM)</font> <b>ewemoa:</b></font> i got errors for fs-xattr iirc<br/>
<font color="#A82F2F"><font size="2">(01:02:37 AM)</font> <b>offlinehacker:</b></font> ewemoa: i think that should be fixed by now<br/>
<font color="#A82F2F"><font size="2">(01:02:46 AM)</font> <b>offlinehacker:</b></font> did you try the latest master<br/>
<font color="#A82F2F"><font size="2">(01:03:00 AM)</font> <b>offlinehacker:</b></font> wkennington: npm2nix pkgs/top-level/node-packages.json pkgs/top-level/node-packages-generated.nix<br/>
<font color="#A82F2F"><font size="2">(01:03:21 AM)</font> <b>offlinehacker:</b></font> ahh wait<br/>
<font color="#A82F2F"><font size="2">(01:03:31 AM)</font> <b>offlinehacker:</b></font> it might be my problem, just a sec<br/>
<font color="#A82F2F"><font size="2">(01:03:35 AM)</font> <b>ewemoa:</b></font> offlinehacker: thanks<br/>
<font color="#A82F2F"><font size="2">(01:05:19 AM)</font> <b>offlinehacker:</b></font> wkennington: ah i can reproduce<br/>
<font color="#A82F2F"><font size="2">(01:05:40 AM)</font> <b>offlinehacker:</b></font> but it used to work<br/>
<font color="#A82F2F"><font size="2">(01:06:51 AM)</font> <b>offlinehacker:</b></font> wkennington: can you retry from version from git and do npm install this works for me<br/>
<font color="#A82F2F"><font size="2">(01:07:09 AM)</font> <b>offlinehacker:</b></font> i will try to investigate why it does not work from nixpkgs<br/>
<font color="#A82F2F"><font size="2">(01:07:48 AM)</font> <b>offlinehacker:</b></font> npm is giving me headaches lately<br/>
<font color="#A82F2F"><font size="2">(01:08:24 AM)</font> <b>offlinehacker:</b></font> they have screwed it up more than ruby did<br/>
<font color="#A82F2F"><font size="2">(01:10:00 AM)</font> <b>offlinehacker:</b></font> ewemoa: npm support is still kinda experimental, but most of the packages from current master should work<br/>
<font color="#A82F2F"><font size="2">(01:10:48 AM)</font> <b>wkennington:</b></font> where does npm install put the binary<br/>
<font color="#A82F2F"><font size="2">(01:10:59 AM)</font> <b>offlinehacker:</b></font> if you find problems it&apos;s due to too recent node and old/non-maintained dependencies or problems related to darwin and node-gyp<br/>
<font color="#A82F2F"><font size="2">(01:11:13 AM)</font> <b>offlinehacker:</b></font> wkennington: amm run node lib/command.js<br/>
<font color="#A82F2F"><font size="2">(01:11:43 AM)</font> <b>offlinehacker:</b></font> amm make sure to run grunt coffee before, to compile from coffescript<br/>
<font color="#A82F2F"><font size="2">(01:11:50 AM)</font> <b>wkennington:</b></font> trying nw<br/>
<font color="#A82F2F"><font size="2">(01:11:51 AM)</font> <b>wkennington:</b></font> now*<br/>
<font color="#A82F2F"><font size="2">(01:12:13 AM)</font> <b>wkennington:</b></font> deleted everything again<br/>
<font color="#A82F2F"><font size="2">(01:12:34 AM)</font> <b>wkennington:</b></font> node npm2nix/lib/command.js pkgs/top-level/node-packages.json pkgs/top-level/node-packages-generated.nix<br/>
<font color="#A82F2F"><font size="2">(01:12:41 AM)</font> <b>offlinehacker:</b></font> so it does not work<br/>
<font color="#A82F2F"><font size="2">(01:12:45 AM)</font> <b>wkennington:</b></font> nope<br/>
<font color="#A82F2F"><font size="2">(01:12:53 AM)</font> <b>offlinehacker:</b></font> ok then it must be due dependencies<br/>
<font color="#A82F2F"><font size="2">(01:13:04 AM)</font> <b>offlinehacker:</b></font> i should check which dependency is causing problems<br/>
<font size="2">(01:18:39 AM)</font><b> roconnor [<em>~roconnor@e120-pool-d89a6e95.brdbnd.voicenetwork.ca</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(01:20:32 AM)</font> <b>offlinehacker:</b></font> wkennington: can you send me npm list<br/>
<font color="#A82F2F"><font size="2">(01:20:43 AM)</font> <b>offlinehacker:</b></font> so i can see which versions of dependencies do you have<br/>
<font color="#A82F2F"><font size="2">(01:22:40 AM)</font> <b>wkennington:</b></font> http://sprunge.us/VZXY<br/>
<font color="#A82F2F"><font size="2">(01:26:51 AM)</font> <b>offlinehacker:</b></font> wkennington: we have just a slightly different versions of isstream, this should not be a problem<br/>
<font color="#A82F2F"><font size="2">(01:27:07 AM)</font> <b>offlinehacker:</b></font> hmm it&apos;s wierd, do you have any other error in generation process<br/>
<font color="#A82F2F"><font size="2">(01:28:34 AM)</font> <b>offlinehacker:</b></font> wkennington: do you have git installed<br/>
<font color="#A82F2F"><font size="2">(01:28:40 AM)</font> <b>wkennington:</b></font> yes<br/>
<font color="#A82F2F"><font size="2">(01:28:43 AM)</font> <b>offlinehacker:</b></font> ah you have<br/>
<font color="#A82F2F"><font size="2">(01:29:52 AM)</font> <b>offlinehacker:</b></font> wkennington: it&apos;s wierd, i have no idea, npm2nix should add better logging on these cases<br/>
<font color="#A82F2F"><font size="2">(01:30:09 AM)</font> <b>offlinehacker:</b></font> if you help me identify a problem, it would be really helpfull,<br/>
<font color="#A82F2F"><font size="2">(01:30:37 AM)</font> <b>offlinehacker:</b></font> wkennington: which version of node do you have?<br/>
<font color="#A82F2F"><font size="2">(01:30:50 AM)</font> <b>offlinehacker:</b></font> i might have older version<br/>
<font color="#A82F2F"><font size="2">(01:31:47 AM)</font> <b>offlinehacker:</b></font> i have 0.10.33<br/>
<font color="#A82F2F"><font size="2">(01:32:17 AM)</font> <b>offlinehacker:</b></font> if you have newer version this is probably a problem<br/>
<font size="2">(01:34:27 AM)</font><b> roconnor left the room (quit: Ping timeout: 256 seconds).</b><br/>
<font color="#A82F2F"><font size="2">(01:34:53 AM)</font> <b>offlinehacker:</b></font> wkennington: yup, it&apos;s due to node version, there must be some problem, i will try to update dependencies<br/>
<font color="#A82F2F"><font size="2">(01:35:04 AM)</font> <b>wkennington:</b></font> yeah, on 0.12.0<br/>
<font color="#A82F2F"><font size="2">(01:35:09 AM)</font> <b>wkennington:</b></font> since im using master<br/>
<font color="#A82F2F"><font size="2">(01:35:14 AM)</font> <b>offlinehacker:</b></font> yes, i also can reproduce problem on 0.12<br/>
<font color="#A82F2F"><font size="2">(01:35:18 AM)</font> <b>wkennington:</b></font> :/<br/>
<font color="#A82F2F"><font size="2">(01:35:28 AM)</font> <b>offlinehacker:</b></font> i have older node, because it causes less problems<br/>
<font color="#A82F2F"><font size="2">(01:35:48 AM)</font> <b>offlinehacker:</b></font> they have really changed a lot of stuff in 0.12<br/>
<font color="#A82F2F"><font size="2">(01:42:33 AM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] taku0 opened pull request #6691: firefox-bin: update to version 36.0.1 (master...firefox-bin-36.0.1) http://git.io/pUIp<br/>
<font size="2">(01:45:42 AM)</font><b> hexagoxel_ is now known as hexagoxel</b><br/>
<font color="#A82F2F"><font size="2">(01:46:50 AM)</font> <b>wkennington:</b></font> :/<br/>
<font color="#A82F2F"><font size="2">(01:47:45 AM)</font> <b>dont_memoize_me_:</b></font> trying to restart wpa_supplicant during the install process, and the command &apos;systemctl restart wpa_supplicant.service&apos; just hangs. Is that not the right command to be running once I&apos;ve set up my wpa_supplicant.conf?<br/>
<font color="#A82F2F"><font size="2">(01:48:59 AM)</font> <b>codehero:</b></font> it is the right command<br/>
<font color="#A82F2F"><font size="2">(01:50:13 AM)</font> <b>teoma:</b></font> Does xinit work for anyone?  X dies after trying to write its logfile under /nix/store...<br/>
<font color="#A82F2F"><font size="2">(01:50:24 AM)</font> <b>codehero:</b></font> didn&apos;t work for me when i tried<br/>
<font color="#A82F2F"><font size="2">(01:50:41 AM)</font> <b>codehero:</b></font> the only thing that seems to work is using a displaymanager<br/>
<font color="#A82F2F"><font size="2">(01:50:55 AM)</font> <b>codehero:</b></font> but not slim. slim seems to be broken. at least in unstable it is<br/>
<font color="#A82F2F"><font size="2">(01:51:05 AM)</font> <b>dont_memoize_me_:</b></font> hmm, I&apos;ve dug up an ethernet cord anway, I&apos;ll try that.<br/>
<font color="#A82F2F"><font size="2">(01:51:23 AM)</font> <b>dont_memoize_me_:</b></font> is dhcpcd supposed to be available though? I get &apos;command not found&apos; when I try to run it.<br/>
<font color="#A82F2F"><font size="2">(01:51:29 AM)</font> <b>teoma:</b></font> codehero: I see, thanks.<br/>
<font color="#A82F2F"><font size="2">(01:54:13 AM)</font> <b>codehero:</b></font> btw. does firefox updae for anyone to 36?<br/>
<font color="#A82F2F"><font size="2">(01:54:18 AM)</font> <b>codehero:</b></font> i&apos;m stuck at 35<br/>
<font color="#A82F2F"><font size="2">(01:56:24 AM)</font> <b>blueyed:</b></font> codehero: AFAIK it&apos;s because the unstable channel hasn&apos;t been updated since a while.<br/>
<font color="#A82F2F"><font size="2">(01:56:54 AM)</font> <b>codehero:</b></font> huh. so the stable channel has a newer version of firefox than the unstable one?<br/>
<font color="#A82F2F"><font size="2">(01:57:39 AM)</font> <b>blueyed:</b></font> No.. but the nixos release channel maybe - not sure.<br/>
<font color="#A82F2F"><font size="2">(01:57:57 AM)</font> <b>blueyed:</b></font> AFAIK it will be published when the build passes here: http://hydra.nixos.org/job/nixpkgs/trunk/unstable<br/>
<font color="#A82F2F"><font size="2">(01:58:29 AM)</font> <b>codehero:</b></font> oh. i see<br/>
<font color="#A82F2F"><font size="2">(01:58:52 AM)</font> <b>blueyed:</b></font> See also https://nixos.org/wiki/FAQ#What_are_channels_and_how_they_get_updated.3F<br/>
<font color="#A82F2F"><font size="2">(01:59:00 AM)</font> <b>codehero:</b></font> thx<br/>
<font color="#A82F2F"><font size="2">(02:00:17 AM)</font> <b>blueyed:</b></font> I&apos;m trying to make navigating the nix/nixpkgs source easier, and found https://github.com/NixOS/nixpkgs/blob/master/pkgs/development/tools/misc/ctags/wrapped.nix - but it seems to be outdated / I cannot install it as mentioned.<br/>
<font color="#A82F2F"><font size="2">(02:03:10 AM)</font> <b>blueyed:</b></font> MarcWeber: ^^ can you shed some light into this?  Are you using ctags for this still, or is there a better method in the meantime?<br/>
<font color="#A82F2F"><font size="2">(02:06:54 AM)</font> <b>dont_memoize_me_:</b></font> feeling like a newb here, but what do I need to do to set up an internet connection in order to install nixos? I&apos;m used to running &apos;dhcpcd&apos; but it doesn&apos;t appear to be available.<br/>
<font color="#A82F2F"><font size="2">(02:08:30 AM)</font> <b>dont_memoize_me_:</b></font> the manual just says it&apos;s best if I have a DHCP server on my network (I do not) and to otherwise set it up manually using ifconfig.<br/>
<font color="#A82F2F"><font size="2">(02:11:10 AM)</font> <b>Ralith:</b></font> how can you be used to running dhcpcd if you don&apos;t have a DHCP server?<br/>
<font color="#A82F2F"><font size="2">(02:11:23 AM)</font> <b>blueyed:</b></font> locally maybe?<br/>
<font color="#A82F2F"><font size="2">(02:11:31 AM)</font> <b>blueyed:</b></font> dont_memoize_me_: there is dhcpcd-6.6.6.<br/>
<font color="#A82F2F"><font size="2">(02:15:35 AM)</font> <b>dont_memoize_me_:</b></font> well my router does DHCP, I took &quot;a DHCP server on your network&quot; to mean a dedicated box.<br/>
<font color="#A82F2F"><font size="2">(02:16:12 AM)</font> <b>dont_memoize_me_:</b></font> blueyed: can I install that in the live environment then?<br/>
<font color="#A82F2F"><font size="2">(02:17:10 AM)</font> <b>blueyed:</b></font> dont_memoize_me_: but then you have a dhcp server on your network, and it should work by default already probably / given the DHCP method.<br/>
<font color="#A82F2F"><font size="2">(02:25:09 AM)</font> <b>dont_memoize_me_:</b></font> not sure what you mean by &quot;work by default&quot;, I still have to bring an interface up and start a dhcp client, do I not?<br/>
<font color="#A82F2F"><font size="2">(02:29:07 AM)</font> <b>joelmo:</b></font> im not sure if dhcp client is enabled in live cd, it probably is, I know it&apos;s enabled if you do a normal install<br/>
<font color="#A82F2F"><font size="2">(02:33:59 AM)</font> <b>dont_memoize_me_:</b></font> wow ok some unusual shit might be going on... in both NixOS and Ubuntu live environments, I get a black screen after the bootloader when the ethernet cord&apos;s plugged into the dock<br/>
<font color="#A82F2F"><font size="2">(02:34:09 AM)</font> <b>dont_memoize_me_:</b></font> fun<br/>
<font color="#A82F2F"><font size="2">(02:34:19 AM)</font> <b>dont_memoize_me_:</b></font> might not be related but I&apos;d best sort that out first<br/>
<font color="#A82F2F"><font size="2">(02:40:49 AM)</font> <b>dont_memoize_me_:</b></font> might be network boot config issue or something, no idea, anyway it works fine in Ubuntu with the ethernet cord plugged in after boot.<br/>
<font color="#A82F2F"><font size="2">(02:41:59 AM)</font> <b>dont_memoize_me_:</b></font> I can bring down the ethernet interface and back up again and I don&apos;t get an IP, so if there&apos;s a DHCP client running automatically it doesn&apos;t seem to be cooperating. I just don&apos;t know what I&apos;m supposed to do to make that happen.<br/>
<font color="#A82F2F"><font size="2">(02:43:32 AM)</font> <b>benley:</b></font> so, speaking of channels not being updated ... anyone know _why_ the nixpkgs unstable channel is over a month behind master now?<br/>
<font color="#A82F2F"><font size="2">(02:45:20 AM)</font> <b>benley:</b></font> I suppose because the hydra job nixpkgs:trunk:unstable has been failing for that long?<br/>
<font color="#A82F2F"><font size="2">(02:45:32 AM)</font> <b>auntie:</b></font> did uh, hydra start breaking? I thought unstable was bumped automatically once the hydra unit tests pass<br/>
<font color="#A82F2F"><font size="2">(02:45:43 AM)</font> <b>benley:</b></font> http://hydra.nixos.org/job/nixpkgs/trunk/unstable<br/>
<font color="#A82F2F"><font size="2">(02:46:01 AM)</font> <b>auntie:</b></font> unstable: the new stable<br/>
<font color="#A82F2F"><font size="2">(02:46:44 AM)</font> <b>auntie:</b></font> maybe we should just start providing long term support patches for unstable<br/>
<font color="#A82F2F"><font size="2">(02:46:54 AM)</font> <b>benley:</b></font> I&apos;m just not sure I understand why nixpkgs unstable has been broken for so long, but nixos:trunk-combined:tested is working.<br/>
<font color="#A82F2F"><font size="2">(02:47:03 AM)</font> <b>benley:</b></font> i.e. http://hydra.nixos.org/job/nixos/trunk-combined/tested<br/>
<font color="#A82F2F"><font size="2">(02:48:48 AM)</font> <b>auntie:</b></font> agh, I just checked and I&apos;m on the sable channel on this computer<br/>
<font color="#A82F2F"><font size="2">(02:48:52 AM)</font> <b>auntie:</b></font> *stable<br/>
<font color="#A82F2F"><font size="2">(02:48:53 AM)</font> <b>auntie:</b></font> no wonder<br/>
<font color="#A82F2F"><font size="2">(03:01:47 AM)</font> <b>joelmo:</b></font> how do I force a derivation to be built from source?<br/>
<font color="#A82F2F"><font size="2">(03:03:07 AM)</font> <b>benley:</b></font> if you&apos;re using nix-daemon you have to jump through some hoops, I think<br/>
<font color="#A82F2F"><font size="2">(03:03:28 AM)</font> <b>benley:</b></font> https://nixos.org/wiki/FAQ#How_can_I_force_a_rebuild_from_source_even_without_modifying_the_nix_expression.3F&apos;<br/>
<font color="#A82F2F"><font size="2">(03:03:42 AM)</font> <b>benley:</b></font> whoops, trim the trailing &apos; from that<br/>
<font color="#A82F2F"><font size="2">(03:03:45 AM)</font> <b>benley:</b></font> https://nixos.org/wiki/FAQ#How_can_I_force_a_rebuild_from_source_even_without_modifying_the_nix_expression.3F<br/>
<font color="#A82F2F"><font size="2">(03:04:40 AM)</font> <b>joelmo:</b></font> --check do what I want, I would never guess check did that :P<br/>
<font color="#A82F2F"><font size="2">(03:06:41 AM)</font> <b>teoma:</b></font> How would you refer to services.xserver.configFile in all-packages.nix?<br/>
<font color="#A82F2F"><font size="2">(03:15:21 AM)</font> <b>joelmo:</b></font> teoma: I think import &lt;nixos/modules/services... but nixos is separated from nixpkgs so I don&apos;t think you should do it if you want to submitt upstream<br/>
<font color="#A82F2F"><font size="2">(03:17:28 AM)</font> <b>teoma:</b></font> joelmo: good to know, thanks.<br/>
<font color="#A82F2F"><font size="2">(03:35:06 AM)</font> <b>teoma:</b></font> joelmo: does that mean that pkgs/servers/x11/xorg/overrides.nix shouldn&apos;t access services.xserver.configFile?<br/>
<font color="#A82F2F"><font size="2">(03:38:31 AM)</font> <b>teoma:</b></font> I&apos;m trying to figure out a way to make services.xserver.configFile X&apos;s default config file, because X won&apos;t accept a command line config filename with an absolute path if it is setuid.<br/>
<font color="#A82F2F"><font size="2">(03:40:39 AM)</font> <b>Irenes:</b></font> Hi.<br/>
<font color="#A82F2F"><font size="2">(03:41:25 AM)</font> <b>Irenes:</b></font> So I’ve got a boot problem on a newly-built system that I’ve spent all week trying to diagnose.  I’ll give details in a sec, but I think the fix is for me to fix grub.nix to understand how to tell grub to install on an EFI system.<br/>
<font color="#A82F2F"><font size="2">(03:41:43 AM)</font> <b>Irenes:</b></font> Before I do that work, I’d like to find out to what extent gummiboot is expected to work, and why it was chosen for EFI boots over grub.<br/>
<font color="#A82F2F"><font size="2">(03:42:03 AM)</font> <b>Irenes:</b></font> I admit, I was looking forward to adding stuff to NixOS, but I thought I’d at least be able to install it successfully before I had to!<br/>
<font color="#A82F2F"><font size="2">(03:42:16 AM)</font> <b>Irenes:</b></font> Is there anyone around who knows about the boot loader choice?<br/>
<font color="#A82F2F"><font size="2">(03:44:36 AM)</font> <b>Irenes:</b></font> I should add that I’m using LVM within LUKS, so my setup is unusual in that regard, but the failure appears to be far before that, and I found kernel mailing list threads suggesting that the efistub feature which makes the kernel loadable by the EFI_FILE protocol has had a series of bugs and regressions for the past year<br/>
<font color="#A82F2F"><font size="2">(03:44:54 AM)</font> <b>Irenes:</b></font> specifically, gummiboot implement EFI_FILE, which is why it’s such a lightweight loader<br/>
<font color="#A82F2F"><font size="2">(03:45:36 AM)</font> <b>Irenes:</b></font> firmwares are not providing the guarantees about memory actually being mapped, which the kernel’s self-loading expects them to, so the symptom of this problem is a hard freeze when the bzImage tries to decompress<br/>
<font color="#A82F2F"><font size="2">(03:45:39 AM)</font> <b>Irenes:</b></font> which is the symptom I’m getting<br/>
<font color="#A82F2F"><font size="2">(03:45:51 AM)</font> <b>Irenes:</b></font> though by nature I get zero debugging output so it’s really hard to know for sure that that’s my problem<br/>
<font color="#A82F2F"><font size="2">(03:46:17 AM)</font> <b>Irenes:</b></font> but my motherboard is one on which people have reported flakes, so I think it is; I can boot off the NixOS install ISO-on-a-usb-stick without a problem<br/>
<font color="#A82F2F"><font size="2">(03:46:59 AM)</font> <b>Irenes:</b></font> (almost without a problem; separately, I had to tell it to not use the nouveau driver.  but that failure is much later, after various boot-related messages have appeared)<br/>
<font color="#A82F2F"><font size="2">(03:47:35 AM)</font> <b>Irenes:</b></font> I guess while I wait for an answer, I’ll make a start at those code changes :)<br/>
<font color="#A82F2F"><font size="2">(03:48:25 AM)</font> <b>codehero:</b></font> Irenes: well, i tried using gummiboot with lvm on luks, and i failed<br/>
<font color="#A82F2F"><font size="2">(03:48:55 AM)</font> <b>codehero:</b></font> gummiboot was chosen over grub, because it works nicely together with uefi<br/>
<font color="#A82F2F"><font size="2">(03:49:10 AM)</font> <b>Irenes:</b></font> hm<br/>
<font color="#A82F2F"><font size="2">(03:49:14 AM)</font> <b>Irenes:</b></font> well, yes it does<br/>
<font color="#A82F2F"><font size="2">(03:49:36 AM)</font> <b>Irenes:</b></font> if I had access to set the platform key on my motherboard, I could actually set up secure boot of nixos with uefi and gummiboot<br/>
<font color="#A82F2F"><font size="2">(03:49:45 AM)</font> <b>codehero:</b></font> but somehow full disk encryption doesn&apos;t seem to work. at least not with the config file that i tried<br/>
<font color="#A82F2F"><font size="2">(03:49:48 AM)</font> <b>Irenes:</b></font> but I don’t because Gigabyte doesn’t like that idea, so I don’t really care<br/>
<font color="#A82F2F"><font size="2">(03:49:49 AM)</font> <b>Irenes:</b></font> mew hm<br/>
<font color="#A82F2F"><font size="2">(03:49:55 AM)</font> <b>Irenes:</b></font> how did the failure manifest?<br/>
<font color="#A82F2F"><font size="2">(03:50:01 AM)</font> <b>codehero:</b></font> oh. you&apos;re dual booting windows?<br/>
<font color="#A82F2F"><font size="2">(03:50:03 AM)</font> <b>Irenes:</b></font> no.<br/>
<font color="#A82F2F"><font size="2">(03:50:08 AM)</font> <b>codehero:</b></font> then why secure boot?<br/>
<font color="#A82F2F"><font size="2">(03:50:11 AM)</font> <b>Irenes:</b></font> no, this is the only OS that I’m trying to have on the machine<br/>
<font color="#A82F2F"><font size="2">(03:50:13 AM)</font> <b>Irenes:</b></font> because paranoia?<br/>
<font color="#A82F2F"><font size="2">(03:50:21 AM)</font> <b>Irenes:</b></font> it seems like a nice thing to secure the trust chain<br/>
<font color="#A82F2F"><font size="2">(03:50:30 AM)</font> <b>Irenes:</b></font> otherwise the machine is always vulnerable to tampering, really<br/>
<font color="#A82F2F"><font size="2">(03:50:48 AM)</font> <b>Irenes:</b></font> it would be a fun thing to play with setting up<br/>
<font color="#A82F2F"><font size="2">(03:51:05 AM)</font> <b>Irenes:</b></font> but anyway, that’s the only advantage that I really get as an end-user by going via the clean uefi-only way rather than the grub universe<br/>
<font color="#A82F2F"><font size="2">(03:51:09 AM)</font> <b>Irenes:</b></font> as far as I can see<br/>
<font color="#A82F2F"><font size="2">(03:51:55 AM)</font> <b>codehero:</b></font> hmm<br/>
<font color="#A82F2F"><font size="2">(03:51:59 AM)</font> <b>codehero:</b></font> i guess you could sign gummiboot<br/>
<font color="#A82F2F"><font size="2">(03:52:03 AM)</font> <b>codehero:</b></font> or however that works<br/>
<font color="#A82F2F"><font size="2">(03:52:03 AM)</font> <b>Irenes:</b></font> so secure boot is turned off, to clarify<br/>
<font color="#A82F2F"><font size="2">(03:52:04 AM)</font> <b>Irenes:</b></font> yeah<br/>
<font color="#A82F2F"><font size="2">(03:52:06 AM)</font> <b>Irenes:</b></font> that is how that works<br/>
<font color="#A82F2F"><font size="2">(03:52:16 AM)</font> <b>Irenes:</b></font> the platform key, supposedly under the control of the hardware owner, is the root of trust<br/>
<font color="#A82F2F"><font size="2">(03:52:27 AM)</font> <b>codehero:</b></font> ah, okay<br/>
<font color="#A82F2F"><font size="2">(03:52:27 AM)</font> <b>Irenes:</b></font> it signs various other keys which in turn sign the bootloaders<br/>
<font color="#A82F2F"><font size="2">(03:52:37 AM)</font> <b>Irenes:</b></font> but yeah it’s not actually under my control so the whole thing is a lie :)<br/>
<font color="#A82F2F"><font size="2">(03:53:14 AM)</font> <b>codehero:</b></font> heh<br/>
<font color="#A82F2F"><font size="2">(03:53:29 AM)</font> <b>codehero:</b></font> well. full disk encryption should be enough actually<br/>
<font color="#A82F2F"><font size="2">(03:53:33 AM)</font> <b>Irenes:</b></font> no<br/>
<font color="#A82F2F"><font size="2">(03:53:37 AM)</font> <b>codehero:</b></font> no?<br/>
<font color="#A82F2F"><font size="2">(03:53:40 AM)</font> <b>Irenes:</b></font> the kernel image has to be outside the encryption<br/>
<font color="#A82F2F"><font size="2">(03:53:45 AM)</font> <b>Irenes:</b></font> how else can it load, to decrypt everything else?<br/>
<font color="#A82F2F"><font size="2">(03:53:49 AM)</font> <b>codehero:</b></font> oh, really?<br/>
<font color="#A82F2F"><font size="2">(03:53:51 AM)</font> <b>codehero:</b></font> hmm<br/>
<font color="#A82F2F"><font size="2">(03:53:51 AM)</font> <b>Irenes:</b></font> yes.<br/>
<font color="#A82F2F"><font size="2">(03:53:52 AM)</font> <b>codehero:</b></font> true<br/>
<font color="#A82F2F"><font size="2">(03:54:03 AM)</font> <b>Irenes:</b></font> that’s why the secure boot protocol exists :)<br/>
<font color="#A82F2F"><font size="2">(03:54:04 AM)</font> <b>codehero:</b></font> uefi password?<br/>
<font color="#A82F2F"><font size="2">(03:54:08 AM)</font> <b>Irenes:</b></font> oh, yes<br/>
<font color="#A82F2F"><font size="2">(03:54:12 AM)</font> <b>Irenes:</b></font> but that isn’t robust against physical access<br/>
<font color="#A82F2F"><font size="2">(03:54:28 AM)</font> <b>Irenes:</b></font> since anyone can just modify the kernel image, since it’s neither encrypted nor signed<br/>
<font color="#A82F2F"><font size="2">(03:54:34 AM)</font> <b>Irenes:</b></font> this isn’t really what I wanted to talk about :)<br/>
<font color="#A82F2F"><font size="2">(03:54:40 AM)</font> <b>codehero:</b></font> heh<br/>
<font color="#A82F2F"><font size="2">(03:54:54 AM)</font> <b>Irenes:</b></font> at what step of the boot did your LUKS setup fail, if you don’t mind sharing?<br/>
<font color="#A82F2F"><font size="2">(03:54:59 AM)</font> <b>semigroup:</b></font> Hi, sorry for the noob question, but I&apos;m having a hard time figuring how to explore .nix files with the nix-repl. Could someone help me figure how I can load a shell.nix file and explore the result?<br/>
<font color="#A82F2F"><font size="2">(03:55:25 AM)</font> <b>Irenes:</b></font> I’m not sure the repl is really meant for browsing the code?  I’m too new to have an answer for you though, sorry<br/>
<font color="#A82F2F"><font size="2">(03:56:20 AM)</font> <b>codehero:</b></font> Irenes: i could select the entry from gummiboot and then it was just black<br/>
<font color="#A82F2F"><font size="2">(03:56:43 AM)</font> <b>Irenes:</b></font> oh huh<br/>
<font color="#A82F2F"><font size="2">(03:56:45 AM)</font> <b>codehero:</b></font> semigroup: you could always look at the source on github<br/>
<font color="#A82F2F"><font size="2">(03:56:47 AM)</font> <b>Irenes:</b></font> that’s further than I got<br/>
<font color="#A82F2F"><font size="2">(03:57:07 AM)</font> <b>codehero:</b></font> heh. well, i don&apos;t know what went wrong<br/>
<font color="#A82F2F"><font size="2">(03:57:08 AM)</font> <b>Irenes:</b></font> but not in a way that’s unambiguously not my problem, since I’m not sure I have gummiboot set to show its menu at all<br/>
<font color="#A82F2F"><font size="2">(03:57:10 AM)</font> <b>codehero:</b></font> so i just gave up<br/>
<font color="#A82F2F"><font size="2">(03:57:24 AM)</font> <b>Irenes:</b></font> well, something needs to prompt you for the LUKS password at some point and I guess nothing was configured to do so :)<br/>
<font color="#A82F2F"><font size="2">(03:57:41 AM)</font> <b>codehero:</b></font> Irenes: that happens automatically. how else should you roll back? ;)<br/>
<font color="#A82F2F"><font size="2">(03:57:53 AM)</font> <b>Irenes:</b></font> mm<br/>
<font color="#A82F2F"><font size="2">(03:58:01 AM)</font> <b>Irenes:</b></font> indeed<br/>
<font color="#A82F2F"><font size="2">(03:58:02 AM)</font> <b>codehero:</b></font> Irenes: could i see your configuration.nix?<br/>
<font color="#A82F2F"><font size="2">(03:58:21 AM)</font> <b>Irenes:</b></font> sure.  one sec - I have to figure out how to get them from the machine itself to the net :)<br/>
<font color="#A82F2F"><font size="2">(03:58:43 AM)</font> <b>codehero:</b></font> http://sprunge.us/<br/>
<font color="#A82F2F"><font size="2">(03:58:47 AM)</font> <b>Irenes:</b></font> yeah, but<br/>
<font color="#A82F2F"><font size="2">(03:58:53 AM)</font> <b>Irenes:</b></font> it’s booted into the nixos-install non-GUI image :)<br/>
<font color="#A82F2F"><font size="2">(03:58:57 AM)</font> <b>semigroup:</b></font> codehero: I mean, yeah, I&apos;m doing that. It&apos;s more that I&apos;m trying to use nix for some Haskell development, but I&apos;m having a hard time understanding the nix language / debugging the configurations. I&apos;d expect that nix-repl would be useful for that, but I don&apos;t really understand how to see nix is doing.<br/>
<font color="#A82F2F"><font size="2">(03:58:57 AM)</font> <b>codehero:</b></font> oh wait<br/>
<font color="#A82F2F"><font size="2">(03:59:24 AM)</font> <b>codehero:</b></font> Irenes: cat /etc/nixos/configuration.nix | curl -F &apos;sprunge=&lt;-&apos;<br/>
<font color="#A82F2F"><font size="2">(03:59:29 AM)</font> <b>Irenes:</b></font> oh huh :D<br/>
<font color="#A82F2F"><font size="2">(03:59:30 AM)</font> <b>Irenes:</b></font> yes okie<br/>
<font color="#A82F2F"><font size="2">(03:59:56 AM)</font> <b>codehero:</b></font> semigroup: i see. you&apos;ve been spoiled with ghci<br/>
<font color="#A82F2F"><font size="2">(04:00:05 AM)</font> <b>Irenes:</b></font> haha ghci is very nice indeed :)<br/>
<font color="#A82F2F"><font size="2">(04:00:06 AM)</font> <b>codehero:</b></font> i don&apos;t think it works quite the same with nix<br/>
<font color="#A82F2F"><font size="2">(04:00:26 AM)</font> <b>semigroup:</b></font> heh. Well, I just don&apos;t know how to debug my configurations effectively<br/>
<font color="#A82F2F"><font size="2">(04:00:33 AM)</font> <b>codehero:</b></font> but i can&apos;t say for sure. i haven&apos;t really gotten into nix yet<br/>
<font color="#A82F2F"><font size="2">(04:01:38 AM)</font> <b>semigroup:</b></font> Yeah, so far I&apos;m enjoying the OS side of things, just don&apos;t really know how to get anything with nontrivial dependencies set up to develop against.<br/>
<font color="#A82F2F"><font size="2">(04:02:23 AM)</font> <b>codehero:</b></font> semigroup: you might want to ask at the nix-dev mailing list<br/>
<font color="#A82F2F"><font size="2">(04:02:43 AM)</font> <b>codehero:</b></font> http://lists.science.uu.nl/mailman/listinfo/nix-dev<br/>
<font color="#A82F2F"><font size="2">(04:02:55 AM)</font> <b>Irenes:</b></font> configuration.nix http://sprunge.us/YDeD … hardware-configuration.nix http://sprunge.us/GHXQ … boot.nix http://sprunge.us/XYfa<br/>
<font color="#A82F2F"><font size="2">(04:03:01 AM)</font> <b>Irenes:</b></font> this isn’t all of them because I like well-factored code :)<br/>
<font color="#A82F2F"><font size="2">(04:03:04 AM)</font> <b>Irenes:</b></font> let me know if you want to see others<br/>
<font color="#A82F2F"><font size="2">(04:03:13 AM)</font> <b>codehero:</b></font> okay. thank you :)<br/>
<font color="#A82F2F"><font size="2">(04:03:16 AM)</font> <b>semigroup:</b></font> codehero: Guess I&apos;ll give that a go. Thanks<br/>
<font color="#A82F2F"><font size="2">(04:03:22 AM)</font> <b>codehero:</b></font> i&apos;ll still have to clean my configs up :D<br/>
<font color="#A82F2F"><font size="2">(04:03:26 AM)</font> <b>Irenes:</b></font> haha yeah :)<br/>
<font color="#A82F2F"><font size="2">(04:03:28 AM)</font> <b>codehero:</b></font> it&apos;s all just one ugly file<br/>
<font color="#A82F2F"><font size="2">(04:03:39 AM)</font> <b>codehero:</b></font> lol. boring.nix<br/>
<font color="#A82F2F"><font size="2">(04:03:48 AM)</font> <b>Irenes:</b></font> yeah :) that’s uh the default LOCALE :)<br/>
<font color="#A82F2F"><font size="2">(04:04:02 AM)</font> <b>codehero:</b></font> pretty boring<br/>
<font color="#A82F2F"><font size="2">(04:04:12 AM)</font> <b>Irenes:</b></font> note that boot.nix reflects edits that I haven’t tried to boot from yet - to wit, since the last try I commented out the boot.loader.gummiboot stanza and added the boot.loader.grub one<br/>
<font color="#A82F2F"><font size="2">(04:04:22 AM)</font> <b>Irenes:</b></font> other than that, this is all tested-and-failed<br/>
<font size="2">(04:04:28 AM)</font><b> the-kenny left the room (quit: Remote host closed the connection).</b><br/>
<font color="#A82F2F"><font size="2">(04:05:34 AM)</font> <b>codehero:</b></font> okay. so luks actually brought up the passphrase prompt with gummiboot?<br/>
<font color="#A82F2F"><font size="2">(04:05:34 AM)</font> <b>Irenes:</b></font> I appreciate your taking a look, btw, whether or not you end up solving anything :)<br/>
<font color="#A82F2F"><font size="2">(04:05:37 AM)</font> <b>Irenes:</b></font> no<br/>
<font color="#A82F2F"><font size="2">(04:05:46 AM)</font> <b>Irenes:</b></font> no, I see no evidence that gummiboot ever loaded<br/>
<font color="#A82F2F"><font size="2">(04:05:53 AM)</font> <b>Irenes:</b></font> I get stuck on the very first splash screen from the firmware<br/>
<font color="#A82F2F"><font size="2">(04:06:02 AM)</font> <b>Irenes:</b></font> which doesn’t respond to the keys it describes to get into its UI<br/>
<font color="#A82F2F"><font size="2">(04:06:06 AM)</font> <b>codehero:</b></font> ah, okay<br/>
<font color="#A82F2F"><font size="2">(04:06:08 AM)</font> <b>codehero:</b></font> that sucks<br/>
<font color="#A82F2F"><font size="2">(04:06:24 AM)</font> <b>Irenes:</b></font> yeah, mostly cause it’s hard to diagnose; as a programmer, I don’t mind things not working per se :)<br/>
<font color="#A82F2F"><font size="2">(04:06:29 AM)</font> <b>Irenes:</b></font> this only happens when the ssd that Nix is “installed” on is plugged into the machine<br/>
<font color="#A82F2F"><font size="2">(04:06:49 AM)</font> <b>Irenes:</b></font> so I have a little dance where I do three total reboots every time I want to get to a state where I’m booted into the installer but can also see the ssd<br/>
<font color="#A82F2F"><font size="2">(04:07:01 AM)</font> <b>codehero:</b></font> yeah. i guess that&apos;s a security feature<br/>
<font color="#A82F2F"><font size="2">(04:07:01 AM)</font> <b>Irenes:</b></font> but you don’t need to know about that :)<br/>
<font color="#A82F2F"><font size="2">(04:07:06 AM)</font> <b>Irenes:</b></font> yeah, hmmm<br/>
<font color="#A82F2F"><font size="2">(04:07:14 AM)</font> <b>Irenes:</b></font> is it?  I think it’s just that it tried to boot but hard-crashed<br/>
<font color="#A82F2F"><font size="2">(04:07:31 AM)</font> <b>Irenes:</b></font> if that’s how a security feature behaves, my tentative diagnosis may be way off<br/>
<font color="#A82F2F"><font size="2">(04:07:57 AM)</font> <b>codehero:</b></font> well, it&apos;s the most effective security feature<br/>
<font color="#A82F2F"><font size="2">(04:08:02 AM)</font> <b>Irenes:</b></font> haha<br/>
<font color="#A82F2F"><font size="2">(04:08:04 AM)</font> <b>Irenes:</b></font> fair :)<br/>
<font color="#A82F2F"><font size="2">(04:08:14 AM)</font> <b>codehero:</b></font> does it happen when you turn secure boot off?<br/>
<font color="#A82F2F"><font size="2">(04:08:15 AM)</font> <b>Irenes:</b></font> oh - one sec - laundry change.  I’ll read scrollback<br/>
<font color="#A82F2F"><font size="2">(04:08:22 AM)</font> <b>Irenes:</b></font> secure boot has been off in all my tests<br/>
<font color="#A82F2F"><font size="2">(04:08:27 AM)</font> <b>Irenes:</b></font> I was unclear earlier I guess :)<br/>
<font color="#A82F2F"><font size="2">(04:08:40 AM)</font> <b>codehero:</b></font> oh<br/>
<font color="#A82F2F"><font size="2">(04:08:46 AM)</font> <b>codehero:</b></font> then it&apos;s not a security feature<br/>
<font color="#A82F2F"><font size="2">(04:11:53 AM)</font> <b>Irenes:</b></font> yes okay :)<br/>
<font color="#A82F2F"><font size="2">(04:11:55 AM)</font> <b>Irenes:</b></font> and I’m back<br/>
<font color="#A82F2F"><font size="2">(04:12:48 AM)</font> <b>codehero:</b></font> i&apos;m don&apos;t know why it would crash at the splash screen<br/>
<font color="#A82F2F"><font size="2">(04:12:55 AM)</font> <b>Irenes:</b></font> yeah<br/>
<font color="#A82F2F"><font size="2">(04:13:00 AM)</font> <b>codehero:</b></font> unless your grub installation is messed up<br/>
<font color="#A82F2F"><font size="2">(04:13:05 AM)</font> <b>Irenes:</b></font> gummiboot installation<br/>
<font color="#A82F2F"><font size="2">(04:13:14 AM)</font> <b>codehero:</b></font> *gummiboot installation. yes<br/>
<font color="#A82F2F"><font size="2">(04:13:22 AM)</font> <b>Irenes:</b></font> yeah<br/>
<font color="#A82F2F"><font size="2">(04:13:29 AM)</font> <b>Irenes:</b></font> so it’s crashing before it even tries my kernel, I guess<br/>
<font color="#A82F2F"><font size="2">(04:13:34 AM)</font> <b>Irenes:</b></font> so that’s pretty interesting<br/>
<font color="#A82F2F"><font size="2">(04:13:34 AM)</font> <b>Irenes:</b></font> hm<br/>
<font color="#A82F2F"><font size="2">(04:14:18 AM)</font> <b>Irenes:</b></font> am I correct in thinking that NixOS isn’t meant to work out of the box with grub and EFI?<br/>
<font color="#A82F2F"><font size="2">(04:15:20 AM)</font> <b>codehero:</b></font> umm<br/>
<font color="#A82F2F"><font size="2">(04:15:29 AM)</font> <b>codehero:</b></font> well<br/>
<font color="#A82F2F"><font size="2">(04:15:44 AM)</font> <b>Irenes:</b></font> because the manual says to use gummiboot for EFI systems, and nixos-generate-config configures gummiboot by default when it detects them, but I do see some sort of support in https://github.com/NixOS/nixpkgs/tree/release-14.12/nixos/modules/system/boot/loader/grub<br/>
<font color="#A82F2F"><font size="2">(04:15:59 AM)</font> <b>Irenes:</b></font> although it looks a little bitrotten; the flag names don’t match up between grub.nix and install-grub.pl<br/>
<font color="#A82F2F"><font size="2">(04:16:12 AM)</font> <b>codehero:</b></font> i&apos;m not sure if grub is even supposed to work out-of-the-box with uefi<br/>
<font color="#A82F2F"><font size="2">(04:16:17 AM)</font> <b>Irenes:</b></font> it is, I checked<br/>
<font color="#A82F2F"><font size="2">(04:16:20 AM)</font> <b>Irenes:</b></font> grub 2.0 and later only though<br/>
<font color="#A82F2F"><font size="2">(04:16:29 AM)</font> <b>Irenes:</b></font> uh hm right, I can check what version of grub grub.nix is expecting<br/>
<font color="#A82F2F"><font size="2">(04:16:43 AM)</font> <b>ewemoa:</b></font> Irenes: i think that&apos;s correct that NixOS is not meant to work out of the box with grub and EFI -- cf. http://nixos.org/nixos/manual/sec-installation.html#sec-uefi-installation<br/>
<font color="#A82F2F"><font size="2">(04:16:53 AM)</font> <b>Irenes:</b></font> ewemoa: thanks, I think<br/>
<font color="#A82F2F"><font size="2">(04:17:20 AM)</font> <b>codehero:</b></font> so grub also works on an efi partition?<br/>
<font color="#A82F2F"><font size="2">(04:17:21 AM)</font> <b>Irenes:</b></font> it’s, I’m thinking that rather than dive into the world of debugging gummiboot with zero output from it to go on, I’d rather fix the nixos-grub-EFI combination :)<br/>
<font color="#A82F2F"><font size="2">(04:17:24 AM)</font> <b>Irenes:</b></font> it does<br/>
<font color="#062585"><font size="2">(04:17:28 AM)</font> <b>***ewemoa</b></font> punted w/ the whole EFI thing -- not enough benefit for all of the extra hassle for my usage<br/>
<font color="#A82F2F"><font size="2">(04:17:32 AM)</font> <b>Irenes:</b></font> that’s fair.<br/>
<font color="#A82F2F"><font size="2">(04:17:35 AM)</font> <b>codehero:</b></font> huh. interesting<br/>
<font color="#A82F2F"><font size="2">(04:17:45 AM)</font> <b>Irenes:</b></font> I suppose that’s an option for me as well, but I know that things I want to play with someday are based on EFI, so...<br/>
<font color="#A82F2F"><font size="2">(04:18:09 AM)</font> <b>Irenes:</b></font> grub needs some different configuration for EFI, of course, but yes the same program can do both<br/>
<font color="#A82F2F"><font size="2">(04:19:06 AM)</font> <b>codehero:</b></font> what you could also do is boot grub using gummiboot, but that would probably require some insane configuration with nixos<br/>
<font color="#A82F2F"><font size="2">(04:19:12 AM)</font> <b>Irenes:</b></font> hehhhhh<br/>
<font color="#A82F2F"><font size="2">(04:19:19 AM)</font> <b>Irenes:</b></font> yeah, I’m not sure why I’d do that actually :)<br/>
<font color="#A82F2F"><font size="2">(04:19:28 AM)</font> <b>Irenes:</b></font> gummiboot isn’t as general wrt what it can load, as grub is<br/>
<font color="#A82F2F"><font size="2">(04:19:38 AM)</font> <b>Irenes:</b></font> yes, it can chain to any other EFI program, and grub is one<br/>
<font color="#A82F2F"><font size="2">(04:19:46 AM)</font> <b>Irenes:</b></font> it can’t do the “emulate a BIOS” thing<br/>
<font color="#A82F2F"><font size="2">(04:19:55 AM)</font> <b>Irenes:</b></font> which my motherboard could do directly, if I were to set that up, I guess<br/>
<font color="#A82F2F"><font size="2">(04:20:02 AM)</font> <b>Irenes:</b></font> and I suppose I could be less stubborn :/<br/>
<font color="#A82F2F"><font size="2">(04:23:28 AM)</font> <b>benley:</b></font> codehero: I&apos;ve got gummiboot chainloading grub on my laptop<br/>
<font color="#A82F2F"><font size="2">(04:23:32 AM)</font> <b>benley:</b></font> wasn&apos;t very hard to do actually<br/>
<font color="#A82F2F"><font size="2">(04:23:35 AM)</font> <b>codehero:</b></font> oh<br/>
<font color="#A82F2F"><font size="2">(04:23:41 AM)</font> <b>benley:</b></font> (but grub doesn&apos;t load nixos - that&apos;s so I can dual boot into ubuntu)<br/>
<font color="#A82F2F"><font size="2">(04:23:49 AM)</font> <b>codehero:</b></font> ah, i see<br/>
<font color="#A82F2F"><font size="2">(04:23:58 AM)</font> <b>Irenes:</b></font> huh.<br/>
<font color="#A82F2F"><font size="2">(04:23:59 AM)</font> <b>Irenes:</b></font> oh<br/>
<font color="#A82F2F"><font size="2">(04:24:12 AM)</font> <b>benley:</b></font> at some point I&apos;d like to get secure boot working again too. I had that working when I was just using ubuntu+grub<br/>
<font color="#A82F2F"><font size="2">(04:24:22 AM)</font> <b>Irenes:</b></font> oh, it’s good to hear people have been able to! :)<br/>
<font color="#A82F2F"><font size="2">(04:24:30 AM)</font> <b>benley:</b></font> now I&apos;ve got nixos and fulldisk encryption, but secureboot is turned off.<br/>
<font color="#A82F2F"><font size="2">(04:24:36 AM)</font> <b>Irenes:</b></font> right<br/>
<font color="#A82F2F"><font size="2">(04:24:48 AM)</font> <b>codehero:</b></font> i don&apos;t remember secureboot working with arch either<br/>
<font color="#A82F2F"><font size="2">(04:24:50 AM)</font> <b>benley:</b></font> oh god I wasted like a week figuring out how to get secureboot to work the first time around<br/>
<font color="#A82F2F"><font size="2">(04:25:03 AM)</font> <b>benley:</b></font> I don&apos;t even know why I was so fixated on that<br/>
<font color="#A82F2F"><font size="2">(04:25:14 AM)</font> <b>Irenes:</b></font> haha<br/>
<font color="#A82F2F"><font size="2">(04:25:15 AM)</font> <b>Irenes:</b></font> fair<br/>
<font color="#062585"><font size="2">(04:25:44 AM)</font> <b>***benley</b></font> goes home, back in a bit<br/>
<font color="#A82F2F"><font size="2">(04:25:59 AM)</font> <b>Irenes:</b></font> okie<br/>
<font color="#A82F2F"><font size="2">(04:29:42 AM)</font> <b>Irenes:</b></font> oh, whoa<br/>
<font color="#A82F2F"><font size="2">(04:30:04 AM)</font> <b>Irenes:</b></font> it may be that gummiboot didn’t even try to load?  I reran nixos-install and noticed a warning near the end of its output<br/>
<font color="#A82F2F"><font size="2">(04:31:05 AM)</font> <b>Irenes:</b></font> http://sprunge.us/LPOc<br/>
<font color="#A82F2F"><font size="2">(04:31:05 AM)</font> <b>codehero:</b></font> what does it say?<br/>
<font color="#A82F2F"><font size="2">(04:31:17 AM)</font> <b>Irenes:</b></font> “Running in chroot, ignoring request.”, which Google informs me is from systemctl<br/>
<font color="#A82F2F"><font size="2">(04:31:28 AM)</font> <b>codehero:</b></font> hmm<br/>
<font color="#A82F2F"><font size="2">(04:31:34 AM)</font> <b>Irenes:</b></font> so I’m guessing it tried to invoke a unit in the installed system but was unable for that reason<br/>
<font color="#A82F2F"><font size="2">(04:31:40 AM)</font> <b>Irenes:</b></font> and that if I run that unit’s command by hand…<br/>
<font color="#A82F2F"><font size="2">(04:31:46 AM)</font> <b>codehero:</b></font> are you in a chroot?<br/>
<font color="#A82F2F"><font size="2">(04:31:55 AM)</font> <b>Irenes:</b></font> no<br/>
<font color="#A82F2F"><font size="2">(04:31:57 AM)</font> <b>codehero:</b></font> okay<br/>
<font color="#A82F2F"><font size="2">(04:32:19 AM)</font> <b>Irenes:</b></font> fair question, always :<br/>
<font color="#A82F2F"><font size="2">(04:32:20 AM)</font> <b>Irenes:</b></font> :)<br/>
<font color="#A82F2F"><font size="2">(04:32:26 AM)</font> <b>codehero:</b></font> well. it copies the EFI files<br/>
<font color="#A82F2F"><font size="2">(04:32:29 AM)</font> <b>Irenes:</b></font> yep<br/>
<font color="#A82F2F"><font size="2">(04:32:33 AM)</font> <b>codehero:</b></font> so i&apos;m not sure why it shouldn&apos;t work<br/>
<font color="#A82F2F"><font size="2">(04:32:40 AM)</font> <b>Irenes:</b></font> there must be some last step ;)<br/>
<font color="#A82F2F"><font size="2">(04:32:56 AM)</font> <b>Irenes:</b></font> let me see if I can find the code that governs this… heh<br/>
<font color="#A82F2F"><font size="2">(04:42:25 AM)</font> <b>Irenes:</b></font> okay.  so everything in my latest sprunge after “finalising the installation…” is in fact produced by the very last line of nixos-install.sh, which chroots into the new install and runs switch-to-configuration boot within it<br/>
<font color="#A82F2F"><font size="2">(04:44:54 AM)</font> <b>Irenes:</b></font> I’m gonna take a risk and try to reboot into this :)<br/>
<font color="#A82F2F"><font size="2">(04:45:07 AM)</font> <b>Irenes:</b></font> wait<br/>
<font color="#A82F2F"><font size="2">(04:45:08 AM)</font> <b>Irenes:</b></font> no :)<br/>
<font color="#A82F2F"><font size="2">(04:49:48 AM)</font> <b>codehero:</b></font> :D<br/>
<font color="#A82F2F"><font size="2">(04:58:07 AM)</font> <b>Irenes:</b></font> okay!<br/>
<font color="#A82F2F"><font size="2">(04:58:36 AM)</font> <b>Irenes:</b></font> switch-to-configuration indeed fails with a complaint about a chroot when I try to run it the way nixos-install.sh runs it<br/>
<font color="#A82F2F"><font size="2">(04:59:18 AM)</font> <b>Irenes:</b></font> it does NOT print that message when I run it with “nixos-install —chroot /nix/var/nix/profiles/system/bin/switch-to-configuration boot”<br/>
<font color="#A82F2F"><font size="2">(04:59:39 AM)</font> <b>Irenes:</b></font> and efibootmgr now reports an entry “Linux Boot Manager”, which points to gummiboot<br/>
<font color="#A82F2F"><font size="2">(04:59:57 AM)</font> <b>Irenes:</b></font> I never saw that before (I saw a different entry “UEFI OS” which pointed to bootx86.efi, and that wasn’t obviously wrong to me)<br/>
<font color="#A82F2F"><font size="2">(05:00:10 AM)</font> <b>Irenes:</b></font> I’m gonna try this.  wish me luck; it’s ten minutes to get back to this point if it doesn’t boot :)<br/>
<font color="#A82F2F"><font size="2">(05:00:20 AM)</font> <b>avn_:</b></font> EFI is black voodoo magic<br/>
<font color="#A82F2F"><font size="2">(05:00:26 AM)</font> <b>wkennington:</b></font> hardly<br/>
<font color="#A82F2F"><font size="2">(05:00:36 AM)</font> <b>Irenes:</b></font> it makes *some* sense to me :)<br/>
<font color="#A82F2F"><font size="2">(05:00:48 AM)</font> <b>avn_:</b></font> you should sarcrifice 10 virgins to cthulhu before reboot<br/>
<font color="#A82F2F"><font size="2">(05:00:50 AM)</font> <b>Irenes:</b></font> mostly the way its variables never seem to truly be deleted is confusing<br/>
<font color="#A82F2F"><font size="2">(05:01:06 AM)</font> <b>Irenes:</b></font> I’m unclear that virgins are the correct sacrifice for cthulhu<br/>
<font color="#A82F2F"><font size="2">(05:01:16 AM)</font> <b>Irenes:</b></font> he’s, you know, half a mile tall and mostly a squid<br/>
<font color="#A82F2F"><font size="2">(05:01:21 AM)</font> <b>Irenes:</b></font> so it’s not clear what he’d do with them<br/>
<font color="#A82F2F"><font size="2">(05:01:55 AM)</font> <b>avn_:</b></font> I haven&apos;t other ideas ;(<br/>
<font color="#A82F2F"><font size="2">(05:01:59 AM)</font> <b>Irenes:</b></font> fair :)<br/>
<font color="#A82F2F"><font size="2">(05:02:20 AM)</font> <b>codehero:</b></font> well, there&apos;s tentacle p.... forget it<br/>
<font color="#A82F2F"><font size="2">(05:02:25 AM)</font> <b>Irenes:</b></font> I suppose I could try the ritual depicted in http://www.gocomics.com/calvinandhobbes/2012/08/10<br/>
<font color="#A82F2F"><font size="2">(05:02:29 AM)</font> <b>avn_:</b></font> I personally hope sometimes grub in nixos will be capable to be installed to EFI, and don&apos;t touch efi anymore.<br/>
<font color="#A82F2F"><font size="2">(05:02:40 AM)</font> <b>Irenes:</b></font> that’d be great. :)<br/>
<font color="#A82F2F"><font size="2">(05:02:45 AM)</font> <b>avn_:</b></font> I affraid on each rebuild, which pollute /efi<br/>
<font color="#A82F2F"><font size="2">(05:03:08 AM)</font> <b>codehero:</b></font> i hope that gummiboot becomes easier to use with luks and lvm<br/>
<font color="#A82F2F"><font size="2">(05:03:47 AM)</font> <b>Irenes:</b></font> I can guarantee it will become easier if I can make my thing work at all<br/>
<font color="#A82F2F"><font size="2">(05:03:52 AM)</font> <b>Irenes:</b></font> because it will be a pain point for me :)<br/>
<font color="#A82F2F"><font size="2">(05:03:54 AM)</font> <b>avn_:</b></font> I haven&apos;t luks, I suspect is hard to run with my desktop, it very heavy<br/>
<font color="#A82F2F"><font size="2">(05:03:56 AM)</font> <b>codehero:</b></font> especially since gummiboot is now being integrated with systemd<br/>
<font color="#A82F2F"><font size="2">(05:04:09 AM)</font> <b>Irenes:</b></font> interesting, integrated how?<br/>
<font color="#A82F2F"><font size="2">(05:04:51 AM)</font> <b>codehero:</b></font> well. systemd picked up gummiboot and they&apos;re now somehow tying it together with the boot process<br/>
<font color="#A82F2F"><font size="2">(05:04:54 AM)</font> <b>codehero:</b></font> some magic stuff<br/>
<font color="#A82F2F"><font size="2">(05:04:59 AM)</font> <b>Irenes:</b></font> oh<br/>
<font color="#A82F2F"><font size="2">(05:05:00 AM)</font> <b>Irenes:</b></font> joy :)<br/>
<font color="#A82F2F"><font size="2">(05:05:28 AM)</font> <b>codehero:</b></font> yeah :)<br/>
<font color="#A82F2F"><font size="2">(05:06:42 AM)</font> <b>avn_:</b></font> codehero: well, I hope it not follow to pull gummiboot into systemd (as udev)<br/>
<font color="#A82F2F"><font size="2">(05:07:31 AM)</font> <b>codehero:</b></font> well. i&apos;m not sure how they&apos;ll do it<br/>
<font color="#A82F2F"><font size="2">(05:08:18 AM)</font> <b>shlevy:</b></font> gummiboot was originally written by systemd devs<br/>
<font color="#A82F2F"><font size="2">(05:08:23 AM)</font> <b>Irenes:</b></font> it didn’t work although the failure felt slightly different.  sigh :)<br/>
<font color="#A82F2F"><font size="2">(05:08:39 AM)</font> <b>shlevy:</b></font> It&apos;s had a protocol to pass info to init that only systemd has implemented from the beginning<br/>
<font color="#A82F2F"><font size="2">(05:08:47 AM)</font> <b>shlevy:</b></font> Has something changed?<br/>
<font color="#A82F2F"><font size="2">(05:09:05 AM)</font> <b>Irenes:</b></font> mew huh.<br/>
<font color="#A82F2F"><font size="2">(05:10:23 AM)</font> <b>codehero:</b></font> well. i have to go<br/>
<font color="#A82F2F"><font size="2">(05:10:28 AM)</font> <b>codehero:</b></font> good night/day everyone<br/>
<font color="#A82F2F"><font size="2">(05:10:48 AM)</font> <b>Irenes:</b></font> thanks again.  listening was helpful.  have a good time-of-day.<br/>
<font size="2">(05:17:18 AM)</font><b> the-kenny [<em>~moritz@tarn-vedra.de</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(05:17:37 AM)</font> <b>Irenes:</b></font> huh!<br/>
<font color="#A82F2F"><font size="2">(05:17:46 AM)</font> <b>Irenes:</b></font> something stepped on my efi variables *after* nixos-install set them up<br/>
<font color="#A82F2F"><font size="2">(05:38:21 AM)</font> <b>Irenes:</b></font> OKAY<br/>
<font color="#A82F2F"><font size="2">(05:38:26 AM)</font> <b>benley:</b></font> shlevy: what&apos;s this magic gummiboot-to-init systemd protocol you mentioned?<br/>
<font color="#A82F2F"><font size="2">(05:38:26 AM)</font> <b>Irenes:</b></font> I got into gummiboot<br/>
<font color="#A82F2F"><font size="2">(05:38:39 AM)</font> <b>Irenes:</b></font> my boot.nix had set its timeout to null, meaning it wouldn’t display its menu<br/>
<font color="#A82F2F"><font size="2">(05:38:53 AM)</font> <b>Irenes:</b></font> choosing the appropriate item from that menu gives me a black screen<br/>
<font color="#A82F2F"><font size="2">(05:38:55 AM)</font> <b>benley:</b></font> that&apos;s the default for it I think.<br/>
<font color="#A82F2F"><font size="2">(05:38:59 AM)</font> <b>Irenes:</b></font> this is, astonishingly, progress :)<br/>
<font color="#A82F2F"><font size="2">(05:39:02 AM)</font> <b>benley:</b></font> hehe<br/>
<font color="#A82F2F"><font size="2">(05:39:04 AM)</font> <b>Irenes:</b></font> perhaps, but I had also set it explicitly<br/>
<font color="#A82F2F"><font size="2">(05:39:07 AM)</font> <b>benley:</b></font> ah<br/>
<font color="#A82F2F"><font size="2">(05:40:18 AM)</font> <b>sccrstud92:</b></font> anyone here?<br/>
<font color="#A82F2F"><font size="2">(05:40:23 AM)</font> <b>benley:</b></font> yup<br/>
<font color="#A82F2F"><font size="2">(05:40:28 AM)</font> <b>sccrstud92:</b></font> ive got an issue wiht cabal2nix<br/>
<font color="#A82F2F"><font size="2">(05:40:47 AM)</font> <b>sccrstud92:</b></font> im running cabal2nix --shell . &gt; shell.nix<br/>
<font color="#A82F2F"><font size="2">(05:41:03 AM)</font> <b>sccrstud92:</b></font> and the final expression it generates is pkg.env<br/>
<font color="#A82F2F"><font size="2">(05:41:13 AM)</font> <b>sccrstud92:</b></font> but then when i nix-shell<br/>
<font color="#A82F2F"><font size="2">(05:41:27 AM)</font> <b>sccrstud92:</b></font> it says the env attribute is missing<br/>
<font color="#A82F2F"><font size="2">(05:41:43 AM)</font> <b>sccrstud92:</b></font> then i tried replacing pkg.env with simply pkg<br/>
<font color="#A82F2F"><font size="2">(05:41:50 AM)</font> <b>sccrstud92:</b></font> and it seems to be working<br/>
<font color="#A82F2F"><font size="2">(05:41:57 AM)</font> <b>sccrstud92:</b></font> so is this a bug with cabal2nix?<br/>
<font color="#A82F2F"><font size="2">(05:42:29 AM)</font> <b>sccrstud92:</b></font> or did i do something wrong?<br/>
<font color="#062585"><font size="2">(05:42:39 AM)</font> <b>***benley</b></font> is clueless about cabal2nix<br/>
<font color="#A82F2F"><font size="2">(05:42:57 AM)</font> <b>shlevy:</b></font> benley: It&apos;s not inherently systemd specific. Gummiboot sets some efi vars to give information about how long boot took and such. It&apos;s just so far only systemd looks for them<br/>
<font color="#A82F2F"><font size="2">(05:43:13 AM)</font> <b>benley:</b></font> ahh, ok<br/>
<font color="#A82F2F"><font size="2">(05:43:17 AM)</font> <b>benley:</b></font> so nothing major<br/>
<font color="#A82F2F"><font size="2">(05:43:29 AM)</font> <b>shlevy:</b></font> Yeah<br/>
<font size="2">(06:14:53 AM)</font><b> The account has disconnected and you are no longer in this chat. You will automatically rejoin the chat when the account reconnects.</b><br/>
</body></html>
