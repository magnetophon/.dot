<html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Conversation with #nixos at Fri 09 Jan 2015 08:51:27 PM CET on magnetophon@irc.freenode.net (irc)</title></head><body><h3>Conversation with #nixos at Fri 09 Jan 2015 08:51:27 PM CET on magnetophon@irc.freenode.net (irc)</h3>
<font size="2">(08:51:27 PM)</font><b> The topic for #nixos is: <a href="http://nixos.org/">http://nixos.org/</a> || Latest NixOS: <a href="http://nixos.org/nixos/download.html">http://nixos.org/nixos/download.html</a> || Latest Nix: <a href="http://nixos.org/nix/download.html">http://nixos.org/nix/download.html</a> || Logs: <a href="http://nixos.org/irc/logs/">http://nixos.org/irc/logs/</a> || Swag: <a href="http://www.cafepress.co.uk/NixOS">http://www.cafepress.co.uk/NixOS</a></b><br/>
<font size="2">(08:51:27 PM)</font><b> Topic for #nixos set by niksnut!~eelco@ec2-54-216-36-73.eu-west-1.compute.amazonaws.com at 12:56:59 PM on 04/11/2014</b><br/>
<font color="#16569E"><font size="2">(08:54:52 PM)</font> <b>magnetophon:</b></font> To all the audio folks in here: We have a rt-kernel!!!  Made by henrytill and a bit by me. I'm running a netbook's built-in soundcard at 3*32 sample latency, xrun-free!!!!   Woohoooo!  <br/>
<font color="#A82F2F"><font size="2">(08:56:26 PM)</font> <b>henrytill:</b></font> it works!<br/>
<font color="#16569E"><font size="2">(08:57:50 PM)</font> <b>magnetophon:</b></font> beyond all expectations.  In debian, this meager netbook wouldn't go under 3*256 samples, and even then it'd have some xruns!<br/>
<font color="#A82F2F"><font size="2">(08:58:22 PM)</font> <b>henrytill:</b></font> excellent<br/>
<font color="#A82F2F"><font size="2">(08:58:45 PM)</font> <b>henrytill:</b></font> https://github.com/musnix/musnix<br/>
<font color="#A82F2F"><font size="2">(08:58:55 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] shlevy pushed 1 new commit to master: http://git.io/Orrqgw<br/>
<font color="#A82F2F"><font size="2">(08:58:55 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master b1c3c32 Shea Levy: Miscellaneous ghcHEAD fixes<br/>
<font color="#A82F2F"><font size="2">(08:59:19 PM)</font> <b>henrytill:</b></font> for those interested<br/>
<font color="#16569E"><font size="2">(08:59:21 PM)</font> <b>magnetophon:</b></font> I guess it's time to install NixOS on my studio PC! <br/>
<font color="#16569E"><font size="2">(08:59:50 PM)</font> <b>magnetophon:</b></font> henrytill: thanks a million!<br/>
<font size="2">(09:01:02 PM)</font><b> Ankhers`` is now known as Ankhers</b><br/>
<font color="#16569E"><font size="2">(09:01:04 PM)</font> <b>magnetophon:</b></font> Oh, and I almost forgot aszlig, who's rock-fabrik kernel config was also used!  Thanks!<br/>
<font color="#A82F2F"><font size="2">(09:04:07 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] shlevy pushed 1 new commit to master: http://git.io/DInvJA<br/>
<font color="#A82F2F"><font size="2">(09:04:07 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master d2566a1 Shea Levy: hackage-packages.nix: Update to 2015/01/09-20:00 UTC...<br/>
<font color="#A82F2F"><font size="2">(09:05:36 PM)</font> <b>shlevy:</b></font> sigh<br/>
<font color="#062585"><font size="2">(09:05:41 PM)</font> <b>***shlevy</b></font> rebuilds the world<br/>
<font color="#A82F2F"><font size="2">(09:06:05 PM)</font> <b>devoid:</b></font> so for service plugins I&apos;m looking a bit at the way that the graphite plugin did it&apos;s work: https://github.com/NixOS/nixpkgs/blob/master/nixos/modules/services/monitoring/graphite.nix<br/>
<font color="#A82F2F"><font size="2">(09:06:26 PM)</font> <b>devoid:</b></font> the writeTextOrNull pattern<br/>
<font color="#A82F2F"><font size="2">(09:07:58 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] jwiegley pushed 1 new commit to master: http://git.io/-aFWAw<br/>
<font color="#A82F2F"><font size="2">(09:07:58 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 2aec1b0 John Wiegley: coqPackages.fiat: new expression<br/>
<font color="#A82F2F"><font size="2">(09:09:04 PM)</font> <b>devoid:</b></font> it seems like a reasonable thing would be to have something like: jenkins.plugins.foo.enable = true; which would cause the service to add the plugin to it&apos;s build, like it does here https://github.com/NixOS/nixpkgs/blob/master/nixos/modules/services/monitoring/graphite.nix#L411<br/>
<font color="#A82F2F"><font size="2">(09:09:10 PM)</font> <b>devoid:</b></font> is this a reasonable way to approach this?<br/>
<font color="#A82F2F"><font size="2">(09:09:30 PM)</font> <b>devoid:</b></font> I feel like it&apos;s straining nix and not very functional / declarative.<br/>
<font color="#A82F2F"><font size="2">(09:11:10 PM)</font> <b>deepfire:</b></font> shlevy, what plans do you have for defnix?<br/>
<font color="#A82F2F"><font size="2">(09:11:37 PM)</font> <b>deepfire:</b></font> ..if that isn&apos;t a question too intimate..<br/>
<font color="#A82F2F"><font size="2">(09:13:25 PM)</font> <b>devoid:</b></font> yea, nix is starting to feel like http://i.imgur.com/n2NksCD.jpg<br/>
<font color="#A82F2F"><font size="2">(09:15:24 PM)</font> <b>shlevy:</b></font> deepfire: World domination<br/>
<font color="#A82F2F"><font size="2">(09:16:40 PM)</font> <b>_deepfire:</b></font> shlevy, do these plans include an alternative Nix evaluator?<br/>
<font color="#A82F2F"><font size="2">(09:17:30 PM)</font> <b>shlevy:</b></font> deepfire: More seriously, we&apos;ve identified some weaknesses in the NixOS/nixops model that we&apos;re trying to experiment around<br/>
<font color="#A82F2F"><font size="2">(09:18:01 PM)</font> <b>shlevy:</b></font> deepfire: Not specifically... there&apos;s hnix which is a work in progress, and if it works well we&apos;ll probablyw ant to switch to it so that we can write haskell instead of C++<br/>
<font color="#A82F2F"><font size="2">(09:18:15 PM)</font> <b>_deepfire:</b></font> shlevy, is there any place one can read about that weakness?<br/>
<font color="#A82F2F"><font size="2">(09:18:53 PM)</font> <b>shlevy:</b></font> deepfire: And then I have an as-yet unnamed in-progress project to replace the &quot;store&quot; level of nix, which there&apos;s an issue for: https://github.com/zalora/defnix/issues/16<br/>
<font color="#A82F2F"><font size="2">(09:20:39 PM)</font> <b>shlevy:</b></font> _deepfire: Not written up anywhere yet. Once we have something we feel is stable enough to announce, we&apos;ll write that up.<br/>
<font color="#A82F2F"><font size="2">(09:21:14 PM)</font> <b>_deepfire:</b></font> shlevy, all this sounds quite fascinating..<br/>
<font color="#A82F2F"><font size="2">(09:21:34 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] jwiegley pushed 1 new commit to master: http://git.io/pvZAAA<br/>
<font color="#A82F2F"><font size="2">(09:21:34 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 443301e John Wiegley: coqPackages.fiat: correct installation directory<br/>
<font color="#A82F2F"><font size="2">(09:21:36 PM)</font> <b>shlevy:</b></font> _deepfire: But FWIW I don&apos;t expect defnix to be the best choice for personal machines. It&apos;s more for the &quot;automated deployment&quot; feature set that nixops/disnix try to cover<br/>
<font color="#A82F2F"><font size="2">(09:21:58 PM)</font> <b>_deepfire:</b></font> shlevy, a not entirely unrelated question, if I may..<br/>
<font color="#A82F2F"><font size="2">(09:22:08 PM)</font> <b>shlevy:</b></font> sure<br/>
<font color="#A82F2F"><font size="2">(09:23:23 PM)</font> <b>_deepfire:</b></font> shlevy, do you feel that NixOS has a coherent story with regard to allow proprietary vendors to target fixed ABIs ?<br/>
<font color="#A82F2F"><font size="2">(09:24:17 PM)</font> <b>_deepfire:</b></font> shlevy, the problem like Valve currently tries to solve, by distributing a fixed Ubuntu runtime within SteamOS<br/>
<font color="#A82F2F"><font size="2">(09:24:44 PM)</font> <b>shlevy:</b></font> _deepfire: That&apos;s &quot;before&quot; the level of NixOS. I think that&apos;s solved by nix + nixpkgs pretty well<br/>
<font color="#A82F2F"><font size="2">(09:25:17 PM)</font> <b>shlevy:</b></font> _deepfire: Vendors can distribute a nix closure with exactly the deps they need (as long as th ekernel version has the needed features)<br/>
<font color="#A82F2F"><font size="2">(09:25:39 PM)</font> <b>shlevy:</b></font> Better than fixed ABI, which is of course always approximate, they get fixed actual versions.<br/>
<font color="#A82F2F"><font size="2">(09:26:54 PM)</font> <b>_deepfire:</b></font> this problem is all the rage nowadays.. people talk about CoreOS, the Poettering btrfs proposal, various Docker-based options..<br/>
<font color="#A82F2F"><font size="2">(09:31:22 PM)</font> <b>_deepfire:</b></font> there&apos;s a recent LWN article on NixOS that illustrates this: http://lwn.net/Articles/628548/<br/>
<font color="#A82F2F"><font size="2">(09:31:55 PM)</font> <b>_deepfire:</b></font> what got me surprised is how no-one from the NixOS fame has chimed in..<br/>
<font color="#A82F2F"><font size="2">(09:34:38 PM)</font> <b>wkennington:</b></font> well, considering most people don&apos;t understand what they are talking about, it&apos;s not worth it<br/>
<font color="#A82F2F"><font size="2">(09:35:11 PM)</font> <b>wkennington:</b></font> *most people in the comments on lwn<br/>
<font color="#A82F2F"><font size="2">(09:36:35 PM)</font> <b>_deepfire:</b></font> wkennington, it&apos;s a way to look at it, yes<br/>
<font color="#A82F2F"><font size="2">(09:36:50 PM)</font> <b>_deepfire:</b></font> wkennington, but I see it as a kind of &quot;worldview warfare&quot;<br/>
<font color="#A82F2F"><font size="2">(09:37:14 PM)</font> <b>_deepfire:</b></font> wkennington, technological superiority needs a social basis<br/>
<font color="#A82F2F"><font size="2">(09:38:59 PM)</font> <b>_deepfire:</b></font> ideas need dissemination to thrive<br/>
<font color="#A82F2F"><font size="2">(09:40:20 PM)</font> <b>_deepfire:</b></font> and of all OSS news outlets, LWN has a crowd which tends to be.. more thoughtful, on average<br/>
<font color="#A82F2F"><font size="2">(09:52:34 PM)</font> <b>johnw:</b></font> if I have a tarballs that Nix wants to download, how can I stop it from downloading it again?  I had thought that just doing a prefetch of a local file would register it in the store, but that&apos;s not working<br/>
<font color="#A82F2F"><font size="2">(09:54:01 PM)</font> <b>_deepfire:</b></font> ..I had the same question coming up in the past..<br/>
<font color="#A82F2F"><font size="2">(09:54:19 PM)</font> <b>pmahoney:</b></font> johnw: prefetch with file:///$PWD/file.xz has worked for me, but the filename must match what nix would be downloading<br/>
<font color="#A82F2F"><font size="2">(09:54:30 PM)</font> <b>johnw:</b></font> yeah, it does<br/>
<font color="#A82F2F"><font size="2">(09:54:41 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] shlevy pushed 1 new commit to master: http://git.io/fconCw<br/>
<font color="#A82F2F"><font size="2">(09:54:41 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 473b0d9 Shea Levy: Revert &quot;hackage-packages.nix: Update to 2015/01/09-20:00 UTC&quot;...<br/>
<font color="#A82F2F"><font size="2">(09:55:07 PM)</font> <b>johnw:</b></font> so, after using nix-prefetch-url<br/>
<font color="#A82F2F"><font size="2">(09:55:09 PM)</font> <b>johnw:</b></font> I cd into /nix/store<br/>
<font color="#A82F2F"><font size="2">(09:55:13 PM)</font> <b>johnw:</b></font> and the file isn&apos;t there<br/>
<font color="#A82F2F"><font size="2">(09:55:45 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] shlevy pushed 1 new commit to master: http://git.io/YT7vSA<br/>
<font color="#A82F2F"><font size="2">(09:55:45 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 4d325bc Shea Levy: haskellng: bump text-icu...<br/>
<font color="#A82F2F"><font size="2">(10:02:00 PM)</font> <b>_deepfire:</b></font> I can&apos;t vouch for this, but I think that NixOS tends to re-download the same tarball over and over, placing it at different store paths, if the build fails for some reason<br/>
<font color="#A82F2F"><font size="2">(10:02:36 PM)</font> <b>_deepfire:</b></font> my memory can be unreliable, though<br/>
<font color="#A82F2F"><font size="2">(10:03:47 PM)</font> <b>zmbmartin:</b></font> I have a CDPATH set in my bashrc but it isn&apos;t working. Do I need to do something to make that work?<br/>
<font color="#A82F2F"><font size="2">(10:06:20 PM)</font> <b>johnw:</b></font> even with $NIX_OTHER_STORES it doesn&apos;t see that I already have this tarball<br/>
<font color="#A82F2F"><font size="2">(10:06:33 PM)</font> <b>johnw:</b></font> lame<br/>
<font color="#A82F2F"><font size="2">(10:08:12 PM)</font> <b>devoid:</b></font> what&apos;s the way to do the opposite of make-symlinks?<br/>
<font color="#A82F2F"><font size="2">(10:08:35 PM)</font> <b>devoid:</b></font> &quot;ln -s $out/$file $dir/$file&quot;?<br/>
<font color="#A82F2F"><font size="2">(10:16:09 PM)</font> <b>devoid:</b></font> or is there something like environment.etc for stuff in /var ?<br/>
<font color="#A82F2F"><font size="2">(10:16:38 PM)</font> <b>ktosiek:</b></font> _deepfire: that&apos;d only happen if the fetchurl checksum is wrong<br/>
<font color="#A82F2F"><font size="2">(10:17:03 PM)</font> <b>ktosiek:</b></font> but not with different store paths...<br/>
<font color="#A82F2F"><font size="2">(10:18:08 PM)</font> <b>_deepfire:</b></font> ktosiek, for one, I don&apos;t see the behavior I just described in my recent nix-1.8 build failures, so you may well be right<br/>
<font color="#A82F2F"><font size="2">(10:18:35 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] shlevy pushed 1 new commit to master: http://git.io/vEkY7w<br/>
<font color="#A82F2F"><font size="2">(10:18:35 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 69f5738 Shea Levy: attoparsec: Fix build for 7.10<br/>
<font color="#A82F2F"><font size="2">(10:19:04 PM)</font> <b>_deepfire:</b></font> ktosiek, for another.. well, /think/ I have seen some redownloads in the past..<br/>
<font color="#A82F2F"><font size="2">(10:20:31 PM)</font> <b>_deepfire:</b></font> I understand it&apos;s not much useful of a statement..<br/>
<font color="#A82F2F"><font size="2">(10:20:37 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] jwiegley pushed 1 new commit to master: http://git.io/2_LWiw<br/>
<font color="#A82F2F"><font size="2">(10:20:37 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 7535398 John Wiegley: coqPackages.fiat: enable building the examples as a test<br/>
<font color="#A82F2F"><font size="2">(10:23:16 PM)</font> <b>devoid:</b></font> how do you enumerate keys / values in a set?<br/>
<font color="#A82F2F"><font size="2">(10:24:57 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] shlevy pushed 1 new commit to master: http://git.io/WcE4lg<br/>
<font color="#A82F2F"><font size="2">(10:24:57 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master dd558e0 Shea Levy: Disable old-locale for aeson on 7.10...<br/>
<font color="#A82F2F"><font size="2">(10:26:38 PM)</font> <b>devoid:</b></font> or is there a more complete language reference than http://nixos.org/nix/manual/ ?<br/>
<font color="#A82F2F"><font size="2">(10:26:58 PM)</font> <b>devoid:</b></font> because it feels like lack of enumeration is a pretty big hole there?<br/>
<font color="#A82F2F"><font size="2">(10:29:15 PM)</font> <b>shlevy:</b></font> devoid: attrNames<br/>
<font color="#A82F2F"><font size="2">(10:29:23 PM)</font> <b>shlevy:</b></font> That should be documented in the manual<br/>
<font color="#A82F2F"><font size="2">(10:30:49 PM)</font> <b>devoid:</b></font> shievy, thanks, yea now I see it in the long section of functions<br/>
<font color="#A82F2F"><font size="2">(10:31:40 PM)</font> <b>devoid:</b></font> perhaps section 14 could include more examples working with different data types.<br/>
<font color="#A82F2F"><font size="2">(10:35:58 PM)</font> <b>zmbmartin:</b></font> if I have some config stuff I want just for my user. Is there a per user config?<br/>
<font color="#A82F2F"><font size="2">(10:36:43 PM)</font> <b>zmbmartin:</b></font> I want to set some bash stuff like alias and such<br/>
<font color="#A82F2F"><font size="2">(10:37:26 PM)</font> <b>zmbmartin:</b></font> Would I use ~/.nixpkgs/config.nix<br/>
<font color="#A82F2F"><font size="2">(10:41:22 PM)</font> <b>Oejet:</b></font> zmbmartin: Are you sure that bashrc is being sourced? You can do it manually with `source ~/.bashrc`.<br/>
<font color="#A82F2F"><font size="2">(10:42:19 PM)</font> <b>Oejet:</b></font> zmbmartin: (about CDPATH above)<br/>
<font color="#A82F2F"><font size="2">(10:42:59 PM)</font> <b>pierron:</b></font> Who want some stickers?<br/>
<font color="#A82F2F"><font size="2">(10:52:31 PM)</font> <b>zmbmartin:</b></font> Oejet: Yes it was being sources. Oddly enough if I use the bash options in configuration.nix it works.<br/>
<font color="#A82F2F"><font size="2">(10:53:26 PM)</font> <b>osa1:</b></font> hi all. let&apos;s say I created a nix config for my package using cabal2nix. now I want to create 6 envorinments, using 3 different GHC versions and profiling versions for each GHC. how do I do that? (I don&apos;t have nix working yet, I&apos;m just asking to see if this is possible and how easy is this)<br/>
<font color="#A82F2F"><font size="2">(10:53:38 PM)</font> <b>johnw:</b></font> hello!<br/>
<font color="#A82F2F"><font size="2">(10:53:54 PM)</font> <b>johnw:</b></font> so, once you have your cabal2nix generated default.nix file<br/>
<font color="#A82F2F"><font size="2">(10:54:10 PM)</font> <b>johnw:</b></font> you can import it into any of the haskellPackages aggregates, for any GHC version, in your config.nix file<br/>
<font color="#A82F2F"><font size="2">(10:54:32 PM)</font> <b>johnw:</b></font> then you can install: pkgs.haskellPackages_ghc763.foo, pkgs.haskellPackages_ghc763_profiling.foo, pkgs.haskellPackages_ghc784.foo, etc.<br/>
<font color="#A82F2F"><font size="2">(10:54:45 PM)</font> <b>johnw:</b></font> now, this is the old way of doing things, which will be obsolete soon<br/>
<font color="#A82F2F"><font size="2">(10:54:49 PM)</font> <b>johnw:</b></font> and I don&apos;t know how the new way works yet<br/>
<font color="#A82F2F"><font size="2">(10:54:58 PM)</font> <b>johnw:</b></font> but you can get things going under this scheme for now<br/>
<font color="#A82F2F"><font size="2">(10:55:33 PM)</font> <b>osa1:</b></font> so this config.nix file is the config file I use to run nix-shell, right? basically it&apos;ll create new envorinments for me that has all the stuff symlinked<br/>
<font color="#A82F2F"><font size="2">(10:55:46 PM)</font> <b>johnw:</b></font> there are two ways to do it<br/>
<font color="#A82F2F"><font size="2">(10:55:50 PM)</font> <b>johnw:</b></font> a standalone .nix file<br/>
<font color="#A82F2F"><font size="2">(10:55:58 PM)</font> <b>johnw:</b></font> and a .nix file that you refer to from config.nix<br/>
<font color="#A82F2F"><font size="2">(10:56:14 PM)</font> <b>johnw:</b></font> I have a script that allows me to use either one: https://github.com/jwiegley/nix-config<br/>
<font color="#A82F2F"><font size="2">(10:56:18 PM)</font> <b>johnw:</b></font> see &quot;nix-cabal-build&quot;<br/>
<font color="#A82F2F"><font size="2">(10:56:25 PM)</font> <b>johnw:</b></font> it auto-generates the default.nix on-demand<br/>
<font color="#A82F2F"><font size="2">(10:56:50 PM)</font> <b>johnw:</b></font> now, see in that script where it says pkgs.haskellPackages?<br/>
<font color="#A82F2F"><font size="2">(10:56:56 PM)</font> <b>johnw:</b></font> that&apos;s what you&apos;d change to vary the GHC version<br/>
<font color="#A82F2F"><font size="2">(10:57:10 PM)</font> <b>johnw:</b></font> so you might want to conditionalize it with a variable or something<br/>
<font color="#A82F2F"><font size="2">(10:57:14 PM)</font> <b>johnw:</b></font> like pkgs.haskellPackages$version<br/>
<font color="#A82F2F"><font size="2">(10:57:18 PM)</font> <b>johnw:</b></font> and add a flag for changing the version<br/>
<font color="#A82F2F"><font size="2">(10:57:47 PM)</font> <b>osa1:</b></font> I guess I&apos;ll go with standalone versions. I imagegine something like this: I hvae 6 different nix files, and I just nix-shell using them and start enjoying the environment<br/>
<font color="#A82F2F"><font size="2">(10:58:02 PM)</font> <b>johnw:</b></font> try using nix-cabal-shell<br/>
<font color="#A82F2F"><font size="2">(10:58:14 PM)</font> <b>johnw:</b></font> (in that same repo)<br/>
<font color="#A82F2F"><font size="2">(10:58:22 PM)</font> <b>johnw:</b></font> it has worked very well for me so far<br/>
<font color="#A82F2F"><font size="2">(10:58:55 PM)</font> <b>johnw:</b></font>  however, there is one situation where this is just too simplistic: that&apos;s where you have a project that has multiple internal dependencies, and you need for a dependency to rebuild when you try to go into the shelf for a downstream project<br/>
<font color="#A82F2F"><font size="2">(10:59:07 PM)</font> <b>johnw:</b></font> s/shelf/shell<br/>
<font color="#A82F2F"><font size="2">(10:59:25 PM)</font> <b>johnw:</b></font>  for that, I have a different example file, if that describes your scenario<br/>
<font color="#A82F2F"><font size="2">(11:00:48 PM)</font> <b>zmbmartin:</b></font> I tried adding a ~/.nixpkgs/config.nix and modifying bash settings but that did not work. I have my own .bashrc but then CDPATH is not working. What should I be doing?<br/>
<font color="#A82F2F"><font size="2">(11:02:03 PM)</font> <b>osa1:</b></font> johnw: are those too hard to do if I don&apos;t use nixos? I just installed nix on my system and I&apos;m wondering if it&apos;ll recompile huge amounts of stuff<br/>
<font color="#A82F2F"><font size="2">(11:02:38 PM)</font> <b>johnw:</b></font> I don&apos;t use nixos :)<br/>
<font color="#A82F2F"><font size="2">(11:02:49 PM)</font> <b>johnw:</b></font> and yes, it&apos;ll probably compile huge amounts of stuff :)<br/>
<font color="#A82F2F"><font size="2">(11:02:58 PM)</font> <b>osa1:</b></font> ;-(<br/>
<font color="#A82F2F"><font size="2">(11:03:02 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] shlevy pushed 1 new commit to master: http://git.io/C25t6A<br/>
<font color="#A82F2F"><font size="2">(11:03:02 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 60fec84 Shea Levy: Disable split testsuite on 7.10<br/>
<font color="#A82F2F"><font size="2">(11:03:02 PM)</font> <b>johnw:</b></font> Nixis a great coffee break generator<br/>
<font color="#A82F2F"><font size="2">(11:03:12 PM)</font> <b>shlevy:</b></font> :D<br/>
<font color="#A82F2F"><font size="2">(11:03:14 PM)</font> <b>osa1:</b></font> heh :p<br/>
<font color="#A82F2F"><font size="2">(11:03:33 PM)</font> <b>johnw:</b></font> i&apos;m waiting on large Nix builds inside 3 VMs that were started last night, so I&apos;m mostly immune<br/>
<font color="#A82F2F"><font size="2">(11:03:39 PM)</font> <b>osa1:</b></font> so one other thing that I don&apos;t like is that my nix installation is looking for /nix instead of /home/myUser/nix<br/>
<font color="#A82F2F"><font size="2">(11:03:41 PM)</font> <b>osa1:</b></font> why is that so?<br/>
<font color="#A82F2F"><font size="2">(11:03:57 PM)</font> <b>johnw:</b></font> because /nix is the canonical location<br/>
<font color="#A82F2F"><font size="2">(11:04:01 PM)</font> <b>johnw:</b></font> I think it&apos;s even hard-coded<br/>
<font color="#A82F2F"><font size="2">(11:04:10 PM)</font> <b>osa1:</b></font> so it has to be this way?<br/>
<font color="#A82F2F"><font size="2">(11:04:14 PM)</font> <b>osa1:</b></font> but why?<br/>
<font color="#A82F2F"><font size="2">(11:04:17 PM)</font> <b>johnw:</b></font> can anyone else confirm or deny that?<br/>
<font color="#A82F2F"><font size="2">(11:04:18 PM)</font> <b>shlevy:</b></font> You can use nix in a different place<br/>
<font color="#A82F2F"><font size="2">(11:04:22 PM)</font> <b>johnw:</b></font> shlevy: how?<br/>
<font color="#A82F2F"><font size="2">(11:04:54 PM)</font> <b>pmahoney:</b></font> osa1: i&apos;m not sure if it&apos;s hard coded, but all the precompiled binaries require /nix (so you&apos;ll be compiling a lot if you don&apos;t use /nix)<br/>
<font color="#A82F2F"><font size="2">(11:05:04 PM)</font> <b>shlevy:</b></font> configure time flag, and some env vars (https://github.com/NixOS/nix/blob/master/tests/common.sh.in#L6-L18)<br/>
<font color="#A82F2F"><font size="2">(11:05:11 PM)</font> <b>shlevy:</b></font> either-or<br/>
<font color="#A82F2F"><font size="2">(11:05:17 PM)</font> <b>shlevy:</b></font> But you lose prebuilt binaries<br/>
<font color="#A82F2F"><font size="2">(11:05:57 PM)</font> <b>osa1:</b></font> pmahoney: oh so I can use pre-compiled binaries? johnw so why are you compiling all those stuff? because they&apos;re not available in the repository?<br/>
<font color="#A82F2F"><font size="2">(11:06:14 PM)</font> <b>johnw:</b></font> I&apos;m on a hemorraghic bleeding edge<br/>
<font color="#A82F2F"><font size="2">(11:06:27 PM)</font> <b>johnw:</b></font> I don&apos;t think there are binaries yet for what I&apos;m building<br/>
<font color="#A82F2F"><font size="2">(11:08:25 PM)</font> <b>osa1:</b></font> so how does nix find pre-compiled binaries for a build with specific hash and how does it know that the binary is not a hacked version?<br/>
<font color="#A82F2F"><font size="2">(11:08:42 PM)</font> <b>johnw:</b></font> it uses checksums<br/>
<font color="#A82F2F"><font size="2">(11:08:54 PM)</font> <b>osa1:</b></font> but it doesn&apos;t know checksums of compiled binaries<br/>
<font color="#A82F2F"><font size="2">(11:09:02 PM)</font> <b>johnw:</b></font> actually, it kind of does<br/>
<font color="#A82F2F"><font size="2">(11:09:05 PM)</font> <b>osa1:</b></font> because it can&apos;t know without compiling first<br/>
<font color="#A82F2F"><font size="2">(11:09:09 PM)</font> <b>osa1:</b></font> hm, how?<br/>
<font color="#A82F2F"><font size="2">(11:09:18 PM)</font> <b>johnw:</b></font> it knows a checksum which is derived from the build inputs<br/>
<font color="#A82F2F"><font size="2">(11:09:41 PM)</font> <b>johnw:</b></font> shlevy knows much more about this scheme than I do<br/>
<font color="#A82F2F"><font size="2">(11:11:12 PM)</font> <b>gridaphobe:</b></font> osa1: the checksum is based on the nix expression and the checksums of all of the build-inputs<br/>
<font color="#A82F2F"><font size="2">(11:15:03 PM)</font> <b>osa1:</b></font> ok so you never need hash of binaries, right? you just need to trust nix build file for your package.<br/>
<font color="#A82F2F"><font size="2">(11:15:28 PM)</font> <b>osa1:</b></font> and then you also need to trust to the server that distributes pre-compiled binaries. e.g. if it really maps build files to correct binaries<br/>
<font color="#A82F2F"><font size="2">(11:16:24 PM)</font> <b>johnw:</b></font> right, I guess at some point somebody has to know how the hash of the build inputs relates to the hash of the build outputs<br/>
<font color="#A82F2F"><font size="2">(11:16:32 PM)</font> <b>johnw:</b></font> and you have to trust that source<br/>
<font color="#A82F2F"><font size="2">(11:16:42 PM)</font> <b>johnw:</b></font> so, it&apos;s probably hackable right now<br/>
<font color="#A82F2F"><font size="2">(11:17:38 PM)</font> <b>osa1:</b></font> or just compile everything, starting from scratch, in your build farm. anyway, this is my first exposure to nix and I really liked the idea<br/>
<font color="#A82F2F"><font size="2">(11:17:56 PM)</font> <b>kmicu:</b></font> http://nixos.org/docs/papers.html<br/>
<font color="#A82F2F"><font size="2">(11:18:29 PM)</font> <b>johnw:</b></font> osa1: then welcome!<br/>
<font color="#A82F2F"><font size="2">(11:18:37 PM)</font> <b>osa1:</b></font> something like nix but specific to cabal would be great for me. e.g. cabal sandbox should really work like nix environments(including the ability to use pre-compiled binaries) and cabal sandbox exec should really run a shell with all the stuff symlinked etc.<br/>
<font color="#A82F2F"><font size="2">(11:18:37 PM)</font> <b>johnw:</b></font> osa1: I&apos;m still loving it<br/>
<font color="#A82F2F"><font size="2">(11:18:55 PM)</font> <b>johnw:</b></font> well, specific to cabal wouldn&apos;t have the beauty of also sandboxing non-Hackage dependencies<br/>
<font color="#A82F2F"><font size="2">(11:19:02 PM)</font> <b>johnw:</b></font> like multiple versions of pcre or something like that<br/>
<font color="#A82F2F"><font size="2">(11:19:10 PM)</font> <b>osa1:</b></font> hm right<br/>
<font color="#A82F2F"><font size="2">(11:19:14 PM)</font> <b>johnw:</b></font> but Nix handles it all seamlessly, top to bottom<br/>
<font color="#A82F2F"><font size="2">(11:19:19 PM)</font> <b>osa1:</b></font> yeah of course nix is the most general solution<br/>
<font color="#A82F2F"><font size="2">(11:20:00 PM)</font> <b>osa1:</b></font> the problem of being this general is that for something haskell specific, you need to learn something that is not part of haskell ecosystem. (e.g. not Haskell language and not Cabal config file) I guess I&apos;m just too lazy :p<br/>
<font color="#A82F2F"><font size="2">(11:20:35 PM)</font> <b>johnw:</b></font> yeah, but like Haskell, it&apos;s worth the effort expended<br/>
<font color="#A82F2F"><font size="2">(11:20:47 PM)</font> <b>johnw:</b></font> because those skills will carry over to non-Haskell uses of nix as well<br/>
<font color="#A82F2F"><font size="2">(11:20:53 PM)</font> <b>osa1:</b></font> true<br/>
<font color="#A82F2F"><font size="2">(11:20:56 PM)</font> <b>johnw:</b></font> I also use Nix for sandboxing C++ development<br/>
<font color="#A82F2F"><font size="2">(11:21:10 PM)</font> <b>benley:</b></font> sweet, I figured out how to get distributed builds working<br/>
<font color="#A82F2F"><font size="2">(11:21:23 PM)</font> <b>benley:</b></font> I was like 99.9% of the way there last night, I just overlooked a typo<br/>
<font color="#A82F2F"><font size="2">(11:21:57 PM)</font> <b>benley:</b></font> nix really beats the hell out of the network to do distributed builds, it turns out<br/>
<font color="#A82F2F"><font size="2">(11:23:14 PM)</font> <b>benley:</b></font> pierron: stickers you say?<br/>
<font color="#A82F2F"><font size="2">(11:25:22 PM)</font> <b>ktosiek:</b></font> distributed builds send all the inputs, right?<br/>
<font color="#A82F2F"><font size="2">(11:26:56 PM)</font> <b>benley:</b></font> yeah, think so<br/>
<font color="#A82F2F"><font size="2">(11:27:09 PM)</font> <b>benley:</b></font> via nix-send-closure or equivalent thereof<br/>
<font color="#A82F2F"><font size="2">(11:27:18 PM)</font> <b>benley:</b></font> err nix-copy-closure<br/>
<font color="#A82F2F"><font size="2">(11:27:55 PM)</font> <b>benley:</b></font> actually I&apos;m not sure if it sends all the inputs from the client or if the build machine can substitute from a binary cache if one is available<br/>
<font color="#A82F2F"><font size="2">(11:28:26 PM)</font> <b>ktosiek:</b></font> it&apos;d be nice if it used substitution (I want to have a builder on DO)<br/>
<font color="#A82F2F"><font size="2">(11:29:37 PM)</font> <b>osa1:</b></font> so will my nix installation try to download pre-compiled binaries by default or do I need to enable some options, set up repositories etc?<br/>
<font color="#A82F2F"><font size="2">(11:29:50 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] muflax opened pull request #5678: awscli: bump version and fix missing runtime dependency (master...awscli) http://git.io/Jcpuzw<br/>
<font color="#A82F2F"><font size="2">(11:30:11 PM)</font> <b>benley:</b></font> osa1: it will use prebuilt binaries by default<br/>
<font color="#A82F2F"><font size="2">(11:30:14 PM)</font> <b>ktosiek:</b></font> osa1: it will download from http://cache.nixos.org/ by default<br/>
<font color="#A82F2F"><font size="2">(11:30:21 PM)</font> <b>osa1:</b></font> awesome<br/>
<font color="#A82F2F"><font size="2">(11:30:46 PM)</font> <b>benley:</b></font> ktosiek: the way it works now I&apos;m not sure if it will make sense to do distributed builds over a WAN link<br/>
<font color="#A82F2F"><font size="2">(11:30:59 PM)</font> <b>c74d:</b></font> Not &lt;https://cache.nixos.org&gt;?<br/>
<font color="#A82F2F"><font size="2">(11:31:33 PM)</font> <b>ktosiek:</b></font> cat ~/.nix-defexpr/channels/binary-caches/nixpkgs says &quot;http://cache.nixos.org&quot;<br/>
<font color="#A82F2F"><font size="2">(11:32:06 PM)</font> <b>c74d:</b></font> Oh right... I just filed an issue report about that.<br/>
<font color="#A82F2F"><font size="2">(11:32:22 PM)</font> <b>c74d:</b></font> &gt;_&gt;<br/>
<font color="#A82F2F"><font size="2">(11:32:43 PM)</font> <b>ktosiek:</b></font> short memory?<br/>
<font color="#A82F2F"><font size="2">(11:33:29 PM)</font> <b>benley:</b></font> doesn&apos;t it not matter if binary caches are https, on account of sha256 hashing everything?<br/>
<font color="#A82F2F"><font size="2">(11:33:45 PM)</font> <b>ktosiek:</b></font> benley: hm?<br/>
<font color="#A82F2F"><font size="2">(11:34:03 PM)</font> <b>ktosiek:</b></font> oh, but only the nix expressions and input files are hashed<br/>
<font color="#A82F2F"><font size="2">(11:34:12 PM)</font> <b>benley:</b></font> Ohhhhhhhh.<br/>
<font color="#A82F2F"><font size="2">(11:34:26 PM)</font> <b>benley:</b></font> so network tampering is still a risk? I didn&apos;t realize.<br/>
<font color="#A82F2F"><font size="2">(11:34:29 PM)</font> <b>osa1:</b></font> I&apos;m wondering if I&apos;m doing anything. I installed nix using standard configure &amp;&amp; make &amp;&amp; make install stuff(without changing --prefix) and it installed it in /usr/local. now if I run sudo nix-env it can&apos;t find nix-env binary because it&apos;s in /usr/local/bin and not in /usr/bin<br/>
<font color="#A82F2F"><font size="2">(11:34:31 PM)</font> <b>ktosiek:</b></font> nix has to know the path&apos;s hash before it starts building it, so...<br/>
<font color="#A82F2F"><font size="2">(11:34:37 PM)</font> <b>ktosiek:</b></font> benley: yes, it is<br/>
<font color="#A82F2F"><font size="2">(11:34:45 PM)</font> <b>c74d:</b></font> ? D:<br/>
<font color="#A82F2F"><font size="2">(11:35:39 PM)</font> <b>benley:</b></font> ktosiek: any hope of improving that in the future with signing or output hashing or something?<br/>
<font color="#A82F2F"><font size="2">(11:35:59 PM)</font> <b>ktosiek:</b></font> osa1: sounds like a bug to me<br/>
<font color="#A82F2F"><font size="2">(11:36:07 PM)</font> <b>benley:</b></font> I love the way Debian has an end-to-end gpg trust chain<br/>
<font color="#A82F2F"><font size="2">(11:36:36 PM)</font> <b>osa1:</b></font> ktosiek: what&apos;s the problem here? should default prefix be /usr ?<br/>
<font color="#A82F2F"><font size="2">(11:36:40 PM)</font> <b>ktosiek:</b></font> benley: it would be possible, but I don&apos;t know what&apos;s the current state of this (if/what plans there are)<br/>
<font color="#A82F2F"><font size="2">(11:36:44 PM)</font> <b>c74d:</b></font> What are the NARs, then? I assumed those contained the pre-built stuff.<br/>
<font color="#A82F2F"><font size="2">(11:36:48 PM)</font> <b>benley:</b></font> *nod* kk<br/>
<font color="#A82F2F"><font size="2">(11:37:19 PM)</font> <b>ktosiek:</b></font> osa1: oh, wait, sorry. I was sure you are talking about nix store being in /usr/local<br/>
<font color="#A82F2F"><font size="2">(11:37:54 PM)</font> <b>ktosiek:</b></font> if you don&apos;t have /usr/local in PATH on your distro, you&apos;ll have to either add it or install under different prefix<br/>
<font color="#A82F2F"><font size="2">(11:38:01 PM)</font> <b>osa1:</b></font> and even if I give full path of nix-env it doesn&apos;t work because it can&apos;t find other nix execs<br/>
<font color="#A82F2F"><font size="2">(11:38:07 PM)</font> <b>osa1:</b></font> I guess I&apos;ll just install it in /usr<br/>
<font color="#A82F2F"><font size="2">(11:38:10 PM)</font> <b>ktosiek:</b></font> (what distro is that BTW?)<br/>
<font color="#A82F2F"><font size="2">(11:38:21 PM)</font> <b>osa1:</b></font> yay, makefile doesn&apos;t have uninstall target<br/>
<font color="#A82F2F"><font size="2">(11:38:32 PM)</font> <b>osa1:</b></font> ktosiek: I have /usr/local<br/>
<font color="#A82F2F"><font size="2">(11:38:44 PM)</font> <b>osa1:</b></font> but /usr/local/bin is not in $PATH of su<br/>
<font color="#A82F2F"><font size="2">(11:38:53 PM)</font> <b>osa1:</b></font> hm wait<br/>
<font color="#A82F2F"><font size="2">(11:38:54 PM)</font> <b>c74d:</b></font> (Incidentally, I&apos;m glad I&apos;ve outgoing traffic on TCP port 80 blocked.)<br/>
<font color="#A82F2F"><font size="2">(11:38:55 PM)</font> <b>osa1:</b></font> it is<br/>
<font color="#A82F2F"><font size="2">(11:38:56 PM)</font> <b>benley:</b></font> c74d: NARs are what you get if you save the result of nix-store --export to a file instead of sending it over the network<br/>
<font color="#A82F2F"><font size="2">(11:39:05 PM)</font> <b>benley:</b></font> iirc<br/>
<font color="#A82F2F"><font size="2">(11:41:48 PM)</font> <b>osa1:</b></font> what does this mean: &quot;error: the group ‘nixbld’ specified in ‘build-users-group’ does not exist&quot; ?<br/>
<font color="#A82F2F"><font size="2">(11:42:09 PM)</font> <b>osa1:</b></font> this is on a fresh installation, btw<br/>
<font color="#A82F2F"><font size="2">(11:42:50 PM)</font> <b>ktosiek:</b></font> is that from nix-daemon?<br/>
<font color="#A82F2F"><font size="2">(11:42:59 PM)</font> <b>osa1:</b></font> from &quot;sudo /usr/local/bin/nix-env -i hello&quot;<br/>
<font color="#A82F2F"><font size="2">(11:44:51 PM)</font> <b>c74d:</b></font> benley: seems to be `nix-store --dump`, by the man-page.<br/>
<font color="#A82F2F"><font size="2">(11:46:27 PM)</font> <b>osa1:</b></font> hm I think I&apos;ll need to neable single-user mode<br/>
<font color="#A82F2F"><font size="2">(11:46:31 PM)</font> <b>osa1:</b></font> enable*<br/>
<font color="#A82F2F"><font size="2">(11:46:54 PM)</font> <b>c74d:</b></font> So what is it that&apos;s not covered by the hashes in the channel manifests?<br/>
<font size="2">(12:05:54 AM)</font><b> The account has disconnected and you are no longer in this chat. You will automatically rejoin the chat when the account reconnects.</b><br/>
</body></html>
