<html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Conversation with #nixos at Sun 28 Dec 2014 09:57:33 PM CET on magnetophon@irc.freenode.net (irc)</title></head><body><h3>Conversation with #nixos at Sun 28 Dec 2014 09:57:33 PM CET on magnetophon@irc.freenode.net (irc)</h3>
<font size="2">(09:57:33 PM)</font><b> The topic for #nixos is: <a href="http://nixos.org/">http://nixos.org/</a> || Latest NixOS: <a href="http://nixos.org/nixos/download.html">http://nixos.org/nixos/download.html</a> || Latest Nix: <a href="http://nixos.org/nix/download.html">http://nixos.org/nix/download.html</a> || Logs: <a href="http://nixos.org/irc/logs/">http://nixos.org/irc/logs/</a> || Swag: <a href="http://www.cafepress.co.uk/NixOS">http://www.cafepress.co.uk/NixOS</a></b><br/>
<font size="2">(09:57:34 PM)</font><b> Topic for #nixos set by niksnut!~eelco@ec2-54-216-36-73.eu-west-1.compute.amazonaws.com at 12:56:59 PM on 04/11/2014</b><br/>
<font color="#A82F2F"><font size="2">(09:57:34 PM)</font> <b>weber.freenode.net:</b></font> (notice) [freenode-info] channel flooding and no channel staff around to help? Please check with freenode support: http://freenode.net/faq.shtml#gettinghelp<br/>
<font color="#A82F2F"><font size="2">(10:27:21 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] peti closed pull request #5488: Update elm to 0.14. (master...master) http://git.io/nuv9OA<br/>
<font color="#A82F2F"><font size="2">(11:30:50 PM)</font> <b>iMatejC:</b></font> cstrahan_: ping<br/>
<font size="2">(11:31:13 PM)</font><b> kyl___ is now known as kyl____</b><br/>
<font color="#A82F2F"><font size="2">(11:32:45 PM)</font> <b>iMatejC:</b></font> cstrahan_: is this really needed? https://github.com/NixOS/nixpkgs/blob/4f592d4f29a06a553858bf50d64deda6752168e5/nixos/modules/services/misc/etcd.nix#L125<br/>
<font color="#A82F2F"><font size="2">(11:35:22 PM)</font> <b>iMatejC:</b></font> cstrahan_: for me etcd.service is failing because `etcdctl set /nixos/state &apos;up&apos;` takes forever to do I do not know what (it does not come to sleep 1 at all), and `etcdctl get /nixos/state` always returns &apos;up&apos;<br/>
<font color="#A82F2F"><font size="2">(11:54:43 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] mcox opened pull request #5495: nixpkgs: unbound 1.4.22 -&gt; 1.5.1 (master...unbound) http://git.io/u6xMBw<br/>
<font color="#A82F2F"><font size="2">(11:58:08 PM)</font> <b>iMatejC:</b></font> argh<br/>
<font color="#A82F2F"><font size="2">(11:58:35 PM)</font> <b>idioterna:</b></font> offlinehacker: here?<br/>
<font color="#A82F2F"><font size="2">(11:59:13 PM)</font> <b>iMatejC:</b></font> cstrahan_: you are the maintainer of etcd not of its service, I need offlinehacker<br/>
<font color="#A82F2F"><font size="2">(11:59:48 PM)</font> <b>iMatejC:</b></font> idioterna: you are not the only one that needs him, and his mobile phone is dead<br/>
<font color="#A82F2F"><font size="2">(11:59:53 PM)</font> <b>idioterna:</b></font> http://bou.si/rest/cantfindlabel.png<br/>
<font color="#A82F2F"><font size="2">(11:59:59 PM)</font> <b>idioterna:</b></font> i&apos;m setting up a machine for him<br/>
<font color="#A82F2F"><font size="2">(12:00:10 AM)</font> <b>iMatejC:</b></font> i know<br/>
<font color="#A82F2F"><font size="2">(12:00:21 AM)</font> <b>idioterna:</b></font> and this is what i get when i boot a freshly installed nixos<br/>
<font color="#A82F2F"><font size="2">(12:02:20 AM)</font> <b>iMatejC:</b></font> hum<br/>
<font color="#A82F2F"><font size="2">(12:03:52 AM)</font> <b>iMatejC:</b></font> idioterna: do you have configuration somewhere close to share?<br/>
<font color="#A82F2F"><font size="2">(12:04:55 AM)</font> <b>idioterna:</b></font> yeah<br/>
<font color="#A82F2F"><font size="2">(12:05:17 AM)</font> <b>idioterna:</b></font> https://nixos.org/wiki/Installing_NixOS_in_a_VirtualBox_guest#Minimal_Install_.28For_Servers.29<br/>
<font color="#A82F2F"><font size="2">(12:05:21 AM)</font> <b>idioterna:</b></font> this one<br/>
<font color="#A82F2F"><font size="2">(12:05:37 AM)</font> <b>idioterna:</b></font> i removed the services.virtualbox.enabled line and fixed the grub device<br/>
<font color="#A82F2F"><font size="2">(12:05:40 AM)</font> <b>idioterna:</b></font> grub works<br/>
<font color="#A82F2F"><font size="2">(12:05:53 AM)</font> <b>idioterna:</b></font> and the label is definitely there<br/>
<font color="#A82F2F"><font size="2">(12:15:33 AM)</font> <b>iMatejC:</b></font> idioterna: am, I usually follow this instructions, maybe you are just missing imports option: http://nixos.org/nixos/manual/#sec-installation<br/>
<font color="#A82F2F"><font size="2">(12:16:04 AM)</font> <b>iMatejC:</b></font> search for &quot;Example 1.2. NixOS configuration&quot;<br/>
<font color="#A82F2F"><font size="2">(12:16:41 AM)</font> <b>iMatejC:</b></font> also check what do you have inside hardware-configuration.nix file<br/>
<font color="#A82F2F"><font size="2">(12:16:53 AM)</font> <b>idioterna:</b></font> possibly<br/>
<font color="#A82F2F"><font size="2">(12:16:55 AM)</font> <b>idioterna:</b></font> yeah<br/>
<font color="#A82F2F"><font size="2">(12:16:57 AM)</font> <b>idioterna:</b></font> thanks<br/>
<font color="#A82F2F"><font size="2">(12:17:06 AM)</font> <b>iMatejC:</b></font> np<br/>
<font color="#A82F2F"><font size="2">(12:49:44 AM)</font> <b>cstrahan_:</b></font> iMatejC: sorry, i&apos;m not yet familiar enough with etcd to know what might be going wrong with the service, despite how much i wish I could help :(<br/>
<font color="#A82F2F"><font size="2">(12:50:49 AM)</font> <b>cstrahan_:</b></font> does peti ever join this channel?<br/>
<font color="#A82F2F"><font size="2">(12:51:42 AM)</font> <b>cstrahan_:</b></font> i want to bug him to review my PR for GHCJS support :)<br/>
<font color="#A82F2F"><font size="2">(12:53:21 AM)</font> <b>offlinehacker:</b></font> iMatejC: yes?<br/>
<font color="#A82F2F"><font size="2">(12:53:29 AM)</font> <b>offlinehacker:</b></font> idioterna: yes?<br/>
<font color="#A82F2F"><font size="2">(12:54:27 AM)</font> <b>offlinehacker:</b></font> idioterna: what kind of virtualiztion you have? lxc?<br/>
<font color="#A82F2F"><font size="2">(12:54:45 AM)</font> <b>offlinehacker:</b></font> because systemd looks like didn&apos;t detect it<br/>
<font color="#A82F2F"><font size="2">(12:56:22 AM)</font> <b>offlinehacker:</b></font> iMatejC: etcd?<br/>
<font color="#A82F2F"><font size="2">(01:00:19 AM)</font> <b>bennofs:</b></font> cstrahan_: not very often. He is pretty active on github though<br/>
<font color="#A82F2F"><font size="2">(01:02:21 AM)</font> <b>offlinehacker:</b></font> idioterna: if you still have problems with nixos, please let me know. I would also like to know which problems you had with lxc so i can possibly fix them, but it&apos;s standard systemd, so any instance that runs systemd should have problems with default apparmor profiles.<br/>
<font color="#A82F2F"><font size="2">(01:07:14 AM)</font> <b>offlinehacker:</b></font> iMatejC: yes, that&apos;s needed, so other services know when startup of etcd is complete<br/>
<font color="#A82F2F"><font size="2">(01:09:44 AM)</font> <b>offlinehacker:</b></font> iMatejC: that&apos;s basically a check if etcd is up and running, if that does not work, etcd basically is in some fckedup state<br/>
<font size="2">(01:15:23 AM)</font><b> Lethalman left the room (quit: Quit: Leaving).</b><br/>
<font color="#A82F2F"><font size="2">(01:23:22 AM)</font> <b>offlinehacker:</b></font> iMatejC: https://coreos.com/docs/distributed-configuration/etcd-api/<br/>
<font color="#A82F2F"><font size="2">(01:24:21 AM)</font> <b>iMatejC:</b></font> will try right now<br/>
<font color="#A82F2F"><font size="2">(01:25:29 AM)</font> <b>offlinehacker:</b></font> iMatejC: anything you fix in etcd post startup it&apos;s ok, then just make sure etcd and kubernetes tests pass, that&apos;s the ultimate test. Kubernetes tests sometimes can take a long time to eventually complete(unpredictable state and long timeouts)Ä‘.<br/>
<font color="#A82F2F"><font size="2">(01:25:43 AM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] shlevy merged master into staging: http://git.io/XX64TA<br/>
<font color="#A82F2F"><font size="2">(01:25:53 AM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] shlevy opened pull request #5496: gcc-wrapper is used for clang too (staging...gcc-wrapper-not-just-gcc) http://git.io/RPa0uA<br/>
<font color="#A82F2F"><font size="2">(01:38:30 AM)</font> <b>iMatejC:</b></font> offlinehacker: actually works within restarts of service, but, after computer restart it just does not start anymore<br/>
<font color="#A82F2F"><font size="2">(01:38:52 AM)</font> <b>iMatejC:</b></font> doesnt start - timeouts<br/>
<font color="#A82F2F"><font size="2">(01:39:01 AM)</font> <b>offlinehacker:</b></font> iMatejC: that&apos;s wierd, maybe something related to stopping etcd<br/>
<font color="#A82F2F"><font size="2">(01:39:11 AM)</font> <b>iMatejC:</b></font> maybe<br/>
<font color="#A82F2F"><font size="2">(01:40:08 AM)</font> <b>iMatejC:</b></font> I rememeber that for mailpile I had to send INT kill signal to stop it, if I sent 15 or 9, then you got messed up database<br/>
<font color="#A82F2F"><font size="2">(01:40:28 AM)</font> <b>iMatejC:</b></font> offlinehacker: maybe something simmilar happend here<br/>
<font color="#A82F2F"><font size="2">(01:40:30 AM)</font> <b>iMatejC:</b></font> ?<br/>
<font color="#A82F2F"><font size="2">(01:41:33 AM)</font> <b>iMatejC:</b></font> ok that doesnt make sence<br/>
<font color="#A82F2F"><font size="2">(01:43:10 AM)</font> <b>offlinehacker:</b></font> i don&apos;t know<br/>
<font color="#A82F2F"><font size="2">(01:43:13 AM)</font> <b>offlinehacker:</b></font> really<br/>
<font color="#A82F2F"><font size="2">(01:43:46 AM)</font> <b>offlinehacker:</b></font> i doubt coreos config will tell anything more<br/>
<font color="#A82F2F"><font size="2">(01:47:09 AM)</font> <b>iMatejC:</b></font> offlinehacker: works now<br/>
<font color="#A82F2F"><font size="2">(01:47:16 AM)</font> <b>offlinehacker:</b></font> iMatejC: what did you do?<br/>
<font color="#A82F2F"><font size="2">(01:47:37 AM)</font> <b>iMatejC:</b></font> offlinehacker: upgraded etcdctl :P and not just etcd<br/>
<font color="#A82F2F"><font size="2">(01:47:47 AM)</font> <b>offlinehacker:</b></font> iMatejC: makes sense<br/>
<font color="#A82F2F"><font size="2">(01:47:54 AM)</font> <b>iMatejC:</b></font> crap<br/>
<font color="#A82F2F"><font size="2">(01:48:00 AM)</font> <b>offlinehacker:</b></font> iMatejC: make a pull request will merge<br/>
<font color="#A82F2F"><font size="2">(01:48:03 AM)</font> <b>iMatejC:</b></font> forgot to reboot :D<br/>
<font color="#A82F2F"><font size="2">(01:48:10 AM)</font> <b>iMatejC:</b></font> must test that too<br/>
<font color="#A82F2F"><font size="2">(01:48:15 AM)</font> <b>offlinehacker:</b></font> iMatejC: ahh so it could still crash :P ?<br/>
<font color="#A82F2F"><font size="2">(01:48:27 AM)</font> <b>iMatejC:</b></font> yes<br/>
<font color="#A82F2F"><font size="2">(01:48:29 AM)</font> <b>iMatejC:</b></font> w8<br/>
<font color="#A82F2F"><font size="2">(01:49:28 AM)</font> <b>iMatejC:</b></font> ok done<br/>
<font color="#A82F2F"><font size="2">(01:49:33 AM)</font> <b>iMatejC:</b></font> still works<br/>
<font color="#A82F2F"><font size="2">(01:50:12 AM)</font> <b>offlinehacker:</b></font> iMatejC: nice :D<br/>
<font color="#A82F2F"><font size="2">(01:50:28 AM)</font> <b>offlinehacker:</b></font> so that&apos;s it, update fixes everythin, let&apos;s hope kubernetes still work :D<br/>
<font color="#A82F2F"><font size="2">(01:50:44 AM)</font> <b>offlinehacker:</b></font> or i will upgrade kubernetes too<br/>
<font color="#A82F2F"><font size="2">(01:50:57 AM)</font> <b>iMatejC:</b></font> magic<br/>
<font color="#A82F2F"><font size="2">(01:51:39 AM)</font> <b>offlinehacker:</b></font> yes, looks like etcd&apos;s getting more and more stable :P<br/>
<font color="#A82F2F"><font size="2">(01:52:07 AM)</font> <b>offlinehacker:</b></font> reinventing zookeeper is not such and easy task :P<br/>
<font color="#A82F2F"><font size="2">(01:52:45 AM)</font> <b>offlinehacker:</b></font> i still wonder why kubernetes used it, but let&apos;s just say in 3.0 it might just work in all cases<br/>
<font color="#A82F2F"><font size="2">(01:58:25 AM)</font> <b>offlinehacker:</b></font> iMatejC: i found monit replacement<br/>
<font color="#A82F2F"><font size="2">(01:58:49 AM)</font> <b>offlinehacker:</b></font> iMatejC: consul<br/>
<font color="#A82F2F"><font size="2">(01:59:48 AM)</font> <b>iMatejC:</b></font> oh! nice! i love consul!<br/>
<font color="#A82F2F"><font size="2">(01:59:56 AM)</font> <b>iMatejC:</b></font> anyway, what is consul?<br/>
<font color="#062585"><font size="2">(02:00:42 AM)</font> <b>***iMatejC</b></font> is in a strange hyper-sleepy state<br/>
<font color="#A82F2F"><font size="2">(02:03:07 AM)</font> <b>offlinehacker:</b></font> iMatejC: haha, it&apos;s something that watches your cluster services and has web ui<br/>
<font color="#A82F2F"><font size="2">(02:03:24 AM)</font> <b>offlinehacker:</b></font> iMatejC: it&apos;s not super integrated, but has a nice web ui :P<br/>
<font color="#A82F2F"><font size="2">(02:03:31 AM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] matejc opened pull request #5497: etcd: upgrade server and ctl (master...fixetcd) http://git.io/GEkZog<br/>
<font color="#A82F2F"><font size="2">(02:03:35 AM)</font> <b>offlinehacker:</b></font> and can send alerts<br/>
<font color="#A82F2F"><font size="2">(02:04:13 AM)</font> <b>iMatejC:</b></font> nice<br/>
<font size="2">(02:08:54 AM)</font><b> Shados_ is now known as Shados</b><br/>
<font color="#A82F2F"><font size="2">(02:10:00 AM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] offlinehacker pushed 2 new commits to master: http://git.io/eCIeVA<br/>
<font color="#A82F2F"><font size="2">(02:10:00 AM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master d28c65f Matej Cotman: etcd: upgrade server and ctl<br/>
<font color="#A82F2F"><font size="2">(02:10:00 AM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master d477b4c Jaka Hudoklin: Merge pull request #5497 from matejc/fixetcd...<br/>
<font color="#A82F2F"><font size="2">(02:11:39 AM)</font> <b>aszlig:</b></font> offlinehacker: cool, will look into it, thanks<br/>
<font color="#A82F2F"><font size="2">(02:11:55 AM)</font> <b>aszlig:</b></font> even though i don&apos;t care about the web ui ;-)<br/>
<font color="#A82F2F"><font size="2">(02:13:15 AM)</font> <b>offlinehacker:</b></font> aszlig: well i&apos;m searching for something that would alert me if some of systemd services goes down<br/>
<font color="#A82F2F"><font size="2">(02:13:46 AM)</font> <b>iMatejC:</b></font> offlinehacker: nice, now just 2 issues remain... 1. that systemd-journal issue and 2. for panamax I had to make link to the /usr/bin/docker - temporary fix - some ruby dependency wants it there, just do not know which one<br/>
<font color="#A82F2F"><font size="2">(02:13:49 AM)</font> <b>offlinehacker:</b></font> aszlig: consul does not solve this really, but it could be usefull for some things.<br/>
<font color="#A82F2F"><font size="2">(02:13:54 AM)</font> <b>wkennington:</b></font> Offlinehacker, can&apos;t you have a health check in consul that probes systemctl status<br/>
<font color="#A82F2F"><font size="2">(02:14:43 AM)</font> <b>offlinehacker:</b></font> wkennington: you can, but it&apos;s not nicely integrated, then i have to add check for every service<br/>
<font color="#A82F2F"><font size="2">(02:15:53 AM)</font> <b>offlinehacker:</b></font> iMatejC: ok. 2. that does not seem like a big issue, it&apos;s a big hackish, but i guess less hackish than patching some random ruby gem<br/>
<font color="#A82F2F"><font size="2">(02:16:53 AM)</font> <b>wkennington:</b></font> Offlinehacker, no not necessarily<br/>
<font color="#A82F2F"><font size="2">(02:17:00 AM)</font> <b>aszlig:</b></font> offlinehacker: hm, couldn&apos;t you just create those checks by mapping config.systemd.services?<br/>
<font color="#A82F2F"><font size="2">(02:17:27 AM)</font> <b>wkennington:</b></font> Yes that&apos;s one way<br/>
<font color="#A82F2F"><font size="2">(02:17:33 AM)</font> <b>offlinehacker:</b></font> aszlig: wkennington: yes, nixos can solve this :)<br/>
<font color="#A82F2F"><font size="2">(02:18:18 AM)</font> <b>offlinehacker:</b></font> i guess that&apos;s quite nice way<br/>
<font color="#A82F2F"><font size="2">(02:19:00 AM)</font> <b>wkennington:</b></font> I just have health checks and service registration coupled with service enablement<br/>
<font size="2">(02:39:45 AM)</font><b> The account has disconnected and you are no longer in this chat. You will automatically rejoin the chat when the account reconnects.</b><br/>
</body></html>
