<html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Conversation with #nixos at Wed 11 Feb 2015 02:32:27 PM CET on magnetophon@irc.freenode.net (irc)</title></head><body><h3>Conversation with #nixos at Wed 11 Feb 2015 02:32:27 PM CET on magnetophon@irc.freenode.net (irc)</h3>
<font size="2">(02:32:27 PM)</font><b> The topic for #nixos is: <a href="http://nixos.org/">http://nixos.org/</a> || Latest NixOS: <a href="http://nixos.org/nixos/download.html">http://nixos.org/nixos/download.html</a> || Latest Nix: <a href="http://nixos.org/nix/download.html">http://nixos.org/nix/download.html</a> || Logs: <a href="http://nixos.org/irc/logs/">http://nixos.org/irc/logs/</a> || Swag: <a href="http://www.cafepress.co.uk/NixOS">http://www.cafepress.co.uk/NixOS</a></b><br/>
<font size="2">(02:32:27 PM)</font><b> Topic for #nixos set by niksnut!~eelco@ec2-54-216-36-73.eu-west-1.compute.amazonaws.com at 12:56:59 PM on 04/11/2014</b><br/>
<font size="2">(02:33:15 PM)</font><b> NixThor [<em>~quassel@162.84-48-92.nextgentel.com</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(02:34:11 PM)</font> <b>dweller:</b></font> MagneticDuck: steam<br/>
<font color="#A82F2F"><font size="2">(02:34:43 PM)</font> <b>dweller:</b></font> steam is a bitch in this manner, because of frequent updates and multiple binaries<br/>
<font size="2">(02:43:37 PM)</font><b> NixThor left the room (quit: Ping timeout: 245 seconds).</b><br/>
<font size="2">(02:44:39 PM)</font><b> NixThor [<em>~quassel@84.48.92.162</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(02:51:05 PM)</font> <b>LnL:</b></font> So I had time to read some of the nixpills today<br/>
<font color="#A82F2F"><font size="2">(02:54:05 PM)</font> <b>LnL:</b></font> I&apos;ve been using it for haskell a little while, but I think I might make the switch from homebrew<br/>
<font size="2">(02:57:04 PM)</font><b> NixThor left the room (quit: Ping timeout: 250 seconds).</b><br/>
<font color="#A82F2F"><font size="2">(02:57:08 PM)</font> <b>schoppenhauer:</b></font> hm. I am too stupid to rebase my github repo :/<br/>
<font color="#A82F2F"><font size="2">(02:57:13 PM)</font> <b>schoppenhauer:</b></font> can somebody please help me?<br/>
<font color="#A82F2F"><font size="2">(02:57:41 PM)</font> <b>schoppenhauer:</b></font> I try to do git rebase nixos/master submit/x2goclient<br/>
<font color="#A82F2F"><font size="2">(02:57:48 PM)</font> <b>schoppenhauer:</b></font> and apply all patches.<br/>
<font color="#A82F2F"><font size="2">(02:57:56 PM)</font> <b>schoppenhauer:</b></font> and resolve all conflicts<br/>
<font color="#A82F2F"><font size="2">(02:58:04 PM)</font> <b>schoppenhauer:</b></font> and then push to submit/x2goclient<br/>
<font color="#A82F2F"><font size="2">(02:58:12 PM)</font> <b>schoppenhauer:</b></font> but I am not sure whether this is correct now.<br/>
<font color="#A82F2F"><font size="2">(02:59:26 PM)</font> <b>ktosiek:</b></font> schoppenhauer: this is a correct way<br/>
<font color="#A82F2F"><font size="2">(02:59:41 PM)</font> <b>schoppenhauer:</b></font> ktosiek: how can I see on github whether it is correct?<br/>
<font size="2">(02:59:42 PM)</font><b> ThorNix is now known as NixThor</b><br/>
<font color="#A82F2F"><font size="2">(03:00:13 PM)</font> <b>ktosiek:</b></font> git checkout submit/x2goclient; git rebase nixos/master; fix conflicts, git rebase --continue; git push --force<br/>
<font color="#A82F2F"><font size="2">(03:00:29 PM)</font> <b>ktosiek:</b></font> (notice the &quot;--force&quot; - you want to overwrite the old submit/x2goclient)<br/>
<font color="#A82F2F"><font size="2">(03:00:42 PM)</font> <b>ktosiek:</b></font> schoppenhauer: what kind of &quot;correct&quot;?<br/>
<font color="#A82F2F"><font size="2">(03:02:04 PM)</font> <b>schoppenhauer:</b></font> ktosiek: a comment to my pull request said that I should rebase the repository<br/>
<font color="#A82F2F"><font size="2">(03:02:49 PM)</font> <b>ktosiek:</b></font> well, if you see the new commits in the PR then it&apos;s ok<br/>
<font color="#A82F2F"><font size="2">(03:03:39 PM)</font> <b>schoppenhauer:</b></font> ktosiek: github sais  This branch is 27 commits ahead, 1 commit behind NixOS:master<br/>
<font color="#A82F2F"><font size="2">(03:03:55 PM)</font> <b>ktosiek:</b></font> ohhh<br/>
<font color="#A82F2F"><font size="2">(03:04:20 PM)</font> <b>ktosiek:</b></font> git remote add upstream &lt;&lt;link to NixOS/nixpkgs repo&gt;&gt;<br/>
<font color="#A82F2F"><font size="2">(03:04:43 PM)</font> <b>ktosiek:</b></font> git fetch upstream<br/>
<font color="#A82F2F"><font size="2">(03:04:49 PM)</font> <b>ktosiek:</b></font> git rebase upstream/master<br/>
<font color="#A82F2F"><font size="2">(03:05:07 PM)</font> <b>ktosiek:</b></font> then you&apos;ll rebase onto the NixOS/nixpkgs master branch<br/>
<font color="#A82F2F"><font size="2">(03:05:18 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] lethalman pushed 3 new commits to master: http://git.io/NYky<br/>
<font color="#A82F2F"><font size="2">(03:05:18 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master c5e855e Matthias Beyer: Add basic nixos module for fish shell<br/>
<font color="#A82F2F"><font size="2">(03:05:18 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 5e6068d Matthias Beyer: Put shell aliases in interactiveShellInit<br/>
<font color="#A82F2F"><font size="2">(03:05:18 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 157d199 lethalman: Merge pull request #5626 from matthiasbeyer/add-fish_shell_module...<br/>
<font size="2">(03:06:02 PM)</font><b> NixThor left the room (quit: Ping timeout: 265 seconds).</b><br/>
<font color="#A82F2F"><font size="2">(03:06:17 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] lethalman pushed 1 new commit to master: http://git.io/NYIn<br/>
<font color="#A82F2F"><font size="2">(03:06:17 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master d7f5d00 Luca Bruno: Add fish to nixos module list<br/>
<font color="#A82F2F"><font size="2">(03:19:32 PM)</font> <b>schoppenhauer:</b></font> ktosiek: ok, this worked, but it adds a newline to the README.md<br/>
<font color="#A82F2F"><font size="2">(03:19:43 PM)</font> <b>schoppenhauer:</b></font> ktosiek: can I somehow tell git to ignore changes of this file?<br/>
<font color="#A82F2F"><font size="2">(03:20:19 PM)</font> <b>ktosiek:</b></font> what do you mean &quot;adds a newline&quot;?<br/>
<font color="#A82F2F"><font size="2">(03:20:25 PM)</font> <b>ktosiek:</b></font> did you touch that file?<br/>
<font color="#A82F2F"><font size="2">(03:21:01 PM)</font> <b>schoppenhauer:</b></font> it seems that in the past I merged the old repo, ktosiek<br/>
<font color="#062585"><font size="2">(03:21:15 PM)</font> <b>***ktosiek</b></font> has no idea what your state is now<br/>
<font color="#A82F2F"><font size="2">(03:21:55 PM)</font> <b>ktosiek:</b></font> can you push that rebased branch somewhere? (and send me the link to the PR?)<br/>
<font color="#A82F2F"><font size="2">(03:22:40 PM)</font> <b>schoppenhauer:</b></font> ktosiek: https://github.com/dasuxullebt/nixpkgs/tree/submit/x2goclient this should be the rebased thing now<br/>
<font color="#A82F2F"><font size="2">(03:23:31 PM)</font> <b>schoppenhauer:</b></font> ktosiek: I *think* I rebased it with the wrong remote once<br/>
<font color="#A82F2F"><font size="2">(03:24:17 PM)</font> <b>schoppenhauer:</b></font> ktosiek: that is why an entry &quot;this repository is obsolete&quot; shows up.<br/>
<font color="#A82F2F"><font size="2">(03:24:56 PM)</font> <b>ktosiek:</b></font> I&apos;d just use interactive rebase to fix/squash/rename those commits<br/>
<font color="#A82F2F"><font size="2">(03:25:09 PM)</font> <b>ktosiek:</b></font> (I have no idea what they are about looking at the messages)<br/>
<font color="#A82F2F"><font size="2">(03:28:02 PM)</font> <b>warbo:</b></font> hello, I&apos;m trying to install pandoc (standalone binary, not library) but am hitting a test failure in the asn1Encoding haskell package<br/>
<font color="#A82F2F"><font size="2">(03:28:18 PM)</font> <b>warbo:</b></font> which is strange because &quot;doCheck = false&quot; in that package<br/>
<font color="#A82F2F"><font size="2">(03:38:22 PM)</font> <b>schoppenhauer:</b></font> ktosiek: https://github.com/dasuxullebt/nixpkgs/tree/submit/x2goclient ← does this look ok?<br/>
<font color="#A82F2F"><font size="2">(03:39:46 PM)</font> <b>MagneticDuck:</b></font> buildFHSChrootEnvironment is cool.<br/>
<font color="#A82F2F"><font size="2">(03:40:46 PM)</font> <b>ktosiek:</b></font> schoppenhauer: I don&apos;t know what the style is in nixpkgs, but I&apos;d squash those 3 commits too (they basically do one thing: add x2go client). Anyway, it looks like only your changes are there so it&apos;s ok :-)<br/>
<font color="#A82F2F"><font size="2">(03:41:07 PM)</font> <b>schoppenhauer:</b></font> ok, I&apos;ll also squash them<br/>
<font color="#A82F2F"><font size="2">(03:42:32 PM)</font> <b>jimstutt:</b></font> As I&apos;m one my first nixos installation I don&apos;t know what to do about a nixos-rebuild OSError 13 with gummiboot ...bzImage.efi.<br/>
<font color="#A82F2F"><font size="2">(03:42:37 PM)</font> <b>jimstutt:</b></font> OSError: [Errno 13] Permission denied: &apos;/boot/efi/nixos/vhi8gxml33jxkqkzjgqimradxdqll3wl-linux-3.14.29-bzImage.efi&apos;<br/>
<font color="#A82F2F"><font size="2">(03:43:32 PM)</font> <b>jimstutt:</b></font> Traceback (most recent call last):<br/>
<font color="#A82F2F"><font size="2">(03:43:33 PM)</font> <b>jimstutt:</b></font>   File &quot;/nix/store/69fa1aqwhj7xd7wcznkl8k8xhs3g61la-gummiboot-builder.py&quot;, line 113, in &lt;module&gt;<br/>
<font color="#A82F2F"><font size="2">(03:43:33 PM)</font> <b>jimstutt:</b></font>     remove_old_entries(gens)<br/>
<font color="#A82F2F"><font size="2">(03:43:33 PM)</font> <b>jimstutt:</b></font>   File &quot;/nix/store/69fa1aqwhj7xd7wcznkl8k8xhs3g61la-gummiboot-builder.py&quot;, line 89, in remove_old_entries<br/>
<font color="#A82F2F"><font size="2">(03:43:33 PM)</font> <b>jimstutt:</b></font>     os.unlink(path)<br/>
<font color="#A82F2F"><font size="2">(03:44:35 PM)</font> <b>dweller:</b></font> jimstutt: remount you /boot to be writeable?<br/>
<font color="#A82F2F"><font size="2">(03:44:55 PM)</font> <b>schoppenhauer:</b></font> ok. do I have to make a new pull request now, or just wait?<br/>
<font color="#A82F2F"><font size="2">(03:45:32 PM)</font> <b>schoppenhauer:</b></font> hm. I&apos;ll ask directly on github.<br/>
<font color="#A82F2F"><font size="2">(03:45:56 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] dasuxullebt closed pull request #6301: Submit/x2goclient (master...submit/x2goclient) http://git.io/NmcJ<br/>
<font color="#A82F2F"><font size="2">(03:46:06 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] dasuxullebt reopened pull request #6301: Submit/x2goclient (master...submit/x2goclient) http://git.io/NmcJ<br/>
<font color="#A82F2F"><font size="2">(03:47:28 PM)</font> <b>schoppenhauer:</b></font> wah.<br/>
<font color="#A82F2F"><font size="2">(03:49:41 PM)</font> <b>MagneticDuck:</b></font> nix-build refusing to build a derivation because it has an unfree license; --option nixpkgs.config.allowUnfree true isn&apos;t working?<br/>
<font color="#A82F2F"><font size="2">(03:52:10 PM)</font> <b>jimstutt:</b></font> dweller: tnx. I think I succesfully umounted -o  remount,rw<br/>
<font color="#A82F2F"><font size="2">(03:52:31 PM)</font> <b>jimstutt:</b></font> Ran nixos-rebuild switch<br/>
<font color="#A82F2F"><font size="2">(03:52:38 PM)</font> <b>jimstutt:</b></font> Got: nixos-rebuild test<br/>
<font color="#A82F2F"><font size="2">(03:52:38 PM)</font> <b>jimstutt:</b></font> building Nix...<br/>
<font color="#A82F2F"><font size="2">(03:52:38 PM)</font> <b>jimstutt:</b></font> building the system configuration...<br/>
<font color="#A82F2F"><font size="2">(03:52:38 PM)</font> <b>jimstutt:</b></font> write_file &apos;/run/systemd/start-list&apos; - sysopen: Permission denied at ./result/bin/switch-to-configuration line 156.<br/>
<font color="#A82F2F"><font size="2">(03:52:38 PM)</font> <b>jimstutt:</b></font> warning: error(s) occured while switching to the new configuration<br/>
<font color="#A82F2F"><font size="2">(03:52:48 PM)</font> <b>dweller:</b></font> wow<br/>
<font color="#A82F2F"><font size="2">(03:55:41 PM)</font> <b>ktosiek:</b></font> schoppenhauer: it&apos;s already updated :-)<br/>
<font color="#A82F2F"><font size="2">(03:55:56 PM)</font> <b>ktosiek:</b></font> the branch you create a PR with is connected to the PR<br/>
<font color="#A82F2F"><font size="2">(03:56:04 PM)</font> <b>schoppenhauer:</b></font> ok.<br/>
<font color="#A82F2F"><font size="2">(04:07:48 PM)</font> <b>jimstutt:</b></font> dweller: now I can&apos;t umount /dev/sda2 where /run is as I don&apos;t have a service command like ubuntu to stop root-owned daemons. I&apos;ll try rebooting for now. Back later :(.<br/>
<font size="2">(04:08:10 PM)</font><b> jimstutt left the room (quit: Quit: rcirc on GNU Emacs 24.4.1).</b><br/>
<font color="#A82F2F"><font size="2">(04:11:33 PM)</font> <b>schoppenhauer:</b></font> hm. I set boot.resumeDevice = &quot;/dev/tp0/swap&quot;; and rebuilt. still, it suspends, but does not resume.<br/>
<font color="#A82F2F"><font size="2">(04:11:40 PM)</font> <b>schoppenhauer:</b></font> for no apparent reason.<br/>
<font color="#A82F2F"><font size="2">(04:12:15 PM)</font> <b>schoppenhauer:</b></font> ok, I should add that the swap partition is on an encrypted lvm<br/>
<font color="#A82F2F"><font size="2">(04:12:24 PM)</font> <b>schoppenhauer:</b></font> but this should not be a problem, should it?<br/>
<font color="#A82F2F"><font size="2">(04:15:18 PM)</font> <b>xplat:</b></font> schoppenhauer: not if everything else is working right<br/>
<font color="#A82F2F"><font size="2">(04:16:22 PM)</font> <b>schoppenhauer:</b></font> xplat: any suggestion what I can try to track down the problem?<br/>
<font color="#A82F2F"><font size="2">(04:16:41 PM)</font> <b>schoppenhauer:</b></font> journalctl says that the computer successfully suspends.<br/>
<font color="#A82F2F"><font size="2">(04:16:45 PM)</font> <b>schoppenhauer:</b></font> hibernates.<br/>
<font color="#A82F2F"><font size="2">(04:17:01 PM)</font> <b>schoppenhauer:</b></font> (suspend does not work because acpi-fails ...)<br/>
<font color="#A82F2F"><font size="2">(04:18:16 PM)</font> <b>Lethalman:</b></font> the resume is done after lvm/luks apparently<br/>
<font color="#A82F2F"><font size="2">(04:18:28 PM)</font> <b>Lethalman:</b></font> schoppenhauer, this is the code btw: https://github.com/NixOS/nixpkgs/blob/master/nixos/modules/system/boot/stage-1-init.sh#L177<br/>
<font color="#A82F2F"><font size="2">(04:19:03 PM)</font> <b>xplat:</b></font> schoppenhauer: unfortunately my laptop has been hibernating fine for so long i don&apos;t remember anything about debugging &apos;doesn&apos;t resume&apos; problems :-/<br/>
<font color="#A82F2F"><font size="2">(04:19:13 PM)</font> <b>xplat:</b></font> &quot;unfortunately&quot;<br/>
<font color="#A82F2F"><font size="2">(04:21:53 PM)</font> <b>shlevy:</b></font> Anyone know what Moritz Ulrich&apos;s nick is here?<br/>
<font color="#A82F2F"><font size="2">(04:22:57 PM)</font> <b>shlevy:</b></font> the-kenny: Hey, around?<br/>
<font color="#A82F2F"><font size="2">(04:23:09 PM)</font> <b>the-kenny:</b></font> shlevy: yup :)<br/>
<font color="#A82F2F"><font size="2">(04:23:19 PM)</font> <b>the-kenny:</b></font> did I break something?<br/>
<font color="#A82F2F"><font size="2">(04:23:21 PM)</font> <b>shlevy:</b></font> https://github.com/NixOS/nixpkgs/commit/a5807eb7c4558880b7f1d1b03e51a40b0e2dce70#commitcomment-9697392 :)<br/>
<font color="#A82F2F"><font size="2">(04:23:49 PM)</font> <b>the-kenny:</b></font> whoops!<br/>
<font color="#A82F2F"><font size="2">(04:23:54 PM)</font> <b>the-kenny:</b></font> didn&apos;t break for me actually<br/>
<font color="#A82F2F"><font size="2">(04:23:54 PM)</font> <b>shlevy:</b></font> Can I move it back?<br/>
<font color="#A82F2F"><font size="2">(04:24:10 PM)</font> <b>shlevy:</b></font> $pass/share/bash-completion/completions has the right files?<br/>
<font color="#A82F2F"><font size="2">(04:24:26 PM)</font> <b>the-kenny:</b></font> I&apos;m using zsh<br/>
<font color="#A82F2F"><font size="2">(04:24:29 PM)</font> <b>the-kenny:</b></font> checking<br/>
<font color="#A82F2F"><font size="2">(04:24:41 PM)</font> <b>viric:</b></font> didn&apos;t peti want to merge staging soon?<br/>
<font color="#A82F2F"><font size="2">(04:24:59 PM)</font> <b>the-kenny:</b></font> shlevy: you&apos;re right :/ sorry<br/>
<font color="#A82F2F"><font size="2">(04:25:09 PM)</font> <b>shlevy:</b></font> the-kenny: np. Was there a reason for the move or can I put it back?<br/>
<font color="#A82F2F"><font size="2">(04:25:27 PM)</font> <b>the-kenny:</b></font> I just felt it was more intuitive to move the stuff *after* installation<br/>
<font color="#A82F2F"><font size="2">(04:25:31 PM)</font> <b>the-kenny:</b></font> so, no reason<br/>
<font color="#A82F2F"><font size="2">(04:25:37 PM)</font> <b>shlevy:</b></font> Ah OK :)<br/>
<font color="#A82F2F"><font size="2">(04:25:45 PM)</font> <b>shlevy:</b></font> Yeah this should be broken up into breinstall and postinstall<br/>
<font color="#A82F2F"><font size="2">(04:25:56 PM)</font> <b>shlevy:</b></font> But for a quick fix I&apos;ll move it<br/>
<font color="#A82F2F"><font size="2">(04:26:06 PM)</font> <b>the-kenny:</b></font> I&apos;ll do that next time I touch it<br/>
<font color="#A82F2F"><font size="2">(04:26:09 PM)</font> <b>shlevy:</b></font> Nah I&apos;ll do it right actually<br/>
<font color="#A82F2F"><font size="2">(04:26:12 PM)</font> <b>the-kenny:</b></font> (isn&apos;t passmenu *great*?)<br/>
<font color="#A82F2F"><font size="2">(04:26:17 PM)</font> <b>shlevy:</b></font> Dunno, never used it :D<br/>
<font color="#A82F2F"><font size="2">(04:26:27 PM)</font> <b>shlevy:</b></font> I specifically went with pass becuase I wanted a terminal solution<br/>
<font color="#A82F2F"><font size="2">(04:26:59 PM)</font> <b>the-kenny:</b></font> ah. If you use it on a non-X machine make sure to override withX = false;<br/>
<font color="#A82F2F"><font size="2">(04:27:08 PM)</font> <b>shlevy:</b></font> Ah cool thanks<br/>
<font color="#A82F2F"><font size="2">(04:29:53 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] shlevy pushed 1 new commit to master: http://git.io/NY5G<br/>
<font color="#A82F2F"><font size="2">(04:29:53 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 52879c9 Shea Levy: pass: fix completion installation<br/>
<font color="#A82F2F"><font size="2">(04:31:39 PM)</font> <b>LnL:</b></font> I&apos;m trying to build a package using fetchgit, but I don&apos;t enirely understand how the builder works<br/>
<font color="#A82F2F"><font size="2">(04:34:51 PM)</font> <b>LnL:</b></font> hmm does that clone the git repo to $out?<br/>
<font color="#A82F2F"><font size="2">(04:35:16 PM)</font> <b>the-kenny:</b></font> fetchgit is a derivation that returns a path to the fetched repo contents, yes<br/>
<font color="#A82F2F"><font size="2">(04:37:04 PM)</font> <b>LnL:</b></font> I&apos;m trying to create a deriviation that uses a git repo to make install<br/>
<font color="#A82F2F"><font size="2">(04:38:25 PM)</font> <b>the-kenny:</b></font> There is a nice simple example of a derivation in the nixpkgs manual. Basically you use mkDerivation for building &amp; use fetchgit or fetchurl for the &apos;src&apos; attribute<br/>
<font color="#A82F2F"><font size="2">(04:38:41 PM)</font> <b>the-kenny:</b></font> fetch{url,git} itself are just used for fetching the sources etc.<br/>
<font color="#A82F2F"><font size="2">(04:40:42 PM)</font> <b>schoppenhauer:</b></font> hm. do I need pm-utils to hibernate?<br/>
<font color="#A82F2F"><font size="2">(04:42:09 PM)</font> <b>ktosiek:</b></font> schoppenhauer: no, NixOS uses systemd<br/>
<font color="#A82F2F"><font size="2">(04:42:21 PM)</font> <b>ktosiek:</b></font> so it should work with something like systemctl hibernate<br/>
<font color="#A82F2F"><font size="2">(04:42:32 PM)</font> <b>schoppenhauer:</b></font> ktosiek: and what does systemd use?<br/>
<font color="#A82F2F"><font size="2">(04:42:47 PM)</font> <b>ktosiek:</b></font> kernel?<br/>
<font color="#A82F2F"><font size="2">(04:43:46 PM)</font> <b>ktosiek:</b></font> pm-utils basically runs pre/post hibernate hooks around a single kernel call<br/>
<font color="#A82F2F"><font size="2">(04:43:59 PM)</font> <b>ktosiek:</b></font> systemd has it&apos;s own sleep hooks mechanism<br/>
<font color="#A82F2F"><font size="2">(04:44:27 PM)</font> <b>schoppenhauer:</b></font> ok. pm-utils can be configured to use shutdown instead of acpi-related stuff.<br/>
<font color="#A82F2F"><font size="2">(04:44:34 PM)</font> <b>schoppenhauer:</b></font> can systemd be configured this way too?<br/>
<font color="#A82F2F"><font size="2">(04:44:54 PM)</font> <b>kmicu:</b></font> man systemd.special<br/>
<font color="#A82F2F"><font size="2">(04:45:09 PM)</font> <b>ktosiek:</b></font> I don&apos;t know, I had not looked at hibernation yet<br/>
<font color="#A82F2F"><font size="2">(04:46:51 PM)</font> <b>the-kenny:</b></font> I never bothered to set up hibernation on this laptop. suspend is good enough here.<br/>
<font color="#A82F2F"><font size="2">(04:47:06 PM)</font> <b>schoppenhauer:</b></font> kmicu: the manpage does not really say anything useful<br/>
<font color="#A82F2F"><font size="2">(04:47:31 PM)</font> <b>kmicu:</b></font> man sysstemd-sleep<br/>
<font color="#A82F2F"><font size="2">(04:50:25 PM)</font> <b>goibhniu:</b></font> FWIW, hibernation didn&apos;t work on my netbook recently ... although it had previously worked great for years ... I didn&apos;t investigate yet<br/>
<font color="#A82F2F"><font size="2">(04:50:45 PM)</font> <b>goibhniu:</b></font> it failed to resume<br/>
<font color="#A82F2F"><font size="2">(04:51:11 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] lethalman closed pull request #5867: Add redis-3.0.0-rc2 (master...redis3) http://git.io/6RS3hQ<br/>
<font color="#A82F2F"><font size="2">(05:01:15 PM)</font> <b>schoppenhauer:</b></font> hm. even adding resume=... manually in the grub menu, nothing happens.<br/>
<font color="#A82F2F"><font size="2">(05:01:45 PM)</font> <b>Lethalman:</b></font> I don&apos;t think resume= helps in the boot menu<br/>
<font size="2">(05:01:51 PM)</font><b> Guest46221 is now known as jimstutt</b><br/>
<font color="#A82F2F"><font size="2">(05:01:52 PM)</font> <b>Lethalman:</b></font> since it&apos;s not handled in the initrd<br/>
<font color="#A82F2F"><font size="2">(05:01:55 PM)</font> <b>Lethalman:</b></font> though it would be a nice addition<br/>
<font color="#A82F2F"><font size="2">(05:02:01 PM)</font> <b>Lethalman:</b></font> schoppenhauer, did you read the code I linked to you?<br/>
<font color="#A82F2F"><font size="2">(05:02:10 PM)</font> <b>Lethalman:</b></font> look at the test: if [ &quot;$(udevadm info -q property &quot;$sd&quot; | sed -n &apos;s/^ID_FS_TYPE=//p&apos;)&quot; = &quot;swsuspend&quot; ]<br/>
<font color="#A82F2F"><font size="2">(05:02:20 PM)</font> <b>Lethalman:</b></font> perhaps your device doesn&apos;t satisfy these requirements<br/>
<font color="#A82F2F"><font size="2">(05:02:27 PM)</font> <b>LnL:</b></font> I&apos;m getting `cannot auto-call a function that has an argument without a default value (‘fetchgit’)&apos; but url is the only required argument<br/>
<font color="#A82F2F"><font size="2">(05:02:50 PM)</font> <b>Lethalman:</b></font> LnL, how do you say it&apos;s the only required<br/>
<font color="#A82F2F"><font size="2">(05:03:52 PM)</font> <b>LnL:</b></font> If I look at the source of fetchgit everything but url has a default value<br/>
<font color="#A82F2F"><font size="2">(05:04:05 PM)</font> <b>schoppenhauer:</b></font> Lethalman: it also tests whether resumeDevice is set. and it should be.<br/>
<font color="#A82F2F"><font size="2">(05:04:23 PM)</font> <b>Lethalman:</b></font> schoppenhauer, yes that shouldn&apos;t be the problem, look through all those tests<br/>
<font color="#A82F2F"><font size="2">(05:04:38 PM)</font> <b>Lethalman:</b></font> e.g. run that udevadm info -q property on your device<br/>
<font color="#A82F2F"><font size="2">(05:04:43 PM)</font> <b>Lethalman:</b></font> and the sed etc.<br/>
<font color="#A82F2F"><font size="2">(05:04:47 PM)</font> <b>Lethalman:</b></font> and see if it returns swsuspend<br/>
<font color="#A82F2F"><font size="2">(05:06:14 PM)</font> <b>LnL:</b></font> did I do something wrong? https://gist.github.com/LnL7/5ee8eb08ca5f7703c314<br/>
<font color="#A82F2F"><font size="2">(05:06:51 PM)</font> <b>Lethalman:</b></font> LnL, you are missing the hash<br/>
<font color="#A82F2F"><font size="2">(05:07:50 PM)</font> <b>LnL:</b></font> oh I see it now, not the most descriptive error message<br/>
<font color="#A82F2F"><font size="2">(05:08:01 PM)</font> <b>Lethalman:</b></font> indeed<br/>
<font color="#A82F2F"><font size="2">(05:08:12 PM)</font> <b>schoppenhauer:</b></font> Lethalman: well, it obviously returns ID_FS_TYPE=swap, because it is a swap device<br/>
<font color="#A82F2F"><font size="2">(05:08:34 PM)</font> <b>Lethalman:</b></font> schoppenhauer, uhm<br/>
<font color="#A82F2F"><font size="2">(05:10:21 PM)</font> <b>LnL:</b></font> Lethalman: I still get the same message<br/>
<font color="#A82F2F"><font size="2">(05:10:32 PM)</font> <b>Lethalman:</b></font> schoppenhauer, I wonder how one should format the swap in order to also be swsuspend<br/>
<font color="#A82F2F"><font size="2">(05:10:38 PM)</font> <b>Lethalman:</b></font> LnL, how did you provide the hash<br/>
<font color="#A82F2F"><font size="2">(05:10:56 PM)</font> <b>LnL:</b></font> Yes, unless it has to be correct<br/>
<font color="#A82F2F"><font size="2">(05:11:34 PM)</font> <b>Lethalman:</b></font> LnL, *how* did you provide the hash<br/>
<font color="#A82F2F"><font size="2">(05:12:10 PM)</font> <b>Lethalman:</b></font> schoppenhauer, maybe swsuspend is set when suspending, or such<br/>
<font color="#A82F2F"><font size="2">(05:12:14 PM)</font> <b>Lethalman:</b></font> schoppenhauer, how are you hibernating?<br/>
<font color="#A82F2F"><font size="2">(05:12:29 PM)</font> <b>schoppenhauer:</b></font> Lethalman: systemctl suspend<br/>
<font color="#A82F2F"><font size="2">(05:12:37 PM)</font> <b>schoppenhauer:</b></font> Lethalman: systemctl hibernate<br/>
<font color="#A82F2F"><font size="2">(05:12:46 PM)</font> <b>Lethalman:</b></font> mh<br/>
<font color="#A82F2F"><font size="2">(05:12:51 PM)</font> <b>LnL:</b></font> I updated the gist<br/>
<font color="#A82F2F"><font size="2">(05:12:53 PM)</font> <b>Lethalman:</b></font> there must be something missing in this modern swsuspend stuff<br/>
<font color="#A82F2F"><font size="2">(05:12:54 PM)</font> <b>Lethalman:</b></font> :P<br/>
<font color="#A82F2F"><font size="2">(05:13:18 PM)</font> <b>schoppenhauer:</b></font> I&apos;ll try pm-hibernate<br/>
<font color="#A82F2F"><font size="2">(05:13:34 PM)</font> <b>Lethalman:</b></font> I think it must be swsuspend when it has been suspended to it<br/>
<font color="#A82F2F"><font size="2">(05:13:36 PM)</font> <b>Lethalman:</b></font> or something<br/>
<font color="#A82F2F"><font size="2">(05:13:40 PM)</font> <b>Lethalman:</b></font> otherwise it&apos;s swap<br/>
<font color="#A82F2F"><font size="2">(05:13:57 PM)</font> <b>Lethalman:</b></font> it&apos;s like a way to distinguish between multiple swap, which one to be used when resuming<br/>
<font color="#A82F2F"><font size="2">(05:14:05 PM)</font> <b>Lethalman:</b></font> it makes sense, but don&apos;t know who should set that swsuspend<br/>
<font color="#A82F2F"><font size="2">(05:14:12 PM)</font> <b>Lethalman:</b></font> systemd code has no swsuspend reference<br/>
<font color="#A82F2F"><font size="2">(05:15:42 PM)</font> <b>Lethalman:</b></font> schoppenhauer, ah https://www.kernel.org/doc/Documentation/power/swsusp.txt<br/>
<font color="#A82F2F"><font size="2">(05:15:53 PM)</font> <b>Lethalman:</b></font> schoppenhauer, I think resume= on kernel line is used to tell that device to be used for suspend<br/>
<font color="#A82F2F"><font size="2">(05:15:59 PM)</font> <b>Lethalman:</b></font> so, BEFORE suspending I guess<br/>
<font color="#A82F2F"><font size="2">(05:16:02 PM)</font> <b>Lethalman:</b></font> not after being suspended<br/>
<font color="#A82F2F"><font size="2">(05:16:10 PM)</font> <b>Lethalman:</b></font> schoppenhauer, try rebooting with resume= and see if you get that swsuspend signature<br/>
<font color="#A82F2F"><font size="2">(05:17:09 PM)</font> <b>Lethalman:</b></font> or maybe not, no idea :S<br/>
<font color="#A82F2F"><font size="2">(05:18:40 PM)</font> <b>Lethalman:</b></font> ok so systemctl suspend etc. just write to /sys/power/state and /sys/power/disk, nothing fancy guys<br/>
<font color="#A82F2F"><font size="2">(05:18:43 PM)</font> <b>Lethalman:</b></font> everything else is our job<br/>
<font color="#A82F2F"><font size="2">(05:19:25 PM)</font> <b>schoppenhauer:</b></font> hm. there is an &quot;Unknown error -1&quot; or something ... it disappears too fast to actually read it.<br/>
<font color="#A82F2F"><font size="2">(05:23:04 PM)</font> <b>Lethalman:</b></font> on a side note, also dracut and others use swsuspend to detect which device to use for resume<br/>
<font color="#A82F2F"><font size="2">(05:29:32 PM)</font> <b>Lethalman:</b></font> schoppenhauer, confirming it&apos;s the kernel that sets swsuspend: http://lxr.devzen.net/source/xref/linux-stable/kernel/power/swap.c#221<br/>
<font color="#A82F2F"><font size="2">(05:29:39 PM)</font> <b>Lethalman:</b></font> but....<br/>
<font color="#A82F2F"><font size="2">(05:30:21 PM)</font> <b>Lethalman:</b></font> other initrd systems also check for suspend and swsupend :S<br/>
<font color="#A82F2F"><font size="2">(05:30:23 PM)</font> <b>LnL:</b></font> Lethalman: any ideas?<br/>
<font color="#A82F2F"><font size="2">(05:30:27 PM)</font> <b>Lethalman:</b></font> I guess swsupend is a typo :P<br/>
<font color="#A82F2F"><font size="2">(05:30:36 PM)</font> <b>Lethalman:</b></font> anyway with newer kernel it should just be swsuspend I hope<br/>
<font color="#A82F2F"><font size="2">(05:31:25 PM)</font> <b>Lethalman:</b></font> uhm but it&apos;s busybox...<br/>
<font color="#A82F2F"><font size="2">(05:31:42 PM)</font> <b>Lethalman:</b></font> LnL, what&apos;s the error<br/>
<font color="#A82F2F"><font size="2">(05:32:22 PM)</font> <b>LnL:</b></font> still the same<br/>
<font color="#A82F2F"><font size="2">(05:32:49 PM)</font> <b>Lethalman:</b></font> LnL, paste please<br/>
<font color="#A82F2F"><font size="2">(05:32:56 PM)</font> <b>Lethalman:</b></font> paste somewhere the command and the error<br/>
<font color="#A82F2F"><font size="2">(05:33:12 PM)</font> <b>schoppenhauer:</b></font> hm ... ok .. i changed stuff.<br/>
<font color="#A82F2F"><font size="2">(05:33:17 PM)</font> <b>schoppenhauer:</b></font> and it still does not work.<br/>
<font color="#A82F2F"><font size="2">(05:33:59 PM)</font> <b>Lethalman:</b></font> schoppenhauer, do you actually see whether it&apos;s hibernating? I think it should print something on the tty... also did you reboot with resume= before and after hibernate?<br/>
<font color="#A82F2F"><font size="2">(05:34:03 PM)</font> <b>Lethalman:</b></font> or suspend<br/>
<font color="#A82F2F"><font size="2">(05:34:53 PM)</font> <b>LnL:</b></font> Lethalman: https://gist.github.com/LnL7/5ee8eb08ca5f7703c314<br/>
<font color="#A82F2F"><font size="2">(05:35:14 PM)</font> <b>LnL:</b></font> first time trying to make a package fyi<br/>
<font color="#A82F2F"><font size="2">(05:35:23 PM)</font> <b>Lethalman:</b></font> LnL, you are calling potionHEAD.nix directly<br/>
<font color="#A82F2F"><font size="2">(05:35:27 PM)</font> <b>Lethalman:</b></font> but it accepts some argument<br/>
<font color="#A82F2F"><font size="2">(05:35:30 PM)</font> <b>Lethalman:</b></font> that you never pass<br/>
<font color="#A82F2F"><font size="2">(05:35:33 PM)</font> <b>Lethalman:</b></font> you understand this right?<br/>
<font color="#A82F2F"><font size="2">(05:35:42 PM)</font> <b>LnL:</b></font> oh<br/>
<font color="#A82F2F"><font size="2">(05:35:53 PM)</font> <b>Lethalman:</b></font> LnL, try nix-build -E &apos;with import &lt;nixpkgs&gt; {}; callPackage ./potionHEAD.nix {}&apos;<br/>
<font size="2">(05:54:01 PM)</font><b> The account has disconnected and you are no longer in this chat. You will automatically rejoin the chat when the account reconnects.</b><br/>
