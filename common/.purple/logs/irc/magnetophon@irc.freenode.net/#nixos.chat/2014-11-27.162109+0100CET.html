<html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Conversation with #nixos at Thu 27 Nov 2014 04:21:09 PM CET on magnetophon@irc.freenode.net (irc)</title></head><body><h3>Conversation with #nixos at Thu 27 Nov 2014 04:21:09 PM CET on magnetophon@irc.freenode.net (irc)</h3>
<font size="2">(04:21:09 PM)</font><b> The topic for #nixos is: <a href="http://nixos.org/">http://nixos.org/</a> || Latest NixOS: <a href="http://nixos.org/nixos/download.html">http://nixos.org/nixos/download.html</a> || Latest Nix: <a href="http://nixos.org/nix/download.html">http://nixos.org/nix/download.html</a> || Logs: <a href="http://nixos.org/irc/logs/">http://nixos.org/irc/logs/</a> || Swag: <a href="http://www.cafepress.co.uk/NixOS">http://www.cafepress.co.uk/NixOS</a></b><br/>
<font size="2">(04:21:09 PM)</font><b> Topic for #nixos set by niksnut!~eelco@ec2-54-216-36-73.eu-west-1.compute.amazonaws.com at 12:56:59 PM on 04/11/2014</b><br/>
<font size="2">(04:27:36 PM)</font><b> tv [<em>~tv@unaffiliated/tv</em>] entered the room.</b><br/>
<font size="2">(04:28:09 PM)</font><b> sj_mackenzie [<em>~sj_macken@pcd677237.netvigator.com</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(04:31:34 PM)</font> <b>iElectric:</b></font> aszlig: sure<br/>
<font color="#A82F2F"><font size="2">(04:33:52 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] rrnewton opened pull request #5156: Hsbencher -- Haskell benchmarking framework (master...hsbencher) http://git.io/Kcbt9g<br/>
<font color="#16569E"><font size="2">(04:36:48 PM)</font> <b>magnetophon:</b></font> Does nix have a tool for printing the primary selection? On debian I was using http://tools.suckless.org/sselp together with dmenu to search the web in various ways, and do other nifty things, based on the primary selection.<br/>
<font size="2">(04:36:53 PM)</font><b> joelteon left the room (quit: Ping timeout: 258 seconds).</b><br/>
<font size="2">(04:37:46 PM)</font><b> joelteon [<em>~joelteon@unaffiliated/otters</em>] entered the room.</b><br/>
<font size="2">(04:38:12 PM)</font><b> jgeerds left the room (quit: ).</b><br/>
<font color="#A82F2F"><font size="2">(04:38:51 PM)</font> <b>sj_mackenzie:</b></font> how do I get automake and autoconf into this hydra build? https://dpaste.de/fBq0<br/>
<font color="#A82F2F"><font size="2">(04:39:39 PM)</font> <b>Lethalman:</b></font> sj_mackenzie, first don&apos;t use configurePhase<br/>
<font color="#A82F2F"><font size="2">(04:39:46 PM)</font> <b>Lethalman:</b></font> sj_mackenzie, rather preConfigure = &quot;./autogen.sh&quot;<br/>
<font color="#A82F2F"><font size="2">(04:39:55 PM)</font> <b>Lethalman:</b></font> sj_mackenzie, second, just add autoconf and automake do buildInputs?<br/>
<font color="#A82F2F"><font size="2">(04:40:20 PM)</font> <b>sj_mackenzie:</b></font> ah okay<br/>
<font color="#A82F2F"><font size="2">(04:40:21 PM)</font> <b>sj_mackenzie:</b></font> ta<br/>
<font color="#A82F2F"><font size="2">(04:41:42 PM)</font> <b>sj_mackenzie:</b></font> beautiful<br/>
<font size="2">(04:41:45 PM)</font><b> btheado|2 [<em>~kvirc@99-11-193-233.lightspeed.cnwioh.sbcglobal.net</em>] entered the room.</b><br/>
<font size="2">(04:50:24 PM)</font><b> nslqqq1 [<em>~nsl@nslqqq.net</em>] entered the room.</b><br/>
<font size="2">(04:51:03 PM)</font><b> rycee left the room (quit: Ping timeout: 255 seconds).</b><br/>
<font size="2">(04:53:21 PM)</font><b> copumpkin left the room (quit: Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦).</b><br/>
<font size="2">(05:00:38 PM)</font><b> __Sander__ left the room (quit: Quit: Konversation terminated!).</b><br/>
<font size="2">(05:02:41 PM)</font><b> __Sander__ [<em>~sander@cust-95-128-95-82.breedbanddelft.nl</em>] entered the room.</b><br/>
<font size="2">(05:02:54 PM)</font><b> haribo-addict left the room (quit: ).</b><br/>
<font size="2">(05:05:47 PM)</font><b> favetelinguis [<em>~favetelin@90-227-138-205-no186.tbcn.telia.com</em>] entered the room.</b><br/>
<font size="2">(05:08:06 PM)</font><b> echo_oddly left the room (quit: Ping timeout: 250 seconds).</b><br/>
<font size="2">(05:09:21 PM)</font><b> Shados [<em>~shados@shados.net</em>] entered the room.</b><br/>
<font size="2">(05:11:34 PM)</font><b> Shados left the room (quit: Remote host closed the connection).</b><br/>
<font size="2">(05:11:41 PM)</font><b> Shados [<em>~shados@shados.net</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(05:11:48 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] pSub closed pull request #5156: Hsbencher -- Haskell benchmarking framework (master...hsbencher) http://git.io/Kcbt9g<br/>
<font size="2">(05:12:05 PM)</font><b> Shados left the room (quit: Remote host closed the connection).</b><br/>
<font size="2">(05:13:12 PM)</font><b> Lowl3v3l [<em>~Lowl3v3l@2a02:810a:8380:92c:2cb0:795:90a6:3c</em>] entered the room.</b><br/>
<font size="2">(05:14:15 PM)</font><b> Shados [<em>~shados@shados.net</em>] entered the room.</b><br/>
<font size="2">(05:14:30 PM)</font><b> Shados left the room (quit: Remote host closed the connection).</b><br/>
<font size="2">(05:14:59 PM)</font><b> Shados [<em>~shados@shados.net</em>] entered the room.</b><br/>
<font size="2">(05:21:52 PM)</font><b> devhell [<em>c242a51d@gateway/web/freenode/ip.194.66.165.29</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(05:22:44 PM)</font> <b>devhell:</b></font> hi all, just a quick question: I had to activate a second-to-previous generation to recover my system. How do I make this generation my default to boot in now?<br/>
<font size="2">(05:23:57 PM)</font><b> komarov [<em>~komarov@46.227.191.76</em>] entered the room.</b><br/>
<font color="#16569E"><font size="2">(05:24:09 PM)</font> <b>magnetophon:</b></font> Where should I put man-pages? Leaving this: http://git.suckless.org/sselp/tree/config.mk?id=0.2#n8 at default doesn't work.<br/>
<font color="#16569E"><font size="2">(05:24:49 PM)</font> <b>magnetophon:</b></font> otherwise, I've got another one of my tools into a working .nix :D<br/>
<font color="#A82F2F"><font size="2">(05:25:30 PM)</font> <b>niksnut:</b></font> magnetophon: $out/share/man<br/>
<font color="#A82F2F"><font size="2">(05:25:38 PM)</font> <b>niksnut:</b></font> so setting PREFIX to $out should be enough<br/>
<font color="#16569E"><font size="2">(05:25:50 PM)</font> <b>magnetophon:</b></font> niksnut: daar zijn ze nu...<br/>
<font color="#16569E"><font size="2">(05:26:11 PM)</font> <b>magnetophon:</b></font> for the rest: that's what i did.<br/>
<font color="#16569E"><font size="2">(05:26:16 PM)</font> <b>magnetophon:</b></font> :)<br/>
<font color="#A82F2F"><font size="2">(05:26:33 PM)</font> <b>niksnut:</b></font> so what doesn&apos;t work? man can&apos;t find them?<br/>
<font color="#16569E"><font size="2">(05:26:42 PM)</font> <b>magnetophon:</b></font> niksnut: exactly<br/>
<font color="#A82F2F"><font size="2">(05:27:05 PM)</font> <b>niksnut:</b></font> depending on you man implementation, you may need to set $MANPATH<br/>
<font color="#16569E"><font size="2">(05:28:59 PM)</font> <b>magnetophon:</b></font> niksnut: MY man implementation? I thought I was using YOUR man implementation!?  but seriously: that went over my head. I know how to set env variables in a wrapper, but that's not what we want here is it?<br/>
<font color="#A82F2F"><font size="2">(05:29:18 PM)</font> <b>niksnut:</b></font> magnetophon: you didn&apos;t say what system you&apos;re running on<br/>
<font color="#16569E"><font size="2">(05:29:28 PM)</font> <b>magnetophon:</b></font> niksnut: yours :)<br/>
<font color="#16569E"><font size="2">(05:29:41 PM)</font> <b>magnetophon:</b></font> 14.04<br/>
<font color="#A82F2F"><font size="2">(05:29:49 PM)</font> <b>niksnut:</b></font> on NixOS, man searches profile directories etc.<br/>
<font size="2">(05:30:07 PM)</font><b> komarov left the room (quit: Ping timeout: 255 seconds).</b><br/>
<font size="2">(05:30:44 PM)</font><b> the_scourge left the room (quit: Remote host closed the connection).</b><br/>
<font size="2">(05:30:48 PM)</font><b> komarov [<em>~komarov@46.227.191.61</em>] entered the room.</b><br/>
<font size="2">(05:30:54 PM)</font><b> skchrko left the room (quit: Quit: Leaving).</b><br/>
<font color="#A82F2F"><font size="2">(05:31:17 PM)</font> <b>niksnut:</b></font> see e.g. &quot;man -w&quot;<br/>
<font color="#A82F2F"><font size="2">(05:33:10 PM)</font> <b>iElectric:</b></font>  [27/Nov/2014:17:32:36 +0100] copy_file(&quot;/var/spool/cups/00000000&quot;, &quot;/nix/store/ppd/DeskjetLocal3.ppd&quot;)<br/>
<font color="#A82F2F"><font size="2">(05:33:18 PM)</font> <b>iElectric:</b></font> yeah well, that might not work.<br/>
<font color="#A82F2F"><font size="2">(05:33:52 PM)</font> <b>aszlig:</b></font> iElectric: there are pyc files indeed, coming from upstream sources X-/<br/>
<font color="#A82F2F"><font size="2">(05:34:16 PM)</font> <b>iElectric:</b></font> aszlig: so let&apos;s delete them<br/>
<font color="#A82F2F"><font size="2">(05:34:20 PM)</font> <b>aszlig:</b></font> so i&apos;m going to clean them up in prePatch<br/>
<font color="#A82F2F"><font size="2">(05:34:24 PM)</font> <b>aszlig:</b></font> iElectric: yep :-)<br/>
<font color="#A82F2F"><font size="2">(05:34:43 PM)</font> <b>iElectric:</b></font> also watch out for .pyo<br/>
<font color="#A82F2F"><font size="2">(05:35:27 PM)</font> <b>aszlig:</b></font> im already using find . -iname &apos;*.py[co]&apos; -delete<br/>
<font color="#A82F2F"><font size="2">(05:36:39 PM)</font> <b>aszlig:</b></font> so even if it&apos;s a .PYO it should be deleted ;-)<br/>
<font color="#A82F2F"><font size="2">(05:36:43 PM)</font> <b>Shados:</b></font> devhell: If you needed to recover your system after some change, wouldn&apos;t you just want to fix the issue caused by the change and rebuild again rather than reverting permanently?<br/>
<font color="#A82F2F"><font size="2">(05:37:21 PM)</font> <b>devhell:</b></font> Shados: actually, yes. Duh. Thanks :)<br/>
<font color="#A82F2F"><font size="2">(05:37:35 PM)</font> <b>aszlig:</b></font> devhell: by selecting the entry from the grub menu?<br/>
<font color="#A82F2F"><font size="2">(05:37:38 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] edolstra pushed 1 new commit to master: http://git.io/VbXiDQ<br/>
<font color="#A82F2F"><font size="2">(05:37:38 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master e7cd18e Eelco Dolstra: Don&apos;t set $MANPATH...<br/>
<font size="2">(05:38:15 PM)</font><b> echo_oddly [<em>~echo_oddl@adsl-76-199-161-230.dsl.milwwi.sbcglobal.net</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(05:38:35 PM)</font> <b>devhell:</b></font> aszlig: nevermind, brainfart.<br/>
<font color="#A82F2F"><font size="2">(05:38:48 PM)</font> <b>aszlig:</b></font> k<br/>
<font color="#A82F2F"><font size="2">(05:39:39 PM)</font> <b>Shados:</b></font> devhell: if you really do just want to revert the change without dealing with the issue right then and there, pretty sure that&apos;s what `nixos-rebuild --rollback` is for, although I&apos;ve never used it so could be wrong<br/>
<font color="#A82F2F"><font size="2">(05:39:54 PM)</font> <b>aszlig:</b></font> iElectric: hmhm, actually i was wrong... they&apos;re not coming from upstream<br/>
<font color="#A82F2F"><font size="2">(05:40:01 PM)</font> <b>Shados:</b></font> er, there should be a `switch` in there as well<br/>
<font color="#A82F2F"><font size="2">(05:40:02 PM)</font> <b>Shados:</b></font> but yeah<br/>
<font color="#A82F2F"><font size="2">(05:40:29 PM)</font> <b>devhell:</b></font> Shados: I did use that, but for some reason I thought it would be a good idea to try and rebuild it again, &quot;just in case&quot;... which therefore gave me 2 defective generations.<br/>
<font color="#A82F2F"><font size="2">(05:40:39 PM)</font> <b>aszlig:</b></font> iElectric: they&apos;re coming from the unbundling process<br/>
<font color="#A82F2F"><font size="2">(05:40:51 PM)</font> <b>Shados:</b></font> if you don&apos;t want the immediately-previous configuration then you need to use one of the switch-to-configuration scripts in /nix/var/nix/profiels/system-*-link/bin<br/>
<font color="#A82F2F"><font size="2">(05:40:54 PM)</font> <b>devhell:</b></font> So I had to revert to the second-to-previous to get back.<br/>
<font color="#A82F2F"><font size="2">(05:41:19 PM)</font> <b>Shados:</b></font> although you could also just rollback N times I guess xD<br/>
<font color="#A82F2F"><font size="2">(05:41:29 PM)</font> <b>devhell:</b></font> yeah... :)<br/>
<font color="#A82F2F"><font size="2">(05:42:06 PM)</font> <b>aszlig:</b></font> devhell: nix-env -p system -G &lt;id&gt;<br/>
<font color="#A82F2F"><font size="2">(05:42:54 PM)</font> <b>aszlig:</b></font> that way you can roll back to a specific generation<br/>
<font color="#A82F2F"><font size="2">(05:43:06 PM)</font> <b>devhell:</b></font> obviously reverting the changes in the configuration.nix file and then rebuilding again will give me a current working system again which is fine..<br/>
<font color="#A82F2F"><font size="2">(05:43:19 PM)</font> <b>devhell:</b></font> aszlig: thanks, I&apos;ll note it down. That&apos;s what I was originally looking for.<br/>
<font color="#A82F2F"><font size="2">(05:43:53 PM)</font> <b>Shados:</b></font> Mm, it&apos;d be neat to be able to select configuration to boot during stage-1 init instead of at the grub menu, as then you could do it over the network and stuff... could you achieve that with a specially-crafted initramfs + kexec or such?<br/>
<font color="#A82F2F"><font size="2">(05:45:19 PM)</font> <b>aszlig:</b></font> devhell: also don&apos;t forget to do something like /nix/var/nix/profiles/system/bin/switch-to-configuration<br/>
<font color="#A82F2F"><font size="2">(05:46:22 PM)</font> <b>aszlig:</b></font> Shados: could be useful for nixops for example<br/>
<font color="#A82F2F"><font size="2">(05:46:35 PM)</font> <b>devhell:</b></font> aszlig: yar, I&apos;ll try to remember that, although, honestly, just switching to a working generation and then reverting the changes and then rebuilding actually seems not so bad XD<br/>
<font color="#A82F2F"><font size="2">(05:47:03 PM)</font> <b>aszlig:</b></font> devhell: yep =)<br/>
<font color="#A82F2F"><font size="2">(05:47:43 PM)</font> <b>iElectric:</b></font> aszlig: so are those generated because we run the files, or are they copied?<br/>
<font color="#A82F2F"><font size="2">(05:48:01 PM)</font> <b>Shados:</b></font> aszlig: I have a headless router running NixOS that it would be useful for, in case I ever break the config completely it&apos;d mean I wouldn&apos;t have to move a monitor+keyboard over there :P<br/>
<font color="#A82F2F"><font size="2">(05:48:17 PM)</font> <b>aszlig:</b></font> iElectric: because we run the script that unbundles dependencies we already have in &lt;nixpkgs&gt;<br/>
<font size="2">(05:48:34 PM)</font><b> dannyg left the room.</b><br/>
<font color="#A82F2F"><font size="2">(05:49:08 PM)</font> <b>devhell:</b></font> on that note, activating services.virtualbox.enable made display-manager.service not want to start -_-<br/>
<font color="#A82F2F"><font size="2">(05:49:19 PM)</font> <b>devhell:</b></font> well<br/>
<font color="#A82F2F"><font size="2">(05:49:23 PM)</font> <b>aszlig:</b></font> devhell: ah, that&apos;s for guest additions<br/>
<font color="#A82F2F"><font size="2">(05:49:36 PM)</font> <b>devhell:</b></font> it did start... but X failed..<br/>
<font color="#A82F2F"><font size="2">(05:49:44 PM)</font> <b>devhell:</b></font> argh... you know what I mean<br/>
<font color="#A82F2F"><font size="2">(05:49:55 PM)</font> <b>aszlig:</b></font> try: imports = [ &lt;nixpkgs/nixos/modules/programs/virtualbox.nix&gt; ]<br/>
<font color="#A82F2F"><font size="2">(05:50:31 PM)</font> <b>devhell:</b></font> errr... it&apos;s complaining about vbox<br/>
<font color="#A82F2F"><font size="2">(05:50:31 PM)</font> <b>aszlig:</b></font> devhell: iirc, xorg should get the display drivers from the guest additions<br/>
<font color="#A82F2F"><font size="2">(05:51:16 PM)</font> <b>devhell:</b></font> getting a &quot;cannot access the kernel driver&quot; message from vbox<br/>
<font color="#A82F2F"><font size="2">(05:51:23 PM)</font> <b>aszlig:</b></font> iElectric: okay, now the py[co] files are gone *committing and pushing*<br/>
