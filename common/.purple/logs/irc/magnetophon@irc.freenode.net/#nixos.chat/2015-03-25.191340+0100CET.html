<html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Conversation with #nixos at Wed 25 Mar 2015 07:13:40 PM CET on magnetophon@irc.freenode.net (irc)</title></head><body><h3>Conversation with #nixos at Wed 25 Mar 2015 07:13:40 PM CET on magnetophon@irc.freenode.net (irc)</h3>
<font size="2">(07:13:40 PM)</font><b> The topic for #nixos is: <a href="http://nixos.org/">http://nixos.org/</a> || Latest NixOS: <a href="http://nixos.org/nixos/download.html">http://nixos.org/nixos/download.html</a> || Latest Nix: <a href="http://nixos.org/nix/download.html">http://nixos.org/nix/download.html</a> || Logs: <a href="http://nixos.org/irc/logs/">http://nixos.org/irc/logs/</a> || Swag: <a href="http://www.cafepress.co.uk/NixOS">http://www.cafepress.co.uk/NixOS</a></b><br/>
<font size="2">(07:13:40 PM)</font><b> Topic for #nixos set by niksnut!~eelco@ec2-54-216-36-73.eu-west-1.compute.amazonaws.com at 12:56:59 PM on 04/11/2014</b><br/>
<font color="#A82F2F"><font size="2">(07:25:14 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] wkennington pushed 1 new commit to master: http://git.io/jtle<br/>
<font color="#A82F2F"><font size="2">(07:25:14 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master a040e15 William A. Kennington III: kernel: 3.18.9 -&gt; 3.18.10<br/>
<font color="#A82F2F"><font size="2">(07:25:54 PM)</font> <b>qknight:</b></font> http://shackspace.de/?p=4935<br/>
<font color="#A82F2F"><font size="2">(07:26:01 PM)</font> <b>qknight:</b></font> nixos hack session in stuttgart<br/>
<font color="#A82F2F"><font size="2">(07:30:27 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] wkennington pushed 1 new commit to master: http://git.io/jtB5<br/>
<font color="#A82F2F"><font size="2">(07:30:27 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 4d47c0d William A. Kennington III: kernel-config: Add microcode support + early loading on new kernels<br/>
<font color="#A82F2F"><font size="2">(07:34:41 PM)</font> <b>straycat:</b></font> does nixos have premerge testing?<br/>
<font color="#A82F2F"><font size="2">(07:34:50 PM)</font> <b>straycat:</b></font> i mean do the developers do this<br/>
<font color="#A82F2F"><font size="2">(07:35:05 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] peti pushed 4 new commits to master: http://git.io/jt0j<br/>
<font color="#A82F2F"><font size="2">(07:35:05 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master a3de855 Emery Hemingway: RStudio: initial commit at version 0.98.110<br/>
<font color="#A82F2F"><font size="2">(07:35:05 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 9ce41e3 Peter Simons: rstudio: fix Emacs syntax highlighting<br/>
<font color="#A82F2F"><font size="2">(07:35:05 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 279429b Peter Simons: hunspell-dictionaries: update french dictonary to fix the build...<br/>
<font color="#A82F2F"><font size="2">(07:35:49 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] peti closed pull request #6976: RStudio: initial commit at version 0.98.110 (was #6957) (master...rstudio) http://git.io/jLIp<br/>
<font color="#A82F2F"><font size="2">(07:38:18 PM)</font> <b>the-kenny:</b></font> straycat: you mean testing pull requests/patches before merging? I personally try to do it, but sometimes it&apos;s just not feasible (e.g. when a patch causes a full rebuild of the world)<br/>
<font color="#062585"><font size="2">(07:39:55 PM)</font> <b>***straycat</b></font> nods<br/>
<font color="#A82F2F"><font size="2">(07:41:46 PM)</font> <b>benley:</b></font> if there&apos;s going to be a giant rebuild, that&apos;s what the staging branch is supposed to be for, right?<br/>
<font color="#A82F2F"><font size="2">(07:41:46 PM)</font> <b>straycat:</b></font> so there&apos;s nothing automated for this?<br/>
<font color="#A82F2F"><font size="2">(07:41:46 PM)</font> <b>qknight:</b></font> that is a rather interesting question and i think i&apos;ve never seen any documentaiton covering this subject<br/>
<font color="#A82F2F"><font size="2">(07:44:03 PM)</font> <b>ttuegel:</b></font> there are travis jobs for pull requests<br/>
<font color="#A82F2F"><font size="2">(07:44:42 PM)</font> <b>gridaphobe:</b></font> unfortunately travis breaks regularly and people seem to ignore it :/<br/>
<font color="#A82F2F"><font size="2">(07:45:26 PM)</font> <b>ttuegel:</b></font> the travis builds wouldn&apos;t break if we held the breaking-commiters responsible<br/>
<font color="#A82F2F"><font size="2">(07:45:55 PM)</font> <b>gridaphobe:</b></font> yes :) it&apos;s definitely a social issue<br/>
<font color="#A82F2F"><font size="2">(07:46:02 PM)</font> <b>straycat:</b></font> if it breaks doesn&apos;t that just mean the pr gets rejected?<br/>
<font color="#A82F2F"><font size="2">(07:46:15 PM)</font> <b>kmicu:</b></font> Hang â€˜Em High.<br/>
<font color="#A82F2F"><font size="2">(07:46:23 PM)</font> <b>gridaphobe:</b></font> not in practice, i think many people expect travis to break<br/>
<font color="#A82F2F"><font size="2">(07:46:34 PM)</font> <b>henrytill:</b></font> benley: yep<br/>
<font color="#A82F2F"><font size="2">(07:46:56 PM)</font> <b>ttuegel:</b></font> straycat: the problem isn&apos;t that PRs break, it&apos;s that unrelated changes break the entire travis process<br/>
<font color="#A82F2F"><font size="2">(07:47:05 PM)</font> <b>benley:</b></font> travis is an unfortunate state of affairs<br/>
<font color="#A82F2F"><font size="2">(07:47:29 PM)</font> <b>ttuegel:</b></font> there&apos;s also the problem that the travis time limits mean large PRs ALWAYS fail<br/>
<font color="#A82F2F"><font size="2">(07:47:55 PM)</font> <b>benley:</b></font> yeah - not sure what to do about that one.<br/>
<font color="#A82F2F"><font size="2">(07:48:30 PM)</font> <b>benley:</b></font> it would be great if it was possible to have a hydra instance run test builds for PRs<br/>
<font color="#A82F2F"><font size="2">(07:48:34 PM)</font> <b>gridaphobe:</b></font> ttuegel: we could circumvent the time limit to some extent by splitting builds<br/>
<font color="#A82F2F"><font size="2">(07:48:46 PM)</font> <b>gridaphobe:</b></font> e.g. have one that just makes sure nixpkgs evaluates fully<br/>
<font color="#A82F2F"><font size="2">(07:48:56 PM)</font> <b>gridaphobe:</b></font> and a separate one to attempt any actual builds<br/>
<font color="#A82F2F"><font size="2">(07:49:11 PM)</font> <b>ttuegel:</b></font> gridaphobe: can you make travis do that for each PR?<br/>
<font color="#A82F2F"><font size="2">(07:49:14 PM)</font> <b>benley:</b></font> oh yeah, you can totally have travis trigger multiple builds per PR can&apos;t you<br/>
<font color="#A82F2F"><font size="2">(07:49:42 PM)</font> <b>gridaphobe:</b></font> ttuegel: yep, by adding env vars<br/>
<font color="#A82F2F"><font size="2">(07:49:49 PM)</font> <b>benley:</b></font> it&apos;s meant to do things like &quot;test this change with python versions X Y Z&quot; or multiple platforms, but you can use it for anything technically<br/>
<font color="#A82F2F"><font size="2">(07:49:56 PM)</font> <b>gridaphobe:</b></font> e.g. TEST=eval, TEST=build<br/>
<font color="#A82F2F"><font size="2">(07:50:03 PM)</font> <b>ttuegel:</b></font> ah<br/>
<font color="#A82F2F"><font size="2">(07:50:18 PM)</font> <b>gridaphobe:</b></font> http://docs.travis-ci.com/user/speeding-up-the-build/<br/>
<font color="#A82F2F"><font size="2">(07:50:21 PM)</font> <b>ttuegel:</b></font> i never thought of using that way<br/>
<font color="#A82F2F"><font size="2">(07:50:28 PM)</font> <b>straycat:</b></font> we&apos;ve been experimenting with gerrit, but it seems to have some drawbacks<br/>
<font color="#A82F2F"><font size="2">(07:50:32 PM)</font> <b>gridaphobe:</b></font> they even recommend it :)<br/>
<font color="#A82F2F"><font size="2">(07:50:50 PM)</font> <b>straycat:</b></font> namely, there&apos;s no concept of a patch series &gt;.&gt;<br/>
<font color="#A82F2F"><font size="2">(07:50:59 PM)</font> <b>benley:</b></font> straycat: I&apos;ve got a lot of experience as a gerrit admin fwiw<br/>
<font color="#A82F2F"><font size="2">(07:50:59 PM)</font> <b>ttuegel:</b></font> i&apos;d say we should at least split up eval and build. eval should *always* pass<br/>
<font size="2">(07:51:03 PM)</font><b> suvash_away is now known as suvash</b><br/>
<font color="#A82F2F"><font size="2">(07:51:20 PM)</font> <b>benley:</b></font> patch series, as in a pull-request with many commits in it?<br/>
<font color="#A82F2F"><font size="2">(07:51:26 PM)</font> <b>straycat:</b></font> yes<br/>
<font color="#A82F2F"><font size="2">(07:51:37 PM)</font> <b>benley:</b></font> you can at least have chained dependent commits in gerrit<br/>
<font color="#A82F2F"><font size="2">(07:51:50 PM)</font> <b>benley:</b></font> but they&apos;re separate code reviews in that case<br/>
<font color="#A82F2F"><font size="2">(07:52:10 PM)</font> <b>straycat:</b></font> yes, it doesn&apos;t seem *too* nice<br/>
<font color="#A82F2F"><font size="2">(07:52:22 PM)</font> <b>benley:</b></font> there&apos;s kindof a workaround for that, actually.<br/>
<font color="#A82F2F"><font size="2">(07:52:31 PM)</font> <b>straycat:</b></font> oh?<br/>
<font color="#A82F2F"><font size="2">(07:52:46 PM)</font> <b>benley:</b></font> If you push a branch containing all the commits you want to merge into master, you can then open a code review for just a merge commit.<br/>
<font color="#A82F2F"><font size="2">(07:53:34 PM)</font> <b>benley:</b></font> but that means you _don&apos;t_ get a review for the individual commits, and at least as of a few versions ago it did a crappy job of displaying the diff for the merge commit.<br/>
<font color="#A82F2F"><font size="2">(07:53:47 PM)</font> <b>benley:</b></font> (last version I used was 2.8 I think)<br/>
<font color="#A82F2F"><font size="2">(07:54:01 PM)</font> <b>benley:</b></font> straycat: btw have you seen http://reviewable.io ?<br/>
<font color="#A82F2F"><font size="2">(07:54:05 PM)</font> <b>straycat:</b></font> no<br/>
<font color="#A82F2F"><font size="2">(07:54:33 PM)</font> <b>benley:</b></font> it gives you a code review flow that&apos;s comparable to Gerrit, but it works excellently with github, and handles patch series.<br/>
<font color="#A82F2F"><font size="2">(07:54:50 PM)</font> <b>benley:</b></font> a reviewable.io code review === a github pull request<br/>
<font color="#A82F2F"><font size="2">(07:55:11 PM)</font> <b>ktosiek:</b></font> benley: I&apos;m on 2.9.something, still can&apos;t review series of patches<br/>
<font color="#A82F2F"><font size="2">(07:55:26 PM)</font> <b>ktosiek:</b></font> and it doesn&apos;t seem like they want to add that<br/>
<font color="#A82F2F"><font size="2">(07:55:51 PM)</font> <b>benley:</b></font> reviewable also does an awesome job of showing evolution of a patchset over time, even when commits get replaced<br/>
<font color="#A82F2F"><font size="2">(07:56:03 PM)</font> <b>benley:</b></font> ktosiek: yeah it&apos;s kinda counter to gerrit&apos;s operational model<br/>
<font color="#A82F2F"><font size="2">(07:56:17 PM)</font> <b>straycat:</b></font> benley, at a glance doesn&apos;t seem to provide any pre-merge testing which is our main motivation for using a gerrit<br/>
<font color="#A82F2F"><font size="2">(07:56:37 PM)</font> <b>benley:</b></font> oh reviewable doesn&apos;t change the CI/testing flow, that&apos;s still all github.<br/>
<font color="#A82F2F"><font size="2">(07:56:55 PM)</font> <b>benley:</b></font> If you want to fix pre-merge testing in a way that travis can&apos;t, maybe consider Jenkins?<br/>
<font color="#062585"><font size="2">(07:57:13 PM)</font> <b>***ktosiek</b></font> has a love-hate relationship with Jenkins<br/>
<font color="#A82F2F"><font size="2">(07:57:18 PM)</font> <b>benley:</b></font> yeah, me too.<br/>
<font color="#A82F2F"><font size="2">(07:57:33 PM)</font> <b>straycat:</b></font> hrm, i think that&apos;s already been tried, sadly<br/>
<font color="#A82F2F"><font size="2">(07:57:40 PM)</font> <b>benley:</b></font> it&apos;s kinda awful, but effective<br/>
<font color="#A82F2F"><font size="2">(07:58:32 PM)</font> <b>straycat:</b></font> so, pushing just the entire branch as a merge, is, unreadable?<br/>
<font color="#A82F2F"><font size="2">(07:58:40 PM)</font> <b>straycat:</b></font> i&apos;m tempted to try it<br/>
<font color="#A82F2F"><font size="2">(07:58:53 PM)</font> <b>benley:</b></font> Hrm. How hard would it be to programmatically reconfigure an instance of hydra to create a job for each pull request that comes in?<br/>
<font color="#A82F2F"><font size="2">(07:59:10 PM)</font> <b>the-kenny:</b></font> benley: likely not too hard. But hydra is already over capacity<br/>
<font color="#A82F2F"><font size="2">(07:59:22 PM)</font> <b>benley:</b></font> the-kenny: I don&apos;t mean The One True Hydra :)<br/>
<font color="#A82F2F"><font size="2">(07:59:26 PM)</font> <b>the-kenny:</b></font> ah<br/>
<font color="#A82F2F"><font size="2">(07:59:28 PM)</font> <b>benley:</b></font> just thinking about hydra the software<br/>
<font color="#A82F2F"><font size="2">(07:59:51 PM)</font> <b>benley:</b></font> straycat: oh another caveat with gerrit and merges - if you&apos;re using the git-review tool to open code reviews, it will always try to open a review for every commit<br/>
<font color="#A82F2F"><font size="2">(08:00:01 PM)</font> <b>the-kenny:</b></font> benley: github has this &apos;feature&apos; where you can add a ref that will automatically contain all pull requests. I&apos;m sure you can work from there.<br/>
<font color="#A82F2F"><font size="2">(08:00:23 PM)</font> <b>benley:</b></font> the-kenny: interesting, I haven&apos;t heard of that!<br/>
<font color="#A82F2F"><font size="2">(08:01:05 PM)</font> <b>the-kenny:</b></font> benley: https://gist.github.com/piscisaureus/3342247<br/>
<font color="#A82F2F"><font size="2">(08:01:23 PM)</font> <b>benley:</b></font> straycat: but if you do the thing where you push a branch, then open a review for just the merge by doing &apos;git push gerrit &lt;mergecommit&gt;:refs/for/master&apos; or something like that, it ought to work. I think. If I remember correctly :)<br/>
<font color="#A82F2F"><font size="2">(08:01:45 PM)</font> <b>straycat:</b></font> okay<br/>
<font color="#A82F2F"><font size="2">(08:01:51 PM)</font> <b>benley:</b></font> the-kenny: aha so you can at least get named references for PRs<br/>
<font color="#A82F2F"><font size="2">(08:02:41 PM)</font> <b>straycat:</b></font> benley, i&apos;ll check that out thanks :)<br/>
<font color="#062585"><font size="2">(08:02:43 PM)</font> <b>***benley</b></font> &lt;--- spent way too much time wrestling with gerrit at his last job<br/>
<font color="#A82F2F"><font size="2">(08:02:48 PM)</font> <b>benley:</b></font> yw :)<br/>
<font color="#A82F2F"><font size="2">(08:10:04 PM)</font> <b>Fuuzetsu:</b></font> there&apos;s a patch for ansi-wl-pprint somewhere and it applies during build but I don&apos;t know *where*<br/>
<font color="#A82F2F"><font size="2">(08:15:10 PM)</font> <b>Fuuzetsu:</b></font> oooooh, it probably uses patchFromGitHub or something somewhere<br/>
<font color="#A82F2F"><font size="2">(08:15:13 PM)</font> <b>Fuuzetsu:</b></font> that damn thing is ungreppable<br/>
<font color="#A82F2F"><font size="2">(08:15:35 PM)</font> <b>Fuuzetsu:</b></font> hah, who would have guessed<br/>
<font size="2">(08:15:47 PM)</font><b> ikwildrpepper left the room (quit: Ping timeout: 256 seconds).</b><br/>
<font size="2">(08:16:47 PM)</font><b> ikwildrpepper [<em>~rbvermaa@li198-191.members.linode.com</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(08:17:37 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] Fuuzetsu opened pull request #6980: ansi-wl-pprint: don&apos;t patch anymore (master...remove-ansi-patch) http://git.io/jt55<br/>
<font color="#A82F2F"><font size="2">(08:27:51 PM)</font> <b>yorick:</b></font> so why has there still not been an evaluation since the things were hopefully fixed?<br/>
<font size="2">(08:28:47 PM)</font><b> MichaelRaskin left the room (quit: Quit: MichaelRaskin).</b><br/>
<font color="#A82F2F"><font size="2">(08:29:00 PM)</font> <b>ttuegel:</b></font> yorick: there was an evaluation, it&apos;s still running<br/>
<font color="#A82F2F"><font size="2">(08:29:07 PM)</font> <b>yorick:</b></font> ah, okay<br/>
<font color="#A82F2F"><font size="2">(08:34:09 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] peti pushed 1 new commit to master: http://git.io/jtju<br/>
<font color="#A82F2F"><font size="2">(08:34:09 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 706b227 Peter Simons: haskell-esqueleto fails its test suite.<br/>
<font color="#A82F2F"><font size="2">(08:36:19 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] peti pushed 2 new commits to master: http://git.io/jqe4<br/>
<font color="#A82F2F"><font size="2">(08:36:19 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 5faa4e5 Mateusz Kowalczyk: ansi-wl-pprint: don&apos;t patch anymore...<br/>
<font color="#A82F2F"><font size="2">(08:36:19 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master bdd4304 Peter Simons: Merge pull request #6980 from Fuuzetsu/remove-ansi-patch...<br/>
<font color="#A82F2F"><font size="2">(08:37:11 PM)</font> <b>benley:</b></font> whoa, I don&apos;t think I&apos;ve seen appendPatch before, or fetchpatch<br/>
<font color="#A82F2F"><font size="2">(08:38:09 PM)</font> <b>benley:</b></font> oh ha that&apos;s because appendPatch is defined in haskell-modules/lib.nix<br/>
<font size="2">(08:39:49 PM)</font><b> roconnor [<em>roconnor@nat/google/x-rwixjckfeokksazt</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(08:43:51 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] jagajaga pushed 2 new commits to master: http://git.io/jqUu<br/>
<font color="#A82F2F"><font size="2">(08:43:51 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master f5200fd dabus: Bump version of the_silver_searcher: 0.24.1 -&gt; 0.29.1<br/>
<font color="#A82F2F"><font size="2">(08:43:51 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 0d186a8 Arseniy Seroka: Merge pull request #6977 from nomosyn/master...<br/>
<font size="2">(08:48:55 PM)</font><b> suvash is now known as suvash_away</b><br/>
