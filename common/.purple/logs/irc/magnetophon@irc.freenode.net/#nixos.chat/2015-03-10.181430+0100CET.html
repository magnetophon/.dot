<html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Conversation with #nixos at Tue 10 Mar 2015 06:14:30 PM CET on magnetophon@irc.freenode.net (irc)</title></head><body><h3>Conversation with #nixos at Tue 10 Mar 2015 06:14:30 PM CET on magnetophon@irc.freenode.net (irc)</h3>
<font size="2">(06:14:30 PM)</font><b> The topic for #nixos is: <a href="http://nixos.org/">http://nixos.org/</a> || Latest NixOS: <a href="http://nixos.org/nixos/download.html">http://nixos.org/nixos/download.html</a> || Latest Nix: <a href="http://nixos.org/nix/download.html">http://nixos.org/nix/download.html</a> || Logs: <a href="http://nixos.org/irc/logs/">http://nixos.org/irc/logs/</a> || Swag: <a href="http://www.cafepress.co.uk/NixOS">http://www.cafepress.co.uk/NixOS</a></b><br/>
<font size="2">(06:14:30 PM)</font><b> Topic for #nixos set by niksnut!~eelco@ec2-54-216-36-73.eu-west-1.compute.amazonaws.com at 12:56:59 PM on 04/11/2014</b><br/>
<font color="#A82F2F"><font size="2">(06:14:45 PM)</font> <b>the-kenny:</b></font> ksf: This has *nothing* to do with my problem.<br/>
<font color="#A82F2F"><font size="2">(06:15:10 PM)</font> <b>offlinehacker:</b></font> Lethalman: which tool you use to enter namespace?<br/>
<font color="#A82F2F"><font size="2">(06:15:16 PM)</font> <b>the-kenny:</b></font> Haskellfant: cgls is a good idea. Checking.<br/>
<font color="#A82F2F"><font size="2">(06:15:27 PM)</font> <b>vcunat:</b></font> joelteon: now LocaleGettext fails on Linux<br/>
<font color="#A82F2F"><font size="2">(06:15:31 PM)</font> <b>ksf:</b></font> wasn&apos;t supposed to be a lecture, just a subtle hint that it might, surrounding conditions allowing, not a problem you want to fix.<br/>
<font color="#A82F2F"><font size="2">(06:15:32 PM)</font> <b>Lethalman:</b></font> offlinehacker, it&apos;s that new buildFHSUserEnv: https://github.com/NixOS/nixpkgs/blob/b1adfeb23d956908a10b0e628790c8cc689defbb/pkgs/build-support/build-fhs-userenv/chroot-user.rb<br/>
<font color="#A82F2F"><font size="2">(06:15:37 PM)</font> <b>joelteon:</b></font> vcunat: volleyball!<br/>
<font color="#A82F2F"><font size="2">(06:15:45 PM)</font> <b>Lethalman:</b></font> offlinehacker, creates a single command where it automatically joins a chroot and runs the command<br/>
<font color="#A82F2F"><font size="2">(06:15:47 PM)</font> <b>Lethalman:</b></font> so cool<br/>
<font color="#A82F2F"><font size="2">(06:15:51 PM)</font> <b>kmicu:</b></font> the-kenny: are you using gpg2.0 and gpg 2.1 at the same time?<br/>
<font color="#A82F2F"><font size="2">(06:15:51 PM)</font> <b>vcunat:</b></font> joelteon: note that it&apos;s quite a mass-rebuild change, as libtool depends on it<br/>
<font color="#A82F2F"><font size="2">(06:15:57 PM)</font> <b>joelteon:</b></font> vcunat: ok, will fix<br/>
<font color="#A82F2F"><font size="2">(06:15:58 PM)</font> <b>Lethalman:</b></font> that&apos;s the script which runs the command in the chroot<br/>
<font color="#A82F2F"><font size="2">(06:16:28 PM)</font> <b>vcunat:</b></font> joelteon: best do it in a way that the derivation hash on Linux will be the same as before starting this volleyball<br/>
<font color="#A82F2F"><font size="2">(06:16:40 PM)</font> <b>joelteon:</b></font> don&apos;t see any reason why it wouldn&apos;t be<br/>
<font color="#A82F2F"><font size="2">(06:16:42 PM)</font> <b>vcunat:</b></font> or ping-pong, we might call it<br/>
<font color="#A82F2F"><font size="2">(06:17:04 PM)</font> <b>vcunat:</b></font> the -lintl flag and gettext were passed unconditionally<br/>
<font color="#A82F2F"><font size="2">(06:17:17 PM)</font> <b>joelteon:</b></font> suspect i just need to optional them both<br/>
<font color="#A82F2F"><font size="2">(06:17:18 PM)</font> <b>the-kenny:</b></font> kmicu: Hm. I got &quot;gpg&quot; and &quot;gpg1compat&quot; installed. I think that&apos;s both gpg2<br/>
<font color="#A82F2F"><font size="2">(06:17:49 PM)</font> <b>the-kenny:</b></font> Actually I can&apos;t reproduce the &quot;systemd starting gpg-agents&quot; now. Still not working for ssh keys.<br/>
<font color="#A82F2F"><font size="2">(06:18:21 PM)</font> <b>Haskellfant:</b></font> the-kenny: do you have SSH_AUTH_SOCK set?<br/>
<font color="#A82F2F"><font size="2">(06:18:33 PM)</font> <b>Haskellfant:</b></font> not sure if that is set on nixos (still a poor arch user)<br/>
<font color="#A82F2F"><font size="2">(06:18:37 PM)</font> <b>the-kenny:</b></font> Haskellfant: yup. That&apos;s fine completely.<br/>
<font color="#A82F2F"><font size="2">(06:18:44 PM)</font> <b>kmicu:</b></font> the-kenny: 1. there is a problem with SLiM and one implication are ssh-add issues 2. you should have only one agent running OOTB™<br/>
<font color="#A82F2F"><font size="2">(06:18:56 PM)</font> <b>the-kenny:</b></font> Haskellfant: the agent works too. It just doesn&apos;t work for SSH.<br/>
<font color="#A82F2F"><font size="2">(06:19:04 PM)</font> <b>the-kenny:</b></font> (it IS started with ssh support)<br/>
<font color="#A82F2F"><font size="2">(06:19:12 PM)</font> <b>the-kenny:</b></font> kmicu: Slim issues? Tell me about that!<br/>
<font color="#A82F2F"><font size="2">(06:19:13 PM)</font> <b>kmicu:</b></font> (It will not work with SLiM.)<br/>
<font color="#A82F2F"><font size="2">(06:19:22 PM)</font> <b>the-kenny:</b></font> oh *yay*<br/>
<font color="#A82F2F"><font size="2">(06:19:51 PM)</font> <b>kmicu:</b></font> I will not tell you about it, b/c SLiM is deprecated and I will not touch it or spend time to solve that :)<br/>
<font color="#A82F2F"><font size="2">(06:20:01 PM)</font> <b>the-kenny:</b></font> I didn&apos;t know that :)<br/>
<font color="#A82F2F"><font size="2">(06:20:12 PM)</font> <b>Haskellfant:</b></font> so what is nixos going to switch to if slim is deprecated?<br/>
<font color="#A82F2F"><font size="2">(06:20:12 PM)</font> <b>kmicu:</b></font> You could try LightDM and ssh-add.<br/>
<font color="#A82F2F"><font size="2">(06:20:13 PM)</font> <b>the-kenny:</b></font> Ok, I don&apos;t care about slim. trying something else now<br/>
<font color="#A82F2F"><font size="2">(06:20:17 PM)</font> <b>the-kenny:</b></font> yup, will<br/>
<font color="#A82F2F"><font size="2">(06:20:19 PM)</font> <b>joelteon:</b></font> vcunat, do you happen to have LocaleGettext&apos;s old hash handy<br/>
<font color="#A82F2F"><font size="2">(06:20:28 PM)</font> <b>Lethalman:</b></font> and now that I look at it<br/>
<font color="#A82F2F"><font size="2">(06:20:36 PM)</font> <b>Lethalman:</b></font> systemd-nspawn has --private-users which enables CLONE_NEWUSER<br/>
<font color="#A82F2F"><font size="2">(06:20:48 PM)</font> <b>Lethalman:</b></font> have to try that one, should make the container more secure<br/>
<font color="#A82F2F"><font size="2">(06:21:05 PM)</font> <b>kmicu:</b></font> Haskellfant: NixOS’ X stack needs total re-work. We have SDDM, LightDM, KDM, GDM… whatever, just NOT SLiM.<br/>
<font color="#A82F2F"><font size="2">(06:21:15 PM)</font> <b>Haskellfant:</b></font> kmicu: hehe, k thx<br/>
<font color="#A82F2F"><font size="2">(06:21:32 PM)</font> <b>vcunat:</b></font> joelteon: /nix/store/vrcknmn14bqqjg6bxcjm3lrz1rcffz83-perl-LocaleGettext-1.05<br/>
<font color="#A82F2F"><font size="2">(06:21:32 PM)</font> <b>vcunat:</b></font> but I already have a patch that seems to work<br/>
<font color="#A82F2F"><font size="2">(06:21:40 PM)</font> <b>vcunat:</b></font> (it does on Linux and should on Darwin as well)<br/>
