<html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Conversation with #nixos at Sat 14 Feb 2015 05:25:25 PM CET on magnetophon@irc.freenode.net (irc)</title></head><body><h3>Conversation with #nixos at Sat 14 Feb 2015 05:25:25 PM CET on magnetophon@irc.freenode.net (irc)</h3>
<font size="2">(05:25:25 PM)</font><b> The topic for #nixos is: <a href="http://nixos.org/">http://nixos.org/</a> || Latest NixOS: <a href="http://nixos.org/nixos/download.html">http://nixos.org/nixos/download.html</a> || Latest Nix: <a href="http://nixos.org/nix/download.html">http://nixos.org/nix/download.html</a> || Logs: <a href="http://nixos.org/irc/logs/">http://nixos.org/irc/logs/</a> || Swag: <a href="http://www.cafepress.co.uk/NixOS">http://www.cafepress.co.uk/NixOS</a></b><br/>
<font size="2">(05:25:25 PM)</font><b> Topic for #nixos set by niksnut!~eelco@ec2-54-216-36-73.eu-west-1.compute.amazonaws.com at 12:56:59 PM on 04/11/2014</b><br/>
<font color="#A82F2F"><font size="2">(05:26:49 PM)</font> <b>dweller:</b></font> not sure if there is any<br/>
<font color="#A82F2F"><font size="2">(05:32:43 PM)</font> <b>ttuegel:</b></font> avn: those builds fail randomly in parallel<br/>
<font color="#A82F2F"><font size="2">(05:33:06 PM)</font> <b>avn:</b></font> btw, interesting -- are possible to manage firefox extensions in declarative nix-style way?<br/>
<font color="#A82F2F"><font size="2">(05:33:12 PM)</font> <b>MagneticDuck:</b></font> steam is complaining that &quot;GLX isn&apos;t being accelerated&quot;<br/>
<font color="#A82F2F"><font size="2">(05:33:15 PM)</font> <b>MagneticDuck:</b></font> or some akin error message<br/>
<font color="#A82F2F"><font size="2">(05:33:18 PM)</font> <b>MagneticDuck:</b></font> what can I do?<br/>
<font color="#A82F2F"><font size="2">(05:33:23 PM)</font> <b>MagneticDuck:</b></font> (running steam in a FHS chroot)<br/>
<font color="#A82F2F"><font size="2">(05:33:44 PM)</font> <b>MagneticDuck:</b></font> ah, not using direct rendering is the correct error message<br/>
<font color="#A82F2F"><font size="2">(05:36:06 PM)</font> <b>avn:</b></font> export LIBGL_DEBUG=verbose to look how it load backends<br/>
<font color="#A82F2F"><font size="2">(05:36:20 PM)</font> <b>avn:</b></font> (or strace -e trace=open<br/>
<font color="#A82F2F"><font size="2">(05:36:42 PM)</font> <b>MagneticDuck:</b></font> actually, it seems I get some information in stderr / stdout<br/>
<font color="#A82F2F"><font size="2">(05:36:56 PM)</font> <b>avn:</b></font> Well, to be honest -- I thinking about &quot;pure&quot; builds of mesa<br/>
<font color="#A82F2F"><font size="2">(05:37:17 PM)</font> <b>avn:</b></font> MagneticDuck: also check rights on /dev/dri/* inside chroot<br/>
<font color="#A82F2F"><font size="2">(05:37:19 PM)</font> <b>MagneticDuck:</b></font> /run/open-gl-driver-32/.../i965.dri<br/>
<font color="#A82F2F"><font size="2">(05:37:25 PM)</font> <b>MagneticDuck:</b></font> (.so)<br/>
<font color="#A82F2F"><font size="2">(05:38:46 PM)</font> <b>avn:</b></font> I believe GL builds should be pure, I am not sure, how dri drivers able to interact with libGL.so and other guts from other build<br/>
<font color="#16569E"><font size="2">(05:52:25 PM)</font> <b>magnetophon:</b></font> the-kenny: Hi, I'm packaging mutt-kz (mutt with notmutch integration). I'm getting:    &lt;   configure: error: &quot;Could not determine where new mail is stored.&quot;   &gt;    Google tells me the solution is to have &quot;--with-homespool=/path/to/spool&quot;, but you already have that.  Any ideas?<br/>
<font color="#16569E"><font size="2">(05:53:13 PM)</font> <b>magnetophon:</b></font> others are of course welcome to answer that too, but I asked the-kenny because he's the maintainer off mutt.<br/>
<font color="#A82F2F"><font size="2">(05:56:42 PM)</font> <b>dweller:</b></font> MagneticDuck: docker container with steam works pretty well<br/>
<font color="#062585"><font size="2">(05:59:17 PM)</font> <b>***bennofs</b></font> wishes lxc as non-root would work with systemd :/<br/>
<font color="#A82F2F"><font size="2">(06:00:50 PM)</font> <b>countoren:</b></font> hello, can someone explain me what im doing wrong here:  http://paste.ofcode.org/36xT6Cs83GdXeLKfC9whd8Z<br/>
<font color="#A82F2F"><font size="2">(06:02:22 PM)</font> <b>avn:</b></font> countoren: inherit vim, not inherit callPackage vim<br/>
<font color="#A82F2F"><font size="2">(06:03:03 PM)</font> <b>countoren:</b></font> o this was just for test in repl all inherit line should be deleted<br/>
<font color="#A82F2F"><font size="2">(06:03:52 PM)</font> <b>countoren:</b></font> i want enviorment of vim<br/>
<font color="#A82F2F"><font size="2">(06:04:28 PM)</font> <b>countoren:</b></font> avn:  vim should be buildInputs but when i load it in repl im getting empty list in buildInputs<br/>
<font size="2">(06:05:53 PM)</font><b> bennofs left the room (quit: Ping timeout: 246 seconds).</b><br/>
<font color="#A82F2F"><font size="2">(06:09:07 PM)</font> <b>MagneticDuck:</b></font> dweller: yeh<br/>
<font color="#A82F2F"><font size="2">(06:09:10 PM)</font> <b>MagneticDuck:</b></font> I&apos;m using it<br/>
<font color="#A82F2F"><font size="2">(06:09:14 PM)</font> <b>avn:</b></font> btw, how to instantiate all  environments defined in ~/.nixpkgs/config?<br/>
<font color="#A82F2F"><font size="2">(06:09:14 PM)</font> <b>MagneticDuck:</b></font> but I&apos;m getting this glx error<br/>
<font color="#A82F2F"><font size="2">(06:09:22 PM)</font> <b>avn:</b></font> (or update them at once?)<br/>
<font color="#A82F2F"><font size="2">(06:09:25 PM)</font> <b>MagneticDuck:</b></font> .. oh wait, there&apos;s a docker container?<br/>
<font color="#A82F2F"><font size="2">(06:10:32 PM)</font> <b>dweller:</b></font> ye<br/>
<font color="#A82F2F"><font size="2">(06:10:55 PM)</font> <b>dweller:</b></font> i guess its best way of running steam on different distro than ubuntu<br/>
<font color="#A82F2F"><font size="2">(06:11:08 PM)</font> <b>dweller:</b></font> (as its ubuntu in the container anyway)<br/>
<font color="#A82F2F"><font size="2">(06:11:27 PM)</font> <b>dweller:</b></font> not that elegant, but oh wel<br/>
<font color="#A82F2F"><font size="2">(06:11:37 PM)</font> <b>MagneticDuck:</b></font> well, I&apos;ll try out docker<br/>
<font color="#A82F2F"><font size="2">(06:11:55 PM)</font> <b>avn:</b></font> one of my goals,  well defined (via nix) wine environments for gaming.<br/>
<font color="#A82F2F"><font size="2">(06:13:43 PM)</font> <b>MagneticDuck:</b></font> docker + nix is an intereting combination<br/>
<font color="#A82F2F"><font size="2">(06:13:57 PM)</font> <b>MagneticDuck:</b></font> I mean.. they seem to intersect a bit, right?<br/>
<font color="#A82F2F"><font size="2">(06:14:01 PM)</font> <b>MagneticDuck:</b></font> I don&apos;t know that much about docker<br/>
<font color="#A82F2F"><font size="2">(06:14:03 PM)</font> <b>MagneticDuck:</b></font> but..<br/>
<font color="#A82F2F"><font size="2">(06:15:56 PM)</font> <b>dweller:</b></font> hmm, time to test lvmcache<br/>
<font color="#16569E"><font size="2">(06:16:06 PM)</font> <b>magnetophon:</b></font> the relevant code is here: https://github.com/karelzak/mutt-kz/blob/master/configure.ac#L509 but I'm not really sure what is being done/checked<br/>
<font color="#A82F2F"><font size="2">(06:18:27 PM)</font> <b>avn:</b></font> Hmm, who in system want &quot;yet another&quot; stdenv + glibc?<br/>
<font color="#A82F2F"><font size="2">(06:26:22 PM)</font> <b>MagneticDuck:</b></font> docker looks very nice<br/>
<font color="#A82F2F"><font size="2">(06:26:41 PM)</font> <b>MagneticDuck:</b></font> it&apos;s like nixos, but it&apos;s actually practical ;0<br/>
<font color="#A82F2F"><font size="2">(06:27:09 PM)</font> <b>MagneticDuck:</b></font> .. as far as some things are concerned<br/>
<font color="#A82F2F"><font size="2">(06:27:58 PM)</font> <b>kmicu:</b></font> Yes, very practical http://iops.io/blog/docker-hype/<br/>
<font color="#A82F2F"><font size="2">(06:31:34 PM)</font> <b>MagneticDuck:</b></font> err, docker is giving me an error about /var/run/docker.sock<br/>
<font color="#A82F2F"><font size="2">(06:31:42 PM)</font> <b>MagneticDuck:</b></font> .. and how it doesn&apos;t exist<br/>
<font color="#A82F2F"><font size="2">(06:32:09 PM)</font> <b>MagneticDuck:</b></font> I can&apos;t do anything, consequently<br/>
<font color="#062585"><font size="2">(06:32:50 PM)</font> <b>***dweller</b></font> still takes kvm over docker anyway<br/>
<font color="#A82F2F"><font size="2">(06:33:08 PM)</font> <b>dweller:</b></font> even for steam, but that just me<br/>
<font color="#A82F2F"><font size="2">(06:33:33 PM)</font> <b>MagneticDuck:</b></font> anyway<br/>
<font color="#A82F2F"><font size="2">(06:33:41 PM)</font> <b>MagneticDuck:</b></font> trying to get docker to do basic things here<br/>
<font color="#A82F2F"><font size="2">(06:33:48 PM)</font> <b>MagneticDuck:</b></font> complaining about /var/run/docker.sock<br/>
<font color="#A82F2F"><font size="2">(06:34:06 PM)</font> <b>MagneticDuck:</b></font> already eliminated user privaliges as a possibility<br/>
<font color="#A82F2F"><font size="2">(06:34:25 PM)</font> <b>MagneticDuck:</b></font> and I just installed it from the default nixpkgs expression.. can&apos;t see how I could have an unforseeable problem already<br/>
<font color="#A82F2F"><font size="2">(06:34:36 PM)</font> <b>ktosiek:</b></font> do you have the daemon running?<br/>
<font color="#A82F2F"><font size="2">(06:34:58 PM)</font> <b>MagneticDuck:</b></font> ah, that would probably explain.. explain why the socket... doesn&apos;t exist...<br/>
<font color="#062585"><font size="2">(06:34:59 PM)</font> <b>***ktosiek</b></font> doesn&apos;t know a thing about docker, just assumed it needs the socket for communication with some daemon<br/>
<font color="#062585"><font size="2">(06:35:01 PM)</font> <b>***MagneticDuck</b></font> starts daemon<br/>
<font color="#A82F2F"><font size="2">(06:35:03 PM)</font> <b>MagneticDuck:</b></font> lols<br/>
<font color="#A82F2F"><font size="2">(06:37:09 PM)</font> <b>MagneticDuck:</b></font> hm, do I always have to run docker as root?<br/>
<font color="#A82F2F"><font size="2">(06:37:28 PM)</font> <b>ktosiek:</b></font> I think only the daemon?<br/>
<font color="#A82F2F"><font size="2">(06:37:41 PM)</font> <b>ktosiek:</b></font> it would be crazy otherwise :-P<br/>
<font color="#A82F2F"><font size="2">(06:38:09 PM)</font> <b>MagneticDuck:</b></font> well apparently base users can&apos;t run it<br/>
<font color="#A82F2F"><font size="2">(06:38:27 PM)</font> <b>MagneticDuck:</b></font> started the daemon, now I&apos;m getting the error &quot;permission denied&quot; when it tries to access the socker<br/>
<font color="#A82F2F"><font size="2">(06:38:29 PM)</font> <b>MagneticDuck:</b></font> socket*<br/>
<font color="#A82F2F"><font size="2">(06:39:01 PM)</font> <b>ktosiek:</b></font> check socket&apos;s permissions?<br/>
<font color="#16569E"><font size="2">(06:39:19 PM)</font> <b>magnetophon:</b></font> OK, after some studying of the code https://github.com/karelzak/mutt-kz/blob/master/configure.ac#L509 it seems to just check if one of the listed dirs, exists, and if not, throw an error.  So, to debug, I created /var/mail and built again.  Same error...   :(<br/>
<font color="#A82F2F"><font size="2">(06:51:01 PM)</font> <b>MagneticDuck:</b></font> so.. how does docker interface with X windows?<br/>
<font color="#A82F2F"><font size="2">(06:51:09 PM)</font> <b>MagneticDuck:</b></font> like, so I can see what&apos;s going on in a container?<br/>
<font color="#A82F2F"><font size="2">(06:51:22 PM)</font> <b>MagneticDuck:</b></font> and maybe use it to like do stuff that doesn&apos;t involve IO?<br/>
<font color="#A82F2F"><font size="2">(06:54:57 PM)</font> <b>avn:</b></font> MagneticDuck: you need bind mount X11 socket, /dev/dri, and /dev/shm into container. I believe google have some hints for it<br/>
<font color="#A82F2F"><font size="2">(06:55:37 PM)</font> <b>avn:</b></font> btw, I want to have aufs in kernel for docker, but need some hints how add patch to kernel.<br/>
<font color="#A82F2F"><font size="2">(07:11:03 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] ardumont opened pull request #6342: Add microscheme binary (master...add-microscheme) http://git.io/NKqz<br/>
<font color="#A82F2F"><font size="2">(07:25:44 PM)</font> <b>dweller:</b></font> MagneticDuck: container needs to be priviledged too<br/>
<font color="#16569E"><font size="2">(07:31:56 PM)</font> <b>magnetophon:</b></font> Could someone have a look at https://github.com/magnetophon/nixpkgs/blob/mutt-kz-14.12/pkgs/applications/networking/mailreaders/mutt-kz/default.nix#L26   nix-build goes past the unpackPhase even though there is an obvious typo in the src url.<br/>
<font color="#16569E"><font size="2">(07:32:45 PM)</font> <b>magnetophon:</b></font> I'm running:  nix-build ~/source/nixpkgs/ -A mutt-kz  <br/>
<font color="#16569E"><font size="2">(07:33:45 PM)</font> <b>magnetophon:</b></font> I'm new to nix-build, so I might very well be using it wrong...<br/>
<font color="#A82F2F"><font size="2">(07:34:23 PM)</font> <b>ttuegel:</b></font> magnetophon: is the source already in your store?<br/>
<font color="#16569E"><font size="2">(07:36:08 PM)</font> <b>magnetophon:</b></font> ttuegel: I guess?<br/>
<font color="#16569E"><font size="2">(07:36:25 PM)</font> <b>magnetophon:</b></font> ttuegel: how do I check?<br/>
<font color="#A82F2F"><font size="2">(07:37:24 PM)</font> <b>countoren:</b></font> http://stackoverflow.com/questions/28518538/creating-nix-development-environment-from-derivation, will appreciate any help.<br/>
<font color="#16569E"><font size="2">(07:41:02 PM)</font> <b>magnetophon:</b></font> ttuegel: ah, now I remember: I had this before. When you copy and edit a pkg, and you leave the sha unaltered, hoping you'll get an error with the correct sha, nix will just happily ignore the url, and use the src specified by the sha...   :(<br/>
<font size="2">(08:01:00 PM)</font><b> The account has disconnected and you are no longer in this chat. You will automatically rejoin the chat when the account reconnects.</b><br/>
</body></html>
