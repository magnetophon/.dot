<html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Conversation with #nixos at Fri 19 Dec 2014 04:43:22 PM CET on magnetophon@irc.freenode.net (irc)</title></head><body><h3>Conversation with #nixos at Fri 19 Dec 2014 04:43:22 PM CET on magnetophon@irc.freenode.net (irc)</h3>
<font size="2">(04:43:23 PM)</font><b> The topic for #nixos is: <a href="http://nixos.org/">http://nixos.org/</a> || Latest NixOS: <a href="http://nixos.org/nixos/download.html">http://nixos.org/nixos/download.html</a> || Latest Nix: <a href="http://nixos.org/nix/download.html">http://nixos.org/nix/download.html</a> || Logs: <a href="http://nixos.org/irc/logs/">http://nixos.org/irc/logs/</a> || Swag: <a href="http://www.cafepress.co.uk/NixOS">http://www.cafepress.co.uk/NixOS</a></b><br/>
<font size="2">(04:43:23 PM)</font><b> Topic for #nixos set by niksnut!~eelco@ec2-54-216-36-73.eu-west-1.compute.amazonaws.com at 12:56:59 PM on 04/11/2014</b><br/>
<font color="#A82F2F"><font size="2">(04:43:23 PM)</font> <b>barjavel.freenode.net:</b></font> (notice) [freenode-info] channel flooding and no channel staff around to help? Please check with freenode support: http://freenode.net/faq.shtml#gettinghelp<br/>
<font color="#A82F2F"><font size="2">(04:44:39 PM)</font> <b>Fuuzetsu:</b></font> I wish I had like 256 cores<br/>
<font color="#A82F2F"><font size="2">(04:44:53 PM)</font> <b>Fuuzetsu:</b></font> the_scourge: every rebuild updates GRUB<br/>
<font color="#A82F2F"><font size="2">(04:45:24 PM)</font> <b>Fuuzetsu:</b></font> unless you mean the software itself<br/>
<font color="#A82F2F"><font size="2">(04:45:32 PM)</font> <b>the_scourge:</b></font> Fuuzetsu: buy a couple parallella boards?<br/>
<font color="#A82F2F"><font size="2">(04:45:43 PM)</font> <b>the_scourge:</b></font> for like $90 each, it&apos;s not abd<br/>
<font color="#A82F2F"><font size="2">(04:46:05 PM)</font> <b>the_scourge:</b></font> otherwise you&apos;re looking at bulldozer. maybe they&apos;ve got all the issues sorted out (years later now)?<br/>
<font color="#A82F2F"><font size="2">(04:46:39 PM)</font> <b>Lethalman:</b></font> the_scourge, where do you see $90?<br/>
<font color="#A82F2F"><font size="2">(04:47:13 PM)</font> <b>Fuuzetsu:</b></font> pretty sure they were more than $90<br/>
<font color="#A82F2F"><font size="2">(04:47:19 PM)</font> <b>wmertens:</b></font> vandenoever: how&apos;s the recovery going? did you lose anything?<br/>
<font color="#A82F2F"><font size="2">(04:47:36 PM)</font> <b>Lethalman:</b></font> the_scourge, also it&apos;s ARM btw, you need cross compiling I guess<br/>
<font color="#A82F2F"><font size="2">(04:47:45 PM)</font> <b>vandenoever:</b></font> wmertens: it&apos;s quite hard, &apos;btrfs restore&apos; is giving many errors, so i&apos;m patching it now<br/>
<font color="#A82F2F"><font size="2">(04:48:04 PM)</font> <b>vandenoever:</b></font> also doing dd of the corrupted image before i&apos;m doing any writing to it<br/>
<font color="#A82F2F"><font size="2">(04:48:09 PM)</font> <b>the_scourge:</b></font> http://uk.rs-online.com/web/c/semiconductors/semiconductor-development-kits/processor-microcontroller-development-kits/?searchTerm=parallella&amp;h=s&amp;redirect-relevancy-data=636F3D3126696E3D4931384E5461786F6E6F6D794272616E64266C753D656E266D6D3D6D61746368616C6C26706D3D5E5B5C707B4C7D2D2F5D2B2426706F3D313626736E3D592673743D4B4559574F52445F53494E474C455F414C5048415F4E554D455249432677633D4E4F4E45267573743D706172616C6C656C6C6126<br/>
<font color="#A82F2F"><font size="2">(04:48:32 PM)</font> <b>the_scourge:</b></font> the server-only version is about that much. i&apos;m not sure what country you&apos;re in<br/>
<font color="#A82F2F"><font size="2">(04:48:34 PM)</font> <b>Lethalman:</b></font> it&apos;s ARM btw<br/>
<font color="#A82F2F"><font size="2">(04:48:44 PM)</font> <b>wmertens:</b></font> vandenoever: that&apos;s very disconcerning... I would think that a previous generation of a superblock sees a stable filesystem...<br/>
<font color="#A82F2F"><font size="2">(04:49:03 PM)</font> <b>the_scourge:</b></font> Lethalman: yes, i&apos;m assuming that he&apos;s going to have to get to the source code on whatever he&apos;s doing<br/>
<font color="#A82F2F"><font size="2">(04:49:58 PM)</font> <b>the_scourge:</b></font> btrfs just straight-up doesn&apos;t mount, even though mount gives no error<br/>
<font color="#A82F2F"><font size="2">(04:49:59 PM)</font> <b>Fuuzetsu:</b></font> anyone got NixOS running on the desktop parallela?<br/>
<font color="#A82F2F"><font size="2">(04:50:07 PM)</font> <b>the_scourge:</b></font> that&apos;s why my nixos-rebuild was borked<br/>
<font color="#A82F2F"><font size="2">(04:50:35 PM)</font> <b>the_scourge:</b></font> Fuuzetsu: nixos on parallella is on my to-do list somewhere<br/>
<font color="#A82F2F"><font size="2">(04:51:11 PM)</font> <b>the_scourge:</b></font> ok i do get an error in dmesg<br/>
<font color="#A82F2F"><font size="2">(04:51:20 PM)</font> <b>the_scourge:</b></font> BTRFS:has skinny extents<br/>
<font color="#A82F2F"><font size="2">(04:51:24 PM)</font> <b>Fuuzetsu:</b></font> still, 16 is not quite 256<br/>
<font color="#A82F2F"><font size="2">(04:51:43 PM)</font> <b>the_scourge:</b></font> lol yes we know that, it&apos;s been an option for a while, no reason to not mount a perfectly good filesystem<br/>
<font color="#A82F2F"><font size="2">(04:52:32 PM)</font> <b>the_scourge:</b></font> Fuuzetsu: well you can stack 24 of them and you get 256?<br/>
<font color="#A82F2F"><font size="2">(04:53:00 PM)</font> <b>the_scourge:</b></font> the wattage per FLOPS is where you win. although i don&apos;t know what you&apos;re comparing to that has 256 cores so maybe i shouldn&apos;t speak out of trun<br/>
<font color="#A82F2F"><font size="2">(04:53:03 PM)</font> <b>the_scourge:</b></font> *turn<br/>
<font color="#A82F2F"><font size="2">(04:53:10 PM)</font> <b>wmertens:</b></font> the_scourge: for the low low price of 2400 GBP<br/>
<font color="#A82F2F"><font size="2">(04:53:12 PM)</font> <b>Fuuzetsu:</b></font> only £100 * 24!<br/>
<font color="#A82F2F"><font size="2">(04:54:19 PM)</font> <b>the_scourge:</b></font> lol i know. where are you getting 256 cores for less than 2400 though?<br/>
<font color="#A82F2F"><font size="2">(04:54:24 PM)</font> <b>vandenoever:</b></font> wmertens: yes, it&apos;s taken me very much by surprise<br/>
<font color="#A82F2F"><font size="2">(04:54:24 PM)</font> <b>Fuuzetsu:</b></font> nowhere<br/>
<font color="#A82F2F"><font size="2">(04:54:27 PM)</font> <b>Fuuzetsu:</b></font> I can wish!<br/>
<font color="#A82F2F"><font size="2">(04:54:51 PM)</font> <b>Fuuzetsu:</b></font> also last time I checked 24 * 16 was not 256 ;P<br/>
<font color="#A82F2F"><font size="2">(04:54:55 PM)</font> <b>wmertens:</b></font> vandenoever: so did you find anything related on the googles?<br/>
<font color="#A82F2F"><font size="2">(04:56:02 PM)</font> <b>vandenoever:</b></font> wmertens: getting help on #btrfs<br/>
<font color="#A82F2F"><font size="2">(04:58:36 PM)</font> <b>wmertens:</b></font> the_scourge: don&apos;t GPUs have tons of FLOPS/W rather cheaply?<br/>
<font color="#A82F2F"><font size="2">(04:59:03 PM)</font> <b>Lethalman:</b></font> you don&apos;t run a compiler in a gpu<br/>
<font color="#A82F2F"><font size="2">(04:59:50 PM)</font> <b>Fuuzetsu:</b></font> I looked into on-GPU compilations some time ago, wasn&apos;t too fruitfull<br/>
<font color="#A82F2F"><font size="2">(05:00:36 PM)</font> <b>MP2E:</b></font> compiliation is an inherently serial process, you can parallelize parts, but I don&apos;t think you&apos;d be able to parallelize to the level that GPUs need in order to be more efficient than a CPU<br/>
<font color="#A82F2F"><font size="2">(05:01:04 PM)</font> <b>the_scourge:</b></font> Fuuzetsu: wait, are you talking about cross-compilation?<br/>
<font color="#A82F2F"><font size="2">(05:01:23 PM)</font> <b>Fuuzetsu:</b></font> MP2E: need better compilers<br/>
<font color="#A82F2F"><font size="2">(05:01:23 PM)</font> <b>the_scourge:</b></font> i thought you were talking about some kind of parallel service<br/>
<font color="#A82F2F"><font size="2">(05:01:37 PM)</font> <b>the_scourge:</b></font> Fuuzetsu: need more cowbell<br/>
<font color="#A82F2F"><font size="2">(05:01:46 PM)</font> <b>Fuuzetsu:</b></font> the_scourge: I was not talking about anything in particular, was just thinking ‘aah, it sure would be nice to have ridiculous amount of cores’<br/>
<font color="#A82F2F"><font size="2">(05:02:09 PM)</font> <b>MP2E:</b></font> it would<br/>
<font color="#A82F2F"><font size="2">(05:02:24 PM)</font> <b>MP2E:</b></font> i don&apos;t know why consumer cores have yet to leave 4, i mean i guess it&apos;s 8 with hardware threads, but still :/<br/>
<font color="#A82F2F"><font size="2">(05:02:33 PM)</font> <b>MP2E:</b></font> i guess power consumption<br/>
<font color="#A82F2F"><font size="2">(05:02:52 PM)</font> <b>wmertens:</b></font> Fuuzetsu: just enable coredumps and send SIGQUIT to all your processes - you&apos;ll have a nice pile of cores :)<br/>
<font color="#A82F2F"><font size="2">(05:03:36 PM)</font> <b>the_scourge:</b></font> lolz<br/>
<font color="#A82F2F"><font size="2">(05:03:39 PM)</font> <b>wmertens:</b></font> MP2E: octocore phones are getting there - the problem is that something needs to use those cores<br/>
<font color="#A82F2F"><font size="2">(05:03:54 PM)</font> <b>the_scourge:</b></font> yah, the limitation is software<br/>
<font color="#A82F2F"><font size="2">(05:04:38 PM)</font> <b>the_scourge:</b></font> it&apos;s like that new octocore ARM desktop that came out last week, all the reviews said &quot;the hardware is awesome, maybe someday software people will write stuff to use this&quot;<br/>
<font color="#A82F2F"><font size="2">(05:04:54 PM)</font> <b>the_scourge:</b></font> i personally like parallella because it&apos;s tiny and draws 4w :D<br/>
<font color="#A82F2F"><font size="2">(05:05:14 PM)</font> <b>the_scourge:</b></font> but needs a lot of hacking and love before it can be a personal data server<br/>
<font color="#A82F2F"><font size="2">(05:05:34 PM)</font> <b>the_scourge:</b></font> vandenoever: what kernel are you running?<br/>
<font color="#A82F2F"><font size="2">(05:05:54 PM)</font> <b>Lethalman:</b></font> the main concern for nix is that then you cannot mix amd64 or arm cross compiled to amd64<br/>
<font color="#A82F2F"><font size="2">(05:05:59 PM)</font> <b>Lethalman:</b></font> because hashes will be different<br/>
<font color="#A82F2F"><font size="2">(05:05:59 PM)</font> <b>wmertens:</b></font> the_scourge: I&apos;d be happy with a nice workflow for crosscompiling for my banana pi<br/>
<font color="#A82F2F"><font size="2">(05:06:10 PM)</font> <b>Lethalman:</b></font> :(<br/>
<font color="#A82F2F"><font size="2">(05:08:14 PM)</font> <b>the_scourge:</b></font> wait you can cross compile though right?<br/>
<font color="#A82F2F"><font size="2">(05:08:24 PM)</font> <b>Lethalman:</b></font> yes that I know<br/>
<font color="#A82F2F"><font size="2">(05:08:29 PM)</font> <b>Lethalman:</b></font> but I don&apos;t know anybody doing it<br/>
<font color="#A82F2F"><font size="2">(05:08:30 PM)</font> <b>the_scourge:</b></font> just, have to do it for both arm and arm64?<br/>
<font color="#A82F2F"><font size="2">(05:08:34 PM)</font> <b>Lethalman:</b></font> and I think they will have different hashes<br/>
<font color="#A82F2F"><font size="2">(05:08:36 PM)</font> <b>the_scourge:</b></font> or did you mean to say amd64<br/>
<font color="#A82F2F"><font size="2">(05:08:53 PM)</font> <b>Lethalman:</b></font> the_scourge, on your desktop package X will have an hash because of build input gcc amd64<br/>
<font color="#A82F2F"><font size="2">(05:08:59 PM)</font> <b>Lethalman:</b></font> on arm, you will use a gcc for arm<br/>
<font color="#A82F2F"><font size="2">(05:09:06 PM)</font> <b>Lethalman:</b></font> thus X will have two different hashes<br/>
<font color="#A82F2F"><font size="2">(05:09:20 PM)</font> <b>wmertens:</b></font> Lethalman: and this is a problem because?<br/>
<font color="#A82F2F"><font size="2">(05:09:28 PM)</font> <b>the_scourge:</b></font> right when i was pricing out this home server i almost bought an octacore arm board just to compile nixos packages with. but the form factor was stupid and i would have had my raid array literally spread across my desk :(<br/>
<font color="#A82F2F"><font size="2">(05:09:34 PM)</font> <b>Lethalman:</b></font> wmertens, because then you can&apos;t use cross-compiled stuff from your powerful arm board on your desktop<br/>
<font color="#A82F2F"><font size="2">(05:10:22 PM)</font> <b>the_scourge:</b></font> Lethalman: of course this AMD arm64 chipset doesn&apos;t even ship yet<br/>
<font color="#A82F2F"><font size="2">(05:10:23 PM)</font> <b>wmertens:</b></font> ...because the cross compiler is different from the native compiler?<br/>
<font color="#062585"><font size="2">(05:10:34 PM)</font> <b>***wmertens</b></font> feels stupid<br/>
<font color="#A82F2F"><font size="2">(05:10:35 PM)</font> <b>the_scourge:</b></font> wmertens: no because of GCC<br/>
<font color="#A82F2F"><font size="2">(05:10:42 PM)</font> <b>the_scourge:</b></font> which is a part of the hash<br/>
<font color="#A82F2F"><font size="2">(05:10:46 PM)</font> <b>Lethalman:</b></font> wmertens, because gcc on the arm is different than the one you would use on your desktop<br/>
<font color="#A82F2F"><font size="2">(05:11:14 PM)</font> <b>wmertens:</b></font> Lethalman: ah ok, is this the same problem as when using ccache instead of gcc, the hash isn&apos;t &quot;transparent&quot;?<br/>
<font color="#A82F2F"><font size="2">(05:11:38 PM)</font> <b>Lethalman:</b></font> wmertens, yes<br/>
<font color="#A82F2F"><font size="2">(05:11:55 PM)</font> <b>wmertens:</b></font> the input hash due to the gcc compiler should be for the generated code &quot;brand&quot;, not the compiler version<br/>
<font color="#A82F2F"><font size="2">(05:12:03 PM)</font> <b>the_scourge:</b></font> Lethalman: i wonder if we could just trick the x86 build process... i.e. subsitute the gcc hash for a &quot;known good&quot; (actually, the hash of what WOULD be running in that channel on the target architecture<br/>
<font color="#A82F2F"><font size="2">(05:12:07 PM)</font> <b>the_scourge:</b></font> )<br/>
<font color="#A82F2F"><font size="2">(05:12:21 PM)</font> <b>wmertens:</b></font> the_scourge: yes I want that too for ccache<br/>
<font color="#A82F2F"><font size="2">(05:12:22 PM)</font> <b>Lethalman:</b></font> the_scourge, you can replaceDependency, yes<br/>
<font color="#A82F2F"><font size="2">(05:12:41 PM)</font> <b>the_scourge:</b></font> oh, such a thing already exists?<br/>
<font color="#A82F2F"><font size="2">(05:12:41 PM)</font> <b>Lethalman:</b></font> but that&apos;s for runtime deps<br/>
<font color="#A82F2F"><font size="2">(05:12:45 PM)</font> <b>Lethalman:</b></font> yes but it&apos;s not for you<br/>
<font color="#A82F2F"><font size="2">(05:13:01 PM)</font> <b>Lethalman:</b></font> that&apos;s for runtime deps<br/>
<font color="#A82F2F"><font size="2">(05:13:02 PM)</font> <b>the_scourge:</b></font> oh well we need a fakeDependency<br/>
<font color="#A82F2F"><font size="2">(05:13:20 PM)</font> <b>wmertens:</b></font> or a &quot;pretendToBeThisGuyDependency&quot;<br/>
<font color="#A82F2F"><font size="2">(05:13:41 PM)</font> <b>Lethalman:</b></font> it&apos;s about the build inputs being different here, don&apos;t know if it&apos;s possible at all with nix<br/>
<font color="#A82F2F"><font size="2">(05:13:57 PM)</font> <b>the_scourge:</b></font> vandenoever: you there still?<br/>
<font color="#A82F2F"><font size="2">(05:14:10 PM)</font> <b>wmertens:</b></font> what is done for fixed output hashes?<br/>
<font color="#A82F2F"><font size="2">(05:14:13 PM)</font> <b>Lethalman:</b></font> wmertens, you are looking for the other nix model, where the output is hashed with its contents, and not with the build inputs<br/>
<font color="#A82F2F"><font size="2">(05:14:35 PM)</font> <b>wmertens:</b></font> Lethalman: problem is that for compiles you can&apos;t predict the output hash - that would be nice :)<br/>
<font color="#A82F2F"><font size="2">(05:14:36 PM)</font> <b>Lethalman:</b></font> wmertens, I&apos;m sure an arm gcc has a different fixed output hash than an amd64 gcc :P<br/>
<font color="#A82F2F"><font size="2">(05:15:12 PM)</font> <b>wmertens:</b></font> Lethalman: uhm, if they both crosscompile x86, wouldn&apos;t they have the same output hash given the same code and state of the universe?<br/>
<font color="#A82F2F"><font size="2">(05:15:40 PM)</font> <b>Lethalman:</b></font> wmertens, no, because you can&apos;t have an arm gcc on your machine<br/>
<font color="#A82F2F"><font size="2">(05:16:07 PM)</font> <b>Lethalman:</b></font> you are only looking at the output<br/>
<font color="#A82F2F"><font size="2">(05:16:13 PM)</font> <b>Lethalman:</b></font> the problem is the gcc input<br/>
<font color="#A82F2F"><font size="2">(05:16:21 PM)</font> <b>Lethalman:</b></font> which is a different binary<br/>
<font color="#A82F2F"><font size="2">(05:17:46 PM)</font> <b>wmertens:</b></font> Lethalman: so Nix needs a feature where you can override the hash for an input<br/>
<font color="#A82F2F"><font size="2">(05:18:45 PM)</font> <b>Lethalman:</b></font> it&apos;s just a mess, it&apos;s easier to buy N amd64 than 1 arm board<br/>
<font color="#A82F2F"><font size="2">(05:18:46 PM)</font> <b>Lethalman:</b></font> :P<br/>
<font color="#A82F2F"><font size="2">(05:23:30 PM)</font> <b>wmertens:</b></font> Lethalman: actually all that&apos;s needed is something that uses a sideloaded input at build time right? So &quot;gcc&quot; would be a script that runs an impurely assigned binary?<br/>
<font color="#A82F2F"><font size="2">(05:23:59 PM)</font> <b>Lethalman:</b></font> wmertens, may work<br/>
<font size="2">(05:24:56 PM)</font><b> goibhniu left the room (quit: Ping timeout: 256 seconds).</b><br/>
<font color="#A82F2F"><font size="2">(05:25:37 PM)</font> <b>vandenoever:</b></font> the_scourge: yes<br/>
<font color="#A82F2F"><font size="2">(05:26:01 PM)</font> <b>vandenoever:</b></font> the_scourge: i am/was running 3.15, i think<br/>
<font color="#A82F2F"><font size="2">(05:26:09 PM)</font> <b>vandenoever:</b></font> the_scourge: the newest on on nixos 14.04<br/>
<font color="#A82F2F"><font size="2">(05:26:47 PM)</font> <b>the_scourge:</b></font> ok i&apos;m just upgrading to that now. systemctl just says that the mountpoint was busy and to check with lsof but that doesn&apos;t make much sense since it failed on boot as well<br/>
<font color="#A82F2F"><font size="2">(05:52:29 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] KoviRobi opened pull request #5400: Updated remind package name (otherwise unchanged). (master...master) http://git.io/NS1IqA<br/>
<font color="#A82F2F"><font size="2">(05:53:18 PM)</font> <b>the_scourge:</b></font> hmm one idea for nixos might be writing a ps alias or wrapper which cuts down on the amount of hashes displayed<br/>
<font color="#A82F2F"><font size="2">(05:53:43 PM)</font> <b>the_scourge:</b></font> &apos;cause right now i&apos;m having to pipe everything into less -S and then scroll around endlessly left and right<br/>
<font color="#A82F2F"><font size="2">(05:54:14 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] pSub closed pull request #5400: Updated remind package name (otherwise unchanged). (master...master) http://git.io/NS1IqA<br/>
<font size="2">(06:13:12 PM)</font><b> The account has disconnected and you are no longer in this chat. You will automatically rejoin the chat when the account reconnects.</b><br/>
</body></html>
