<html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Conversation with #nixos at Thu 18 Dec 2014 09:44:35 PM CET on magnetophon@irc.freenode.net (irc)</title></head><body><h3>Conversation with #nixos at Thu 18 Dec 2014 09:44:35 PM CET on magnetophon@irc.freenode.net (irc)</h3>
<font size="2">(09:44:36 PM)</font><b> The topic for #nixos is: <a href="http://nixos.org/">http://nixos.org/</a> || Latest NixOS: <a href="http://nixos.org/nixos/download.html">http://nixos.org/nixos/download.html</a> || Latest Nix: <a href="http://nixos.org/nix/download.html">http://nixos.org/nix/download.html</a> || Logs: <a href="http://nixos.org/irc/logs/">http://nixos.org/irc/logs/</a> || Swag: <a href="http://www.cafepress.co.uk/NixOS">http://www.cafepress.co.uk/NixOS</a></b><br/>
<font size="2">(09:44:36 PM)</font><b> Topic for #nixos set by niksnut!~eelco@ec2-54-216-36-73.eu-west-1.compute.amazonaws.com at 12:56:59 PM on 04/11/2014</b><br/>
<font color="#A82F2F"><font size="2">(09:44:57 PM)</font> <b>iElectric:</b></font> aszlig: maybe we should have both packages available, with hardening and without<br/>
<font color="#A82F2F"><font size="2">(09:45:06 PM)</font> <b>iElectric:</b></font> at least during transitioning period<br/>
<font size="2">(09:46:33 PM)</font><b> elifrey [<em>~elifrey@2601:8:9f00:3b:a819:7437:af13:c32f</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(09:49:11 PM)</font> <b>ambro718:</b></font> I have a hard time accepting anything involving setuid as &quot;hardened&quot;...<br/>
<font color="#A82F2F"><font size="2">(09:50:52 PM)</font> <b>o11c:</b></font> setuid is for ppeople who are too lazy/too ignorant to use setcap<br/>
<font color="#A82F2F"><font size="2">(09:50:58 PM)</font> <b>o11c:</b></font> setgid is useful though<br/>
<font color="#A82F2F"><font size="2">(09:51:53 PM)</font> <b>ambro718:</b></font> I dislike the general idea of allowing filesystem bits to raise priveleges. We should be using daemons or some other solution.<br/>
<font color="#A82F2F"><font size="2">(09:53:14 PM)</font> <b>ambro718:</b></font> e.g. VBoxManage uses setuid to write stuff to /root/.VirtualBox or something. There could instead be a daemon which would manage all access there (and it would have sole control over it, removign a need for filsystem locks)<br/>
<font color="#A82F2F"><font size="2">(09:54:18 PM)</font> <b>ambro718:</b></font> also I don&apos;t like using the filesystem as short-lived state, which seems to be a common design in Unix stuff<br/>
<font color="#A82F2F"><font size="2">(09:54:31 PM)</font> <b>aszlig:</b></font> ambro718: it writes to /root/.VirtualBox? O_o<br/>
<font color="#A82F2F"><font size="2">(09:54:42 PM)</font> <b>vcunat:</b></font> there are polkit and similar for that, aren&apos;t there?<br/>
<font color="#A82F2F"><font size="2">(09:55:13 PM)</font> <b>ambro718:</b></font> aszlig: yes, it puts some global configuration there, like a list of vboxnet interfaces, which magically survive reboot (are recreated when you start a VM)<br/>
<font size="2">(09:55:25 PM)</font><b> cpc26_ [<em>~cpc26@fsf/member/cpc26</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(09:55:33 PM)</font> <b>aszlig:</b></font> ambro718: that&apos;s before my fix i guess, right?<br/>
<font color="#A82F2F"><font size="2">(09:55:39 PM)</font> <b>ambro718:</b></font> which fix?<br/>
<font color="#A82F2F"><font size="2">(09:55:55 PM)</font> <b>ambro718:</b></font> that&apos;s just the design of VirtualBox<br/>
<font color="#A82F2F"><font size="2">(09:56:00 PM)</font> <b>aszlig:</b></font> ambro718: 0a5535ffd64d19bef319a6b439d3e195fe702d51<br/>
<font size="2">(09:56:09 PM)</font><b> cpc26__ [<em>~cpc26@fsf/member/cpc26</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(09:56:13 PM)</font> <b>aszlig:</b></font> ambro718: that&apos;s not per-design<br/>
<font size="2">(09:56:19 PM)</font><b> Zert left the room (quit: Quit: Connection closed for inactivity).</b><br/>
<font color="#A82F2F"><font size="2">(09:56:21 PM)</font> <b>aszlig:</b></font> that&apos;s a nixos-specific bug<br/>
<font color="#A82F2F"><font size="2">(09:56:29 PM)</font> <b>aszlig:</b></font> or... was<br/>
<font color="#A82F2F"><font size="2">(09:56:51 PM)</font> <b>pmahoney:</b></font> ambro718: have you seen http://skarnet.org/software/s6-networking/s6-sudo.html ?  implements sudo-like interface with no suid binaries by passing fd&apos;s through unix sockets<br/>
<font size="2">(09:57:02 PM)</font><b> cpc26 left the room (quit: Ping timeout: 256 seconds).</b><br/>
<font color="#A82F2F"><font size="2">(09:57:41 PM)</font> <b>ambro718:</b></font> aszlig: ah, you &quot;fixed&quot; it, nice :)<br/>
<font color="#A82F2F"><font size="2">(09:57:53 PM)</font> <b>aszlig:</b></font> ambro718: well, &quot;fixed&quot;... yeah<br/>
<font color="#A82F2F"><font size="2">(09:58:06 PM)</font> <b>aszlig:</b></font> the service shouldn&apos;t be there<br/>
<font color="#A82F2F"><font size="2">(09:58:18 PM)</font> <b>Lethalman:</b></font> pmahoney, also policykit<br/>
<font color="#A82F2F"><font size="2">(09:58:20 PM)</font> <b>ambro718:</b></font> aszlig: isn&apos;t it the default VirtualBox behavior to write stuff to /root?<br/>
<font color="#A82F2F"><font size="2">(09:58:30 PM)</font> <b>aszlig:</b></font> ambro718: it isn&apos;t<br/>
<font color="#A82F2F"><font size="2">(09:58:49 PM)</font> <b>ambro718:</b></font> then where is that kind of config saved normally?<br/>
<font color="#A82F2F"><font size="2">(09:58:53 PM)</font> <b>aszlig:</b></font> ambro718: in this case it was because it is actually run as root<br/>
<font color="#A82F2F"><font size="2">(09:59:19 PM)</font> <b>aszlig:</b></font> ambro718: with &quot;it&quot; i mean VBoxSVC for creating the hostonlyif<br/>
<font color="#A82F2F"><font size="2">(09:59:29 PM)</font> <b>ambro718:</b></font> I see, makes sense<br/>
<font color="#A82F2F"><font size="2">(09:59:33 PM)</font> <b>aszlig:</b></font> which shouldn&apos;t be done as a service _at_all_<br/>
<font size="2">(09:59:49 PM)</font><b> cpc26_ left the room (quit: Ping timeout: 250 seconds).</b><br/>
<font size="2">(10:00:04 PM)</font><b> Lethalman left the room (quit: Quit: Leaving).</b><br/>
<font color="#A82F2F"><font size="2">(10:00:30 PM)</font> <b>ambro718:</b></font> what I would like is to be able to create a one-time vboxnet, without any config being written out<br/>
<font color="#A82F2F"><font size="2">(10:00:49 PM)</font> <b>ambro718:</b></font> * also to specify a name for it, which is not possible currently<br/>
<font color="#A82F2F"><font size="2">(10:01:21 PM)</font> <b>ambro718:</b></font> I have some magic in my network config scripts which read the stdout of vboxmanage to figure out what interface was created :)<br/>
<font color="#A82F2F"><font size="2">(10:01:32 PM)</font> <b>pmahoney:</b></font> Lethalman: interesting, didn&apos;t know that one. the wiki summary is a bit lethargic though &quot;[sudo] provides more ... security&quot;<br/>
<font size="2">(10:03:41 PM)</font><b> eddyb_ [<em>~eddyb@unaffiliated/eddyb</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(10:06:00 PM)</font> <b>ambro718:</b></font> aszlig: isn&apos;t that patch a security problem? using /tmp ?<br/>
<font color="#A82F2F"><font size="2">(10:06:20 PM)</font> <b>aszlig:</b></font> iElectric: both? how do you handle that?<br/>
<font size="2">(10:06:26 PM)</font><b> Takle [<em>~takle@188.228.85.218</em>] entered the room.</b><br/>
<font size="2">(10:06:33 PM)</font><b> eddyb left the room (quit: Ping timeout: 258 seconds).</b><br/>
<font color="#A82F2F"><font size="2">(10:06:37 PM)</font> <b>aszlig:</b></font> iElectric: and by default the package is without hardening<br/>
<font color="#A82F2F"><font size="2">(10:06:38 PM)</font> <b>ambro718:</b></font> as in symlink attacks<br/>
<font color="#A82F2F"><font size="2">(10:06:46 PM)</font> <b>aszlig:</b></font> only the service built with hardening<br/>
<font color="#A82F2F"><font size="2">(10:06:52 PM)</font> <b>aszlig:</b></font> ambro718: which one?<br/>
<font size="2">(10:07:00 PM)</font><b> justbeingglad [<em>~justbeing@cpc10-warw15-2-0-cust75.3-2.cable.virginm.net</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(10:07:01 PM)</font> <b>ambro718:</b></font> aszlig: https://github.com/NixOS/nixpkgs/commit/0a5535ffd64d19bef319a6b439d3e195fe702d51<br/>
<font size="2">(10:07:10 PM)</font><b> justbeingglad left the room.</b><br/>
<font color="#A82F2F"><font size="2">(10:07:15 PM)</font> <b>iElectric:</b></font> aszlig: virtualboxWithHardening = virtualbox.override { enableHardening = true; };<br/>
<font color="#A82F2F"><font size="2">(10:07:39 PM)</font> <b>tv:</b></font> Is there a workaround/fix for ghc&apos;s &quot;package XXX is broken due to missing package&quot;?<br/>
<font color="#A82F2F"><font size="2">(10:07:44 PM)</font> <b>aszlig:</b></font> iElectric: well, that wouldn&apos;t make sense<br/>
<font color="#A82F2F"><font size="2">(10:07:51 PM)</font> <b>aszlig:</b></font> iElectric: not without the service<br/>
<font color="#A82F2F"><font size="2">(10:08:03 PM)</font> <b>ambro718:</b></font> aszlig: ah never mind, I just discovered PrivateTmp :)<br/>
<font color="#A82F2F"><font size="2">(10:08:11 PM)</font> <b>aszlig:</b></font> because hardening won&apos;t work without suid wrappers<br/>
<font color="#A82F2F"><font size="2">(10:08:42 PM)</font> <b>iElectric:</b></font> ah, ok<br/>
<font color="#A82F2F"><font size="2">(10:09:00 PM)</font> <b>iElectric:</b></font> (didn&apos;t look at that, thought it happens outside the package)<br/>
<font color="#A82F2F"><font size="2">(10:09:29 PM)</font> <b>aszlig:</b></font> well, the suid wrappers are there to ensure only the root user has access to the devices<br/>
<font size="2">(10:16:00 PM)</font><b> The account has disconnected and you are no longer in this chat. You will automatically rejoin the chat when the account reconnects.</b><br/>
</body></html>
