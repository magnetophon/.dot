<html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Conversation with #nixos at Sun 11 Jan 2015 08:22:58 PM CET on magnetophon@irc.freenode.net (irc)</title></head><body><h3>Conversation with #nixos at Sun 11 Jan 2015 08:22:58 PM CET on magnetophon@irc.freenode.net (irc)</h3>
<font size="2">(08:22:58 PM)</font><b> The topic for #nixos is: <a href="http://nixos.org/">http://nixos.org/</a> || Latest NixOS: <a href="http://nixos.org/nixos/download.html">http://nixos.org/nixos/download.html</a> || Latest Nix: <a href="http://nixos.org/nix/download.html">http://nixos.org/nix/download.html</a> || Logs: <a href="http://nixos.org/irc/logs/">http://nixos.org/irc/logs/</a> || Swag: <a href="http://www.cafepress.co.uk/NixOS">http://www.cafepress.co.uk/NixOS</a></b><br/>
<font size="2">(08:22:58 PM)</font><b> Topic for #nixos set by niksnut!~eelco@ec2-54-216-36-73.eu-west-1.compute.amazonaws.com at 12:56:59 PM on 04/11/2014</b><br/>
<font color="#A82F2F"><font size="2">(08:23:17 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] vcunat opened pull request #5714: stdenv substitute: avoid using a temporary file (staging...p/stdenv-subst) http://git.io/BGbAwA<br/>
<font color="#A82F2F"><font size="2">(08:23:43 PM)</font> <b>vcunat:</b></font> copumpkin: you reacted sooner than I managed to create a PR :-)<br/>
<font color="#A82F2F"><font size="2">(08:23:50 PM)</font> <b>copumpkin:</b></font> :D<br/>
<font color="#A82F2F"><font size="2">(08:24:14 PM)</font> <b>pkoerbitz:</b></font> qknight, there are two different mtl versions in the package repo (mtl and mtl_2_2_1) and to me it looks like the latter (mtl_2_2_1) doesn&apos;t have the right dependencies<br/>
<font color="#A82F2F"><font size="2">(08:24:22 PM)</font> <b>pkoerbitz:</b></font> but maybe there is a reason for this<br/>
<font color="#A82F2F"><font size="2">(08:26:17 PM)</font> <b>qknight:</b></font> pkoerbitz: just talk to haskell/nix devs here<br/>
<font color="#A82F2F"><font size="2">(08:28:08 PM)</font> <b>pkoerbitz:</b></font> qknight, will do, thank you<br/>
<font color="#A82F2F"><font size="2">(08:43:28 PM)</font> <b>devhell:</b></font> anyone else experiencing nm-applet not showing anymore? (specifically in an i3 environment)<br/>
<font color="#16569E"><font size="2">(08:44:05 PM)</font> <b>magnetophon:</b></font> devhell: I couldn't get it to work at all, also in i3.<br/>
<font color="#16569E"><font size="2">(08:44:31 PM)</font> <b>magnetophon:</b></font> devhell: now I'm using connman, with a dmenu script.<br/>
<font color="#A82F2F"><font size="2">(08:45:38 PM)</font> <b>devhell:</b></font> magnetophon: hmm.. thanks. It did work up until the last unstable channel update.<br/>
<font color="#16569E"><font size="2">(08:45:39 PM)</font> <b>magnetophon:</b></font> it's much faster than nm-applet or wicd, both in controlling it and in coonectionspeed.<br/>
<font color="#A82F2F"><font size="2">(08:45:47 PM)</font> <b>devhell:</b></font> really<br/>
<font color="#A82F2F"><font size="2">(08:45:51 PM)</font> <b>devhell:</b></font> I&apos;ll have to have a look<br/>
<font color="#16569E"><font size="2">(08:45:53 PM)</font> <b>magnetophon:</b></font> much<br/>
<font color="#A82F2F"><font size="2">(08:45:59 PM)</font> <b>devhell:</b></font> thanks<br/>
<font color="#16569E"><font size="2">(08:47:20 PM)</font> <b>magnetophon:</b></font> devhell: https://github.com/taylorchu/connman_dmenu<br/>
<font color="#A82F2F"><font size="2">(08:47:43 PM)</font> <b>devhell:</b></font> ah<br/>
<font color="#A82F2F"><font size="2">(08:47:51 PM)</font> <b>devhell:</b></font> I need full EAP support :(<br/>
<font color="#16569E"><font size="2">(08:48:00 PM)</font> <b>magnetophon:</b></font> EAP?<br/>
<font color="#A82F2F"><font size="2">(08:48:24 PM)</font> <b>devhell:</b></font> wpa enterprise<br/>
<font color="#16569E"><font size="2">(08:49:21 PM)</font> <b>magnetophon:</b></font> yup, np: https://wiki.archlinux.org/index.php/Connman<br/>
<font color="#A82F2F"><font size="2">(08:50:11 PM)</font> <b>devhell:</b></font> magnetophon: I&apos;ll give it a spin, thanks. :)<br/>
<font color="#A82F2F"><font size="2">(08:51:04 PM)</font> <b>semigroup:</b></font> Hi, I&apos;m trying to set nixpkgs.config.allowUnfree = true in NixOS, but I can&apos;t figure out how to enable it by default for a user when using nix-env.<br/>
<font color="#A82F2F"><font size="2">(08:51:29 PM)</font> <b>semigroup:</b></font> I&apos;ve got it in ~/.nixpkgs/config.nix, but that apparently doesn&apos;t work in NixOS?<br/>
<font color="#A82F2F"><font size="2">(08:51:40 PM)</font> <b>vcunat:</b></font> semigroup: how did you put it there?<br/>
<font color="#A82F2F"><font size="2">(08:51:45 PM)</font> <b>devhell:</b></font> magnetophon: just connman or connmanui too?<br/>
<font color="#16569E"><font size="2">(08:52:13 PM)</font> <b>magnetophon:</b></font> devhell: only downside: the dmenu script oddly needs root in order to remember new passwords.  (odd, cause connman doesn't need root) I commented out the check for root, and it still works, but if you want to add new PW's to the remembered list you need to run connmanctrl from the commandline. No biggie.<br/>
<font color="#16569E"><font size="2">(08:52:25 PM)</font> <b>magnetophon:</b></font> devhell: just conmann<br/>
<font color="#A82F2F"><font size="2">(08:52:44 PM)</font> <b>devhell:</b></font> I&apos;ll keep it in mind, thanks again ;)<br/>
<font color="#A82F2F"><font size="2">(08:52:48 PM)</font> <b>goibhniu:</b></font> kmicu: new record? (270 nicks)<br/>
<font color="#A82F2F"><font size="2">(08:52:48 PM)</font> <b>semigroup:</b></font> vcunat: not sure what you mean precisely–<br/>
<font color="#16569E"><font size="2">(08:52:49 PM)</font> <b>magnetophon:</b></font> the ui is a normal applet, but is in alpha stage<br/>
<font color="#16569E"><font size="2">(08:53:00 PM)</font> <b>magnetophon:</b></font> goibhniu: 271! :)<br/>
<font color="#A82F2F"><font size="2">(08:53:05 PM)</font> <b>vcunat:</b></font> semigroup: well, the contents of that file<br/>
<font color="#A82F2F"><font size="2">(08:53:13 PM)</font> <b>vcunat:</b></font> (sorry for not being clear)<br/>
<font color="#A82F2F"><font size="2">(08:53:38 PM)</font> <b>semigroup:</b></font> vcunat: { nixpkgs.config.allowUnfree = true; }<br/>
<font color="#A82F2F"><font size="2">(08:53:44 PM)</font> <b>kmicu:</b></font> goibhniu: NixOS starting to be too mainstream for me ;) #nixos user peak: 270 (6m 10s ago) lowest: 206 (323d 54m ago) average: 224.17 users (29d period)<br/>
<font color="#A82F2F"><font size="2">(08:54:13 PM)</font> <b>vcunat:</b></font> semigroup: it should be just { allowUnfree = true; }7<br/>
<font color="#A82F2F"><font size="2">(08:54:23 PM)</font> <b>vcunat:</b></font> s/7//<br/>
<font color="#A82F2F"><font size="2">(08:55:33 PM)</font> <b>copumpkin:</b></font> yeah<br/>
<font color="#A82F2F"><font size="2">(08:55:38 PM)</font> <b>semigroup:</b></font> vcunat: That did the trick, thanks!<br/>
<font color="#A82F2F"><font size="2">(08:55:54 PM)</font> <b>copumpkin:</b></font> semigroup: you were ending up with nixpkgs.config.nixpkgs.config.allowUnfree :)<br/>
<font color="#A82F2F"><font size="2">(08:55:54 PM)</font> <b>vcunat:</b></font> :-)<br/>
<font color="#A82F2F"><font size="2">(08:56:56 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] peti pushed 6 new commits to master: http://git.io/-FTbbw<br/>
<font color="#A82F2F"><font size="2">(08:56:56 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 921bb64 Peter Simons: haskell-ng: fix old Cabal builds<br/>
<font color="#A82F2F"><font size="2">(08:56:56 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 3e64a6e Peter Simons: haskell-ng: fix 7.6.3 build of hashable<br/>
<font color="#A82F2F"><font size="2">(08:56:56 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master cfc2aea Peter Simons: haskell-ng: disable ABList test suite to fix the build<br/>
<font color="#16569E"><font size="2">(08:59:48 PM)</font> <b>magnetophon:</b></font> goibhniu: Is now a better time for that thorny faust issue?<br/>
<font size="2">(09:00:11 PM)</font><b> copumpkin left the room (quit: Quit: My MacBook Pro has gone to sleep. ZZZzzz…).</b><br/>
<font color="#16569E"><font size="2">(09:00:34 PM)</font> <b>magnetophon:</b></font> I need help with some architectural decisions.<br/>
<font color="#A82F2F"><font size="2">(09:02:09 PM)</font> <b>valerian:</b></font> hello! i&apos;m trying to build a nix derivation from a npm package<br/>
<font color="#A82F2F"><font size="2">(09:02:15 PM)</font> <b>valerian:</b></font> my current expression is https://gist.github.com/anonymous/b198df2efc19326bef8f<br/>
<font color="#A82F2F"><font size="2">(09:02:37 PM)</font> <b>valerian:</b></font> but i feel like it could be simplified... though i do&apos;nt know how i could avoir copying for example &apos;neededNatives&apos;<br/>
<font color="#A82F2F"><font size="2">(09:02:49 PM)</font> <b>valerian:</b></font> any idea?<br/>
<font color="#A82F2F"><font size="2">(09:03:12 PM)</font> <b>goibhniu:</b></font> kmicu: heh<br/>
<font color="#A82F2F"><font size="2">(09:04:18 PM)</font> <b>goibhniu:</b></font> magnetophon: I am a bit busy still I&apos;m afraid, but what&apos;s it about?<br/>
<font color="#16569E"><font size="2">(09:05:01 PM)</font> <b>magnetophon:</b></font> goibhniu: The way faust is split up in the compiler and the build-scripts<br/>
<font color="#A82F2F"><font size="2">(09:05:24 PM)</font> <b>goibhniu:</b></font> ah ok<br/>
<font color="#A82F2F"><font size="2">(09:05:41 PM)</font> <b>goibhniu:</b></font> magnetophon: and what are your thoughts?<br/>
<font color="#16569E"><font size="2">(09:06:08 PM)</font> <b>magnetophon:</b></font> goibhniu: I can't explain really shortly, sorry.  I think by the time I've explained it, the answer will probably be obvious to you.<br/>
<font color="#A82F2F"><font size="2">(09:06:42 PM)</font> <b>goibhniu:</b></font> fair enough :)<br/>
<font color="#16569E"><font size="2">(09:06:54 PM)</font> <b>magnetophon:</b></font> goibhniu: Wanna give it a go? I can open a channel?<br/>
<font color="#A82F2F"><font size="2">(09:08:04 PM)</font> <b>goibhniu:</b></font> ah, I was hoping it would make sense to ask everyone about it<br/>
<font color="#16569E"><font size="2">(09:08:58 PM)</font> <b>magnetophon:</b></font> OK, I'll try that.  Not too much traffic atm anyway.<br/>
<font color="#16569E"><font size="2">(09:10:10 PM)</font> <b>magnetophon:</b></font> So: faust is a language, and it's compiler spits out cpp. That cpp is used by various build scrips to make binaries. <br/>
<font color="#16569E"><font size="2">(09:11:33 PM)</font> <b>magnetophon:</b></font> At the moment the compiler is in the package faust-compiler, and the build-scripts are called simply faust. I'll keep referring to them as build-scipts to avoid confusion with the language faust. <br/>
<font size="2">(09:14:03 PM)</font><b> roconnor left the room (quit: Ping timeout: 252 seconds).</b><br/>
<font color="#16569E"><font size="2">(09:16:19 PM)</font> <b>magnetophon:</b></font> The compiler is useful without the build-scripts, as you can manually use/modify the cpp it outputs. The compiler takes quite a long time to build (as in compile a nix-package), and that by itself is already a good reason to split up the packages, as the build-scripts build fast but have lot's of dependencies. The build scripts are for example faust2pd to make a puredata external, or faust2jack to make a stand-alone jack binary.<br/>
<font color="#16569E"><font size="2">(09:16:30 PM)</font> <b>magnetophon:</b></font> goibhniu: am I still making sense?<br/>
<font color="#16569E"><font size="2">(09:18:53 PM)</font> <b>magnetophon:</b></font> There are about 30 build-scripts all targeting different architectures, so all needing different dependencies.  It's not handy to have to recompile the compiler each time I package a new build-script.  <br/>
<font color="#A82F2F"><font size="2">(09:21:25 PM)</font> <b>goibhniu:</b></font> magnetophon: yep, make sense<br/>
<font color="#A82F2F"><font size="2">(09:21:25 PM)</font> <b>goibhniu:</b></font> +s<br/>
<font color="#16569E"><font size="2">(09:21:55 PM)</font> <b>magnetophon:</b></font> The compiler needs a bunch of .lib files as it's library, and the build scripts need to have a .cpp file each, which combine with the cpp that the compiler outputs, to make a binary in that particular format. (so for example faust2pd needs pd.cpp) <br/>
<font color="#16569E"><font size="2">(09:24:04 PM)</font> <b>magnetophon:</b></font> Both the .lib and the .cpp files are in the same directory in faust-upstream, and are found trough the same environment-variable  (ie export faust-lib = /path/to/libs/)<br/>
<font color="#16569E"><font size="2">(09:24:57 PM)</font> <b>magnetophon:</b></font> The problem is that I need to patch some of the .cpp files as part of the packaging process.<br/>
<font color="#16569E"><font size="2">(09:26:34 PM)</font> <b>magnetophon:</b></font> So I cannot put the .lib files in the build-scripts package, as the compiler needs them, and I cannot put the .cpp files in the compiler, as I need to patch them as part of the build-scripts packaging effort, which is still a lot of work.<br/>
<font color="#16569E"><font size="2">(09:26:41 PM)</font> <b>magnetophon:</b></font> goibhniu: all clear?<br/>
<font size="2">(09:26:49 PM)</font><b> roconnor [<em>~roconnor@e120-pool-d89a760a.brdbnd.voicenetwork.ca</em>] entered the room.</b><br/>
<font color="#16569E"><font size="2">(09:27:18 PM)</font> <b>magnetophon:</b></font> henrytill: Is this ^^ a better explanation than I gave yesterday?<br/>
<font color="#A82F2F"><font size="2">(09:27:34 PM)</font> <b>goibhniu:</b></font> magnetophon: yes, very clear<br/>
<font color="#A82F2F"><font size="2">(09:28:07 PM)</font> <b>goibhniu:</b></font> can you copy the .lib files into the build-scripts package and only patch them there?<br/>
<font color="#A82F2F"><font size="2">(09:28:42 PM)</font> <b>goibhniu:</b></font> I assume you patch them so that they can find the relevant dependencies e.g. pure-data?<br/>
<font color="#16569E"><font size="2">(09:29:20 PM)</font> <b>magnetophon:</b></font> The .lib files don't need patching, they just need to be available for the compiler.  The .cpp files need patching, for the reason you mention, yes.<br/>
<font color="#16569E"><font size="2">(09:30:44 PM)</font> <b>magnetophon:</b></font> I could just put everything in the build-scripts package, but then the compiler stops working on it's own, and you'd have a circular dependency, iiuc<br/>
<font color="#062585"><font size="2">(09:30:58 PM)</font> <b>***goibhniu</b></font> will be back in a bit<br/>
<font color="#16569E"><font size="2">(09:32:04 PM)</font> <b>magnetophon:</b></font> So the build-scripts depend on the compiler (as it is now, and which makes sense), and the compiler depends on the build-scripts, cause the .lib files are in there.<br/>
<font color="#16569E"><font size="2">(09:34:38 PM)</font> <b>magnetophon:</b></font> Looks like a hackish way to solve it to me.  I could also try to make two separate environment variables, one for the compiler to find the .libs, and one for the build-scripts, to find the .cpp's, but I'm afraid I'll be chasing my own tail for a long time if I go that route...<br/>
<font color="#A82F2F"><font size="2">(09:40:00 PM)</font> <b>iElectric:</b></font> some fun by madjar: https://howoldis.herokuapp.com/<br/>
<font color="#A82F2F"><font size="2">(09:40:43 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] vcunat pushed 2 new commits to master: http://git.io/l9CEyQ<br/>
<font color="#A82F2F"><font size="2">(09:40:43 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 123a8bf Vladimír Čunát: stdenv: refactor code for evaluation errors (no hash changes)<br/>
<font color="#A82F2F"><font size="2">(09:40:43 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master e98a443 Vladimír Čunát: stdenv: improve message on evaluation check (no hash changes)<br/>
<font color="#A82F2F"><font size="2">(09:44:41 PM)</font> <b>vcunat:</b></font> nice :-)<br/>
<font color="#A82F2F"><font size="2">(09:44:56 PM)</font> <b>vcunat:</b></font> I was just using http://nixos.org/channels/ so far<br/>
<font color="#A82F2F"><font size="2">(09:45:48 PM)</font> <b>vcunat:</b></font> only clicking the channels don&apos;t work on https://howoldis.herokuapp.com/<br/>
<font color="#A82F2F"><font size="2">(09:45:54 PM)</font> <b>vcunat:</b></font> madjar: ^^<br/>
<font color="#A82F2F"><font size="2">(09:46:10 PM)</font> <b>ktosiek:</b></font> haha, good one<br/>
<font color="#A82F2F"><font size="2">(09:54:28 PM)</font> <b>vandenoever:</b></font> phreedom: which nix package has kfontview?<br/>
<font color="#A82F2F"><font size="2">(09:59:15 PM)</font> <b>phreedom:</b></font> vandenoever: it&apos;s supposed to be kde4.kde_workspace, it even has docs for it but no exe<br/>
<font color="#A82F2F"><font size="2">(09:59:20 PM)</font> <b>phreedom:</b></font> it has some kcm for it though<br/>
<font color="#A82F2F"><font size="2">(09:59:34 PM)</font> <b>vandenoever:</b></font> phreedom: nixos 14.04 did have it<br/>
<font color="#A82F2F"><font size="2">(09:59:57 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] ryantm opened pull request #5715: add newline between ssh_known_host entries; closes #5612 (master...ssh_known_hosts) http://git.io/hoZRvw<br/>
<font color="#A82F2F"><font size="2">(10:00:15 PM)</font> <b>vandenoever:</b></font> phreedom: but then, for some reason workspace is still at version 4.11.12<br/>
<font color="#A82F2F"><font size="2">(10:00:48 PM)</font> <b>phreedom:</b></font> vandenoever: they stopped updating it, this is normal<br/>
<font color="#A82F2F"><font size="2">(10:01:13 PM)</font> <b>vandenoever:</b></font> phreedom: that&apos;s weird<br/>
<font color="#A82F2F"><font size="2">(10:02:43 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] ryantm closed pull request #5715: add newline between ssh_known_host entries; closes #5612 (master...ssh_known_hosts) http://git.io/hoZRvw<br/>
<font color="#A82F2F"><font size="2">(10:06:39 PM)</font> <b>phreedom:</b></font> vandenoever: interesting it&apos;s also missing kfontinst<br/>
<font color="#A82F2F"><font size="2">(10:07:55 PM)</font> <b>goibhniu:</b></font> magnetophon: yeah, it&apos;s a tricky one alright<br/>
<font color="#A82F2F"><font size="2">(10:08:42 PM)</font> <b>phreedom:</b></font> vandenoever: nailed it down<br/>
<font color="#16569E"><font size="2">(10:08:44 PM)</font> <b>magnetophon:</b></font> goibhniu: yeah.  I was hoping this would have an obvious solution to experienced nixers...<br/>
<font color="#A82F2F"><font size="2">(10:08:49 PM)</font> <b>phreedom:</b></font> vandenoever: it wasn&apos;t me who was updating kde that time :(<br/>
<font color="#A82F2F"><font size="2">(10:09:34 PM)</font> <b>goibhniu:</b></font> magnetophon: I can&apos;t think of anything like it in nixpkgs<br/>
<font color="#A82F2F"><font size="2">(10:11:29 PM)</font> <b>goibhniu:</b></font> magnetophon: I&apos;m not sure that the compiler really depends on the build-scripts, maybe I have misunderstood though<br/>
<font color="#A82F2F"><font size="2">(10:11:29 PM)</font> <b>phreedom:</b></font> vandenoever: or not :(<br/>
<font color="#A82F2F"><font size="2">(10:11:37 PM)</font> <b>phreedom:</b></font> vandenoever: ok I&apos;ll figure it out shortly<br/>
<font color="#A82F2F"><font size="2">(10:11:55 PM)</font> <b>phreedom:</b></font> vandenoever: but it&apos;ll take some builds<br/>
<font color="#16569E"><font size="2">(10:12:29 PM)</font> <b>magnetophon:</b></font> goibhniu: right now it doesn't, and logically it shouldn't, but if I decide to put the .lib files in the BS-package, then it would<br/>
<font color="#A82F2F"><font size="2">(10:12:35 PM)</font> <b>goibhniu:</b></font> magnetophon: e.g. if you want to use faust2jack, you&apos;ll want to use the vanilla faust compiler plus some patched .cpp files, which could as well be in the build-scripts package<br/>
<font size="2">(10:12:55 PM)</font><b> roconnor left the room (quit: Ping timeout: 264 seconds).</b><br/>
<font color="#16569E"><font size="2">(10:14:58 PM)</font> <b>magnetophon:</b></font> goibhniu: Sure, i could put the the .libs in the compiler-package, and the .cpp's in the BS-package, which logically makes sense. The problem is that they are both found trough one and the same environment-variable.<br/>
<font color="#A82F2F"><font size="2">(10:14:58 PM)</font> <b>NixOS_GitHub:</b></font> (notice) [nixpkgs] vcunat pushed 1 new commit to master: http://git.io/7qEwSw<br/>
<font color="#A82F2F"><font size="2">(10:14:58 PM)</font> <b>NixOS_GitHub:</b></font> (notice) nixpkgs/master 72d2d59 Vladimír Čunát: /etc/ssh/ssh_known_hosts: refactor and fix #5612...<br/>
<font color="#A82F2F"><font size="2">(10:15:59 PM)</font> <b>goibhniu:</b></font> magnetophon: right, but when you call faust2jack, you know which ones you need, right?<br/>
<font color="#16569E"><font size="2">(10:16:26 PM)</font> <b>magnetophon:</b></font> goibhniu: which .cpp's? yeah I do.<br/>
<font color="#A82F2F"><font size="2">(10:17:15 PM)</font> <b>goibhniu:</b></font> magnetophon: so does it not work to copy them to the BS for patching (and also have them in faust so that it works stand-alone)<br/>
<font color="#16569E"><font size="2">(10:18:13 PM)</font> <b>magnetophon:</b></font> The problem is that both groups of files are found trough &quot;export faust-libs = /path/to/libraries/&quot;, which in upstream contains both the .lib files for the compiler, and the  .cpp files, for the BS.<br/>
<font color="#16569E"><font size="2">(10:19:28 PM)</font> <b>magnetophon:</b></font> the compiler and the BS don't even need the same files, but they ARE normally in the same dir, and both the compiler and the BS find them trough the env-var.<br/>
<font color="#A82F2F"><font size="2">(10:19:52 PM)</font> <b>madjar:</b></font> vcunat: blame iElectric :)<br/>
<font color="#A82F2F"><font size="2">(10:20:13 PM)</font> <b>goibhniu:</b></font> magnetophon: so you could also copy the libs then, or symlink to the libs in the compiler?<br/>
<font color="#16569E"><font size="2">(10:21:20 PM)</font> <b>magnetophon:</b></font> not sure what you mean. <br/>
<font color="#16569E"><font size="2">(10:22:19 PM)</font> <b>magnetophon:</b></font> goibhniu: we have .lib files needed by the compiler, and not needed by the BS, and we have .cpp files needed by the BS, but not by the compiler.<br/>
<font color="#A82F2F"><font size="2">(10:22:48 PM)</font> <b>goibhniu:</b></font> for the BS: &quot;faust-libs = /nix/store/blah-faust-bs/lib&quot; which contains symlinks to the libs in /nix/store/blah-faust-compiler/lib .. and has the patched .cpp files<br/>
<font color="#A82F2F"><font size="2">(10:23:56 PM)</font> <b>goibhniu:</b></font> does that make sense?<br/>
<font color="#A82F2F"><font size="2">(10:24:21 PM)</font> <b>goibhniu:</b></font> and you&apos;d set &quot;faust-libs&quot; in the wrapper<br/>
<font color="#16569E"><font size="2">(10:24:28 PM)</font> <b>magnetophon:</b></font> goibhniu: I cannot put everything in the compiler, as idk in what way I need to patch them yet. I'm finding that out as I package everything, and if I put them in the compiler, I need to recompile the compiler evrytime I change something in the BS (so iow every time I patch a .cpp)<br/>
<font color="#A82F2F"><font size="2">(10:25:08 PM)</font> <b>goibhniu:</b></font> yeah, I&apos;m talking about putting the patched .cpp files in the BS package, but also making the libs available on the same path<br/>
<font color="#A82F2F"><font size="2">(10:25:17 PM)</font> <b>goibhniu:</b></font> (e.g. by symlinking)<br/>
<font color="#16569E"><font size="2">(10:26:34 PM)</font> <b>magnetophon:</b></font> goibhniu: hmmm, that could work, I think.  But I'm not sure:  my brain hurts :p<br/>
<font color="#A82F2F"><font size="2">(10:26:44 PM)</font> <b>goibhniu:</b></font> perhaps I have misunderstood, let me try to restate the issue<br/>
<font color="#A82F2F"><font size="2">(10:27:21 PM)</font> <b>goibhniu:</b></font> the env var faust-libs needs to point to a directory which contains both the compiler libs and the patched .cpp files<br/>
<font color="#16569E"><font size="2">(10:27:30 PM)</font> <b>magnetophon:</b></font> yes<br/>
<font color="#A82F2F"><font size="2">(10:27:46 PM)</font> <b>goibhniu:</b></font> the libs don&apos;t need to be recompiled<br/>
<font color="#A82F2F"><font size="2">(10:28:21 PM)</font> <b>goibhniu:</b></font> and we don&apos;t care about unpatched .cpp files lying around in the faust-compiler package, since we only expect to use them through particular wrappers<br/>
<font color="#A82F2F"><font size="2">(10:28:48 PM)</font> <b>goibhniu:</b></font> ... another way to do this is to use buildEnv, but I think using symlinks is straight forward<br/>
<font color="#16569E"><font size="2">(10:28:49 PM)</font> <b>magnetophon:</b></font> the libs are just needed by the faust-compiler. SO for example there is oscillators.lib, so that in faust I can say: gimme a sawthoot<br/>
<font color="#16569E"><font size="2">(10:29:30 PM)</font> <b>magnetophon:</b></font> yes, we don't care about unpatched .cpp files lying around in the faust-compiler package<br/>
<font color="#062585"><font size="2">(10:30:21 PM)</font> <b>***magnetophon</b></font> ignores the buildEnv remark for now, as his brain already hurts, an patiently waits for the next step.... :)<br/>
<font color="#A82F2F"><font size="2">(10:34:07 PM)</font> <b>goibhniu:</b></font> magnetophon: yeah, I think this approach will work fine<br/>
<font color="#16569E"><font size="2">(10:34:16 PM)</font> <b>magnetophon:</b></font> goibhniu: Not sure how this symlinking/wrapping thing would work. Could you spell it out?<br/>
<font color="#A82F2F"><font size="2">(10:34:25 PM)</font> <b>goibhniu:</b></font> hmm<br/>
<font color="#A82F2F"><font size="2">(10:35:04 PM)</font> <b>goibhniu:</b></font> say you want to build src.faust which requires faust with jack<br/>
<font color="#16569E"><font size="2">(10:35:21 PM)</font> <b>magnetophon:</b></font> yes<br/>
<font color="#A82F2F"><font size="2">(10:35:28 PM)</font> <b>goibhniu:</b></font> you use faust2jack, which is a wrapper in /nix/store/blah-faust-bs/bin/faust2jack<br/>
<font color="#16569E"><font size="2">(10:35:35 PM)</font> <b>magnetophon:</b></font> yes<br/>
<font color="#A82F2F"><font size="2">(10:35:52 PM)</font> <b>goibhniu:</b></font> the wrapper sets &quot;faust-libs = /nix/store/blah-faust-bs/lib&quot;<br/>
<font color="#16569E"><font size="2">(10:36:30 PM)</font> <b>magnetophon:</b></font> ah, and in there I put symlinks to *.lib in faust-compiler, right?<br/>
<font color="#A82F2F"><font size="2">(10:36:47 PM)</font> <b>goibhniu:</b></font> in /nix/store/blah-faust-bs/lib we have libx.so which is symlinked to the faust compiler lib in /nix/store/blah-faust-compiler/lib/libx.so<br/>
<font color="#A82F2F"><font size="2">(10:37:23 PM)</font> <b>goibhniu:</b></font> and in /nix/store/blah-faust-bs/lib we also have the patched jack.cpp file<br/>
<font color="#A82F2F"><font size="2">(10:37:33 PM)</font> <b>goibhniu:</b></font> that&apos;s it, right?<br/>
<font color="#16569E"><font size="2">(10:37:55 PM)</font> <b>magnetophon:</b></font> yeah, that's what I meant. (what you call .so is called .lib)<br/>
<font color="#A82F2F"><font size="2">(10:38:20 PM)</font> <b>goibhniu:</b></font> kk<br/>
<font color="#16569E"><font size="2">(10:38:23 PM)</font> <b>magnetophon:</b></font> goibhniu: Cool, I think we have a solution. Thanks a million!<br/>
<font color="#A82F2F"><font size="2">(10:38:34 PM)</font> <b>goibhniu:</b></font> excellent! glad to help!<br/>
<font size="2">(11:10:22 PM)</font><b> The account has disconnected and you are no longer in this chat. You will automatically rejoin the chat when the account reconnects.</b><br/>
</body></html>
