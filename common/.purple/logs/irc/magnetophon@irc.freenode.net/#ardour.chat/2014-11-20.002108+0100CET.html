<html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Conversation with #ardour at Thu 20 Nov 2014 12:21:08 AM CET on magnetophon@irc.freenode.net (irc)</title></head><body><h3>Conversation with #ardour at Thu 20 Nov 2014 12:21:08 AM CET on magnetophon@irc.freenode.net (irc)</h3>
<font size="2">(12:21:08 AM)</font><b> The topic for #ardour is: ardour 3.5.403 is released | download: <a href="http://ardour.org/download">http://ardour.org/download</a> |  paste to <a href="http://pastebin.com/">http://pastebin.com/</a> | OS X users please /join #ardour-osx</b><br/>
<font size="2">(12:21:08 AM)</font><b> Topic for #ardour set by las at 07:07:26 PM on 10/02/2014</b><br/>
<font color="#A82F2F"><font size="2">(12:25:36 AM)</font> <b>rgareus:</b></font> FlorianBd: if you do have ambitions to bring ardour to social networks, feel free. coordinate with prokoudine he&apos;s usually here on irc every day sometime.<br/>
<font color="#A82F2F"><font size="2">(12:26:26 AM)</font> <b>FlorianBd:</b></font> rgareus: ok<br/>
<font color="#A82F2F"><font size="2">(12:28:41 AM)</font> <b>rgareus:</b></font> las: your next tour on the van should include a stop at http://www.cafeardour.com/<br/>
<font color="#A82F2F"><font size="2">(12:28:42 AM)</font> <b>LAbot:</b></font> Title: caf? ardour - home (at www.cafeardour.com)<br/>
<font size="2">(12:28:55 AM)</font><b> slyrus_ [<em>~chatzilla@173-228-44-92.dsl.static.fusionbroadband.com</em>] entered the room.</b><br/>
<font size="2">(12:30:32 AM)</font><b> slyrus left the room (quit: Ping timeout: 256 seconds).</b><br/>
<font size="2">(12:31:04 AM)</font><b> slyrus_ is now known as slyrus</b><br/>
<font size="2">(12:32:37 AM)</font><b> valvalion left the room (quit: Ping timeout: 255 seconds).</b><br/>
<font size="2">(12:36:36 AM)</font><b> nox- [<em>noident@freebsd/developer/nox</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(12:39:28 AM)</font> <b>drobilla:</b></font> This makes no sense.  NEW PLAN<br/>
<font color="#A82F2F"><font size="2">(12:40:00 AM)</font> <b>drobilla:</b></font> http://martinfowler.com/bliki/TwoHardThings.html<br/>
<font color="#A82F2F"><font size="2">(12:40:01 AM)</font> <b>LAbot:</b></font> Title: TwoHardThings (at martinfowler.com)<br/>
<font color="#A82F2F"><font size="2">(12:41:58 AM)</font> <b>rgareus:</b></font> drobilla: so you&apos;re going to  s/fuzzy time/vague time/g ?<br/>
<font size="2">(12:44:26 AM)</font><b> slyrus_ [<em>~chatzilla@173-228-44-92.dsl.static.fusionbroadband.com</em>] entered the room.</b><br/>
<font size="2">(12:45:16 AM)</font><b> slyrus left the room (quit: Ping timeout: 256 seconds).</b><br/>
<font size="2">(12:48:12 AM)</font><b> slyrus [<em>~chatzilla@173-228-44-92.dsl.static.fusionbroadband.com</em>] entered the room.</b><br/>
<font size="2">(12:49:17 AM)</font><b> slyrus_ left the room (quit: Ping timeout: 245 seconds).</b><br/>
<font color="#A82F2F"><font size="2">(12:50:12 AM)</font> <b>drobilla:</b></font> Well, that works, so sold<br/>
<font color="#A82F2F"><font size="2">(12:50:21 AM)</font> <b>FlorianBd:</b></font> drobilla: ???<br/>
<font color="#A82F2F"><font size="2">(12:50:39 AM)</font> <b>drobilla:</b></font> rgareus: No, ditching the iterator cacheing.  Despite the model not changing and the read timestamps making sense and being identical in both cases, it just magically doesn&apos;t work, especially with rec enabled<br/>
<font color="#A82F2F"><font size="2">(12:50:56 AM)</font> <b>drobilla:</b></font> rgareus: Which makes no sense at all but doesn&apos;t happen without the cached iterator, so I&apos;ll just ditch it<br/>
<font color="#A82F2F"><font size="2">(12:51:24 AM)</font> <b>drobilla:</b></font> We can do a logarithmic search for the start now instead of the stupid linear thing anyway, so it&apos;s not really necessary for performance anymore anyway<br/>
<font color="#A82F2F"><font size="2">(12:51:47 AM)</font> <b>drobilla:</b></font> rgareus: Re: fuzzy time, that needs to go. I don&apos;t think it&apos;s even a strict weak ordering, which means STL data structures will not work correctly in the first place<br/>
<font size="2">(12:52:06 AM)</font><b> tweed [<em>~Icedove@208.103.46.133</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(12:52:09 AM)</font> <b>drobilla:</b></font> rgareus: But its reason for introduction, as I understand it, is pretending at tick stuff.  So we probably just need a fixed point timestamp class, and use that<br/>
<font color="#A82F2F"><font size="2">(12:52:19 AM)</font> <b>drobilla:</b></font> If we compile in PPQN this won&apos;t be too hard.<br/>
<font color="#A82F2F"><font size="2">(12:52:49 AM)</font> <b>drobilla:</b></font> One thing C++ can do particularly well, at least.<br/>
<font color="#A82F2F"><font size="2">(12:53:49 AM)</font> <b>rgareus:</b></font> drobilla: I&apos;m lost. where is this cached iterator that you&apos;re talking about?<br/>
<font size="2">(12:55:25 AM)</font><b> valvalion [<em>~valvalion@235.90-247-81.adsl-dyn.isp.belgacom.be</em>] entered the room.</b><br/>
<font size="2">(12:56:45 AM)</font><b> the_CLA [<em>~the_CLA@p57B99F9D.dip0.t-ipconnect.de</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(12:59:53 AM)</font> <b>drobilla:</b></font> rgareus: midi_source.cc<br/>
<font size="2">(01:00:32 AM)</font><b> the_CLA_2 left the room (quit: Ping timeout: 264 seconds).</b><br/>
<font color="#A82F2F"><font size="2">(01:00:34 AM)</font> <b>drobilla:</b></font> The cause may be related to the fact that iterators hold a read lock on the source<br/>
<font color="#A82F2F"><font size="2">(01:01:30 AM)</font> <b>drobilla:</b></font> But a fix that removes state makes me feel warm and fuzzy, and one that removes state with locks is a hot tub full of kittens, so whatever<br/>
<font color="#A82F2F"><font size="2">(01:02:05 AM)</font> <b>FlorianBd:</b></font> drobilla: can I try the git already?<br/>
<font color="#A82F2F"><font size="2">(01:02:33 AM)</font> <b>drobilla:</b></font> FlorianBd: &quot;git pull&quot; was less letters to type than that sentence ;)<br/>
<font color="#062585"><font size="2">(01:03:05 AM)</font> <b>***FlorianBd</b></font> assumes it means yes :)<br/>
<font color="#A82F2F"><font size="2">(01:03:49 AM)</font> <b>drobilla:</b></font> The answer is actually no, but it means you spent about a minute of both of our time figuring out that answer<br/>
<font color="#A82F2F"><font size="2">(01:04:47 AM)</font> <b>FlorianBd:</b></font> ah...<br/>
<font size="2">(01:07:11 AM)</font><b> slyrus_ [<em>~chatzilla@173-228-44-92.dsl.static.fusionbroadband.com</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(01:07:18 AM)</font> <b>drobilla:</b></font> I get these, though: failed to deliver ALL NOTES OFF on channel 0 on port _STR/midi_out 1<br/>
<font size="2">(01:07:44 AM)</font><b> slyrus left the room (quit: Ping timeout: 264 seconds).</b><br/>
<font size="2">(01:07:56 AM)</font><b> slyrus_ is now known as slyrus</b><br/>
<font color="#A82F2F"><font size="2">(01:09:59 AM)</font> <b>FlorianBd:</b></font> drobilla: from ardour output without debug argument ?<br/>
<font color="#A82F2F"><font size="2">(01:10:46 AM)</font> <b>rgareus:</b></font> drobilla: jack1, small midi buffer size?<br/>
<font size="2">(01:11:24 AM)</font><b> son0p left the room (quit: Ping timeout: 255 seconds).</b><br/>
<font size="2">(01:12:25 AM)</font><b> valvalion left the room (quit: Ping timeout: 272 seconds).</b><br/>
<font color="#A82F2F"><font size="2">(01:12:27 AM)</font> <b>drobilla:</b></font> rgareus: yes, and whatever the default is<br/>
<font color="#A82F2F"><font size="2">(01:12:40 AM)</font> <b>drobilla:</b></font> this little bit of events and a stop doesn&apos;t be able to overflow anything, though<br/>
<font color="#A82F2F"><font size="2">(01:13:29 AM)</font> <b>drobilla:</b></font> We should ringbuffer things like this that aren&apos;t time sensitive anyway<br/>
<font color="#A82F2F"><font size="2">(01:17:42 AM)</font> <b>drobilla:</b></font> Well, not happening now.  Whatever.<br/>
<font color="#A82F2F"><font size="2">(01:18:24 AM)</font> <b>rgareus:</b></font> drobilla: but that sounds like there (at least) two issues with delivering midi-data.<br/>
<font color="#A82F2F"><font size="2">(01:19:10 AM)</font> <b>rgareus:</b></font> drobilla: the MTC/Mclk sent in session_midi would not be affected by either fuzzy-compare no the cached iterator<br/>
<font color="#A82F2F"><font size="2">(01:22:40 AM)</font> <b>drobilla:</b></font> FlorianBd: pushed<br/>
<font color="#A82F2F"><font size="2">(01:22:47 AM)</font> <b>drobilla:</b></font> rgareus: I&apos;m sure there&apos;s some kind of buffer problem, but this wasn&apos;t related<br/>
<font color="#A82F2F"><font size="2">(01:22:58 AM)</font> <b>drobilla:</b></font> Those usually fail loudly, though<br/>
<font color="#062585"><font size="2">(01:24:10 AM)</font> <b>***FlorianBd</b></font> is download + trying :)<br/>
<font color="#A82F2F"><font size="2">(01:24:19 AM)</font> <b>drobilla:</b></font> Diff is almost entirely red.  Best kind of fix.<br/>
<font color="#A82F2F"><font size="2">(01:27:48 AM)</font> <b>las:</b></font> rgareus: next time we&apos;re out west, i&apos;ll try to stop by there<br/>
<font color="#A82F2F"><font size="2">(01:28:14 AM)</font> <b>las:</b></font> drobilla: nice patch :)<br/>
<font size="2">(01:28:32 AM)</font><b> takuan left the room (quit: Ping timeout: 240 seconds).</b><br/>
<font color="#062585"><font size="2">(01:29:21 AM)</font> <b>***drobilla</b></font> tries to play the &apos;shine on you crazy diamond&apos; intro solo properly<br/>
<font color="#A82F2F"><font size="2">(01:29:35 AM)</font> <b>drobilla:</b></font> Sigh.  All this programming and consequent instrument neglect has sapped the soul right out of my fingers<br/>
<font color="#A82F2F"><font size="2">(01:32:17 AM)</font> <b>drobilla:</b></font> las: Yeah.  Always nice when &quot;you know what?  To hell with the source of this problem entirely&quot; works out<br/>
<font color="#A82F2F"><font size="2">(01:33:05 AM)</font> <b>drobilla:</b></font> Legacy from the std::list of events days anyway.  Remember kids, choosing the appropriate data structure doesn&apos;t count as premature optimization, but hacking around not doing so does.<br/>
<font size="2">(01:39:56 AM)</font><b> tweed left the room (quit: Quit: tweed).</b><br/>
<font size="2">(01:41:53 AM)</font><b> reen1 left the room (quit: Quit: Leaving.).</b><br/>
<font size="2">(01:54:13 AM)</font><b> Joschii left the room (quit: Ping timeout: 272 seconds).</b><br/>
<font size="2">(01:58:37 AM)</font><b> EugeneBandit left the room (quit: Ping timeout: 258 seconds).</b><br/>
<font size="2">(02:07:50 AM)</font><b> Joschii [<em>~joschii@82.113.121.81</em>] entered the room.</b><br/>
<font size="2">(02:28:26 AM)</font><b> falktx [<em>~falktx@93.102.113.21.rev.optimus.pt</em>] entered the room.</b><br/>
<font size="2">(02:33:52 AM)</font><b> ousado left the room (quit: Ping timeout: 245 seconds).</b><br/>
<font color="#A82F2F"><font size="2">(02:33:58 AM)</font> <b>FlorianBd:</b></font> drobilla: from my first 5min tests, the problem is... worst :(  Now it happens at every single play<br/>
<font color="#A82F2F"><font size="2">(02:34:43 AM)</font> <b>FlorianBd:</b></font> the pedal stays up all the time, everywhere<br/>
<font color="#A82F2F"><font size="2">(02:34:55 AM)</font> <b>FlorianBd:</b></font> I mean pedal down = 127<br/>
<font color="#A82F2F"><font size="2">(02:36:20 AM)</font> <b>drobilla:</b></font> FlorianBd: The events play back every time for me<br/>
<font color="#A82F2F"><font size="2">(02:36:36 AM)</font> <b>drobilla:</b></font> and that change making it worse is pretty much impossible<br/>
<font color="#A82F2F"><font size="2">(02:36:47 AM)</font> <b>FlorianBd:</b></font> oh and I just had a crash by clicking to relocate the cursor:   ardour-3.5.3618: ../libs/evoral/src/ControlList.cpp:1474: bool Evoral::ControlList::rt_safe_earliest_event_linear_unlocked(double, double&amp;, double&amp;, bool) const: Assertion `(y &gt;= first-&gt;value &amp;&amp; y &lt;= next-&gt;value) || (y &lt;= first-&gt;value &amp;&amp; y &gt;= next-&gt;value)&apos; failed.<br/>
<font color="#062585"><font size="2">(02:37:32 AM)</font> <b>***FlorianBd</b></font> is opening with the previous ardour to confirm<br/>
<font color="#A82F2F"><font size="2">(02:37:39 AM)</font> <b>drobilla:</b></font> FlorianBd: See if you can reproduce that one<br/>
<font color="#A82F2F"><font size="2">(02:45:52 AM)</font> <b>FlorianBd:</b></font> drobilla: I confirm you. Previous ardour (20141115-3.5-3556-g163dc75) plays fine (except in some rare cases) and always ignores the pedal when rec is enable in transport.  But new ardour (20141119-3.5-3618-ga993620) keeps the pedal up every single time, whether Rec or not.<br/>
<font color="#A82F2F"><font size="2">(02:46:32 AM)</font> <b>rgareus:</b></font> on a related but different front. I managed to find a reproducable schema for the dropped MTC message.  Enable send MTC, play, stop, rewind. On rewind two messages are enqueued, but only one is sent.<br/>
<font color="#A82F2F"><font size="2">(02:46:40 AM)</font> <b>FlorianBd:</b></font> (same project, same ardour config. Simply different binary)<br/>
<font color="#A82F2F"><font size="2">(02:46:59 AM)</font> <b>rgareus:</b></font> in the MTC case its harmess though (the messages are identical)<br/>
<font color="#A82F2F"><font size="2">(02:47:42 AM)</font> <b>FlorianBd:</b></font> rgareus: for me, some new position was ignored from time to time. Not a super big deal though, but still weird.<br/>
<font color="#A82F2F"><font size="2">(02:47:47 AM)</font> <b>rgareus:</b></font> anyway debug-patch pushed to further investigate this<br/>
<font color="#A82F2F"><font size="2">(02:49:02 AM)</font> <b>rgareus:</b></font> FlorianBd: for locates it&apos;s the same  -D MidiIO  shows 2 messages being queued in the buffer, only one is being sent out<br/>
<font color="#A82F2F"><font size="2">(02:50:10 AM)</font> <b>drobilla:</b></font> FlorianBd: are you confirming this with a MIDI dumper, or some other means?<br/>
<font size="2">(02:50:37 AM)</font><b> falktx_ [<em>~falktx@93.102.113.21.rev.optimus.pt</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(02:50:55 AM)</font> <b>FlorianBd:</b></font> drobilla: it simply plays the sound banks that have no xrun and that I don&apos;t touch when I change from one ardour to another. Really no doubt to me :-/<br/>
<font color="#A82F2F"><font size="2">(02:51:10 AM)</font> <b>FlorianBd:</b></font> (and this sampler is another computer)<br/>
<font size="2">(02:51:31 AM)</font><b> falktx left the room (quit: Ping timeout: 258 seconds).</b><br/>
<font color="#A82F2F"><font size="2">(02:51:39 AM)</font> <b>drobilla:</b></font> FlorianBd: edit libs/evoral/evoral/types.hpp and change the comparison functions to always just do the straightforward thing, e.g. &quot;return a &lt; b&quot;<br/>
<font color="#A82F2F"><font size="2">(02:51:44 AM)</font> <b>FlorianBd:</b></font> The only difference is really the binary. I execute one, then I execute the other.<br/>
<font color="#A82F2F"><font size="2">(02:52:12 AM)</font> <b>drobilla:</b></font> Okay, fine.  The immemsely complicated and variable ridden path of sending via Jack and in-between machines no less is assumed to be fine.<br/>
<font color="#A82F2F"><font size="2">(02:52:33 AM)</font> <b>drobilla:</b></font> If it proves to be a problem you are dead to me. :P<br/>
<font size="2">(02:52:58 AM)</font><b> nox- left the room (quit: Quit: Leaving).</b><br/>
<font color="#A82F2F"><font size="2">(02:55:19 AM)</font> <b>drobilla:</b></font> (i.e. just bloody well run jack_mididump and eliminate the guesswork.  I don&apos;t know how this MIDI is handled by whatever your setup is nor do I care to)<br/>
<font color="#A82F2F"><font size="2">(02:55:46 AM)</font> <b>FlorianBd:</b></font> drobilla: what about the one that has &quot;fabs&quot; at line 47 ?<br/>
<font color="#A82F2F"><font size="2">(02:56:34 AM)</font> <b>drobilla:</b></font> FlorianBd: Make all of them do exactly what they say on the tin with no exceptions<br/>
<font color="#A82F2F"><font size="2">(02:56:57 AM)</font> <b>drobilla:</b></font> (I can not commit this because it would cause other problems currently, but it would be informative)<br/>
<font color="#A82F2F"><font size="2">(02:58:44 AM)</font> <b>FlorianBd:</b></font> drobilla: yes but I&apos;m not sure to understand the one at line 47<br/>
<font color="#A82F2F"><font size="2">(02:59:10 AM)</font> <b>FlorianBd:</b></font> return(a-b) ?<br/>
<font color="#A82F2F"><font size="2">(02:59:39 AM)</font> <b>drobilla:</b></font> FlorianBd: ... &quot;musical_time_equal&quot;<br/>
<font color="#A82F2F"><font size="2">(02:59:46 AM)</font> <b>drobilla:</b></font> 3 guesses what operator that is :P<br/>
<font color="#A82F2F"><font size="2">(03:00:10 AM)</font> <b>FlorianBd:</b></font> :)<br/>
<font color="#A82F2F"><font size="2">(03:00:16 AM)</font> <b>FlorianBd:</b></font> = and not == ?<br/>
<font color="#A82F2F"><font size="2">(03:00:25 AM)</font> <b>drobilla:</b></font> ==.  comparison.  = is assignment.<br/>
<font color="#A82F2F"><font size="2">(03:00:40 AM)</font> <b>FlorianBd:</b></font> I know but I don&apos;t understand that code and its context....<br/>
<font color="#A82F2F"><font size="2">(03:01:05 AM)</font> <b>drobilla:</b></font> return a == b;<br/>
<font color="#A82F2F"><font size="2">(03:01:10 AM)</font> <b>FlorianBd:</b></font> ok thanks<br/>
<font size="2">(03:04:28 AM)</font><b> velho [<em>~velho@2.83.205.117</em>] entered the room.</b><br/>
<font size="2">(03:09:46 AM)</font><b> slyrus left the room (quit: Ping timeout: 256 seconds).</b><br/>
<font color="#A82F2F"><font size="2">(03:19:11 AM)</font> <b>las:</b></font> drobilla: ah well ....<br/>
<font color="#A82F2F"><font size="2">(03:20:25 AM)</font> <b>FlorianBd:</b></font> drobilla:  can&apos;t even open the project in that case.    ardour-3.5.3618: ../libs/evoral/src/Note.cpp:43: Evoral::Note&lt;Time&gt;::Note(uint8_t, Time, Time, uint8_t, uint8_t) [with Time = double; uint8_t = unsigned char]: Assertion `musical_time_equal (length(), l)&apos; failed.<br/>
<font color="#A82F2F"><font size="2">(03:22:55 AM)</font> <b>FlorianBd:</b></font> drobilla: I don&apos;t understand the details or this bug, but something that bugs randomly before and always bugs after sounds to me like a simple oversight in the patch. At least now it&apos;s no longer random :)<br/>
<font color="#062585"><font size="2">(03:23:27 AM)</font> <b>***FlorianBd</b></font> is trying to rename ardour config<br/>
