<html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Conversation with #bash at Sun 15 Mar 2015 10:26:53 PM CET on magnetophon@irc.freenode.net (irc)</title></head><body><h3>Conversation with #bash at Sun 15 Mar 2015 10:26:53 PM CET on magnetophon@irc.freenode.net (irc)</h3>
<font size="2">(10:26:53 PM)</font><b> The topic for #bash is: FAQ: <a href="http://mywiki.wooledge.org/BashFAQ">http://mywiki.wooledge.org/BashFAQ</a> | Guide: <a href="http://mywiki.wooledge.org/BashGuide">http://mywiki.wooledge.org/BashGuide</a> | Ref: <a href="http://gnu.org/s/bash/manual">http://gnu.org/s/bash/manual</a> | <a href="http://wiki.bash-hackers.org/">http://wiki.bash-hackers.org/</a> | <a href="http://mywiki.wooledge.org/Quotes">http://mywiki.wooledge.org/Quotes</a> | Check your script: <a href="http://www.shellcheck.net/">http://www.shellcheck.net/</a> | Mailing list: <a href="https://lists.gnu.org/mailman/listinfo/help-bash">https://lists.gnu.org/mailman/listinfo/help-bash</a> | Devel: <a href="http://xrl.us/bmodjy">http://xrl.us/bmodjy</a></b><br/>
<font size="2">(10:26:53 PM)</font><b> Topic for #bash set by pgas!~user@pdpc/supporter/active/pgas at 12:43:30 PM on 02/18/2015</b><br/>
<font color="#16569E"><font size="2">(10:27:24 PM)</font> <b>magnetophon:</b></font> Anybody care to critique my installer? https://github.com/magnetophon/SynthSinger/blob/master/install.sh<br/>
<font color="#A82F2F"><font size="2">(10:27:32 PM)</font> <b>momomo:</b></font> What is the difference between if [ &quot;${TEST}&quot; = &quot;FALSE&quot; ]; then .. AND ... if [ [&quot;${TEST}&quot; = &quot;FALSE&quot;] ]; then ... ..<br/>
<font color="#A82F2F"><font size="2">(10:27:52 PM)</font> <b>izabera:</b></font> !test &gt; momomo<br/>
<font color="#A82F2F"><font size="2">(10:27:52 PM)</font> <b>greybot:</b></font> momomo: Use [[ .. ]] for testing strings or files, (( .. )) for testing numbers and &apos;if ..&apos;&apos; for testing commands. Do *NOT* use [ .. ] in bash (only in sh). See &lt;http://mywiki.wooledge.org/BashSheet#Tests&gt; and &lt;http://mywiki.wooledge.org/tests&gt;. Difference between [ and [[: &lt;http://mywiki.wooledge.org/BashFAQ/031&gt;<br/>
<font color="#A82F2F"><font size="2">(10:27:57 PM)</font> <b>izabera:</b></font> sorry it was for magnetophon<br/>
<font color="#A82F2F"><font size="2">(10:28:02 PM)</font> <b>izabera:</b></font> !which &gt; magnetophon<br/>
<font color="#A82F2F"><font size="2">(10:28:03 PM)</font> <b>greybot:</b></font> magnetophon: which(1) is an external program used to search PATH for an executable. It behaves differently on different systems and you can&apos;t rely on a useful exit code; use (from most to least portable) &apos;&apos;command -v&apos;&apos; or &apos;&apos;type -P&apos;&apos; (to find the path) or &apos;&apos;hash&apos;&apos; (to check) instead. See http://mywiki.wooledge.org/BashFAQ/081<br/>
<font color="#A82F2F"><font size="2">(10:28:21 PM)</font> <b>izabera:</b></font> !echo-e &gt; magnetophon<br/>
<font color="#A82F2F"><font size="2">(10:28:21 PM)</font> <b>greybot:</b></font> magnetophon: echo outputs a string. echo has many portability problems, and should never be used with option flags. Consider printf instead: printf &apos;name: %s\n&apos; &quot;$name&quot;. http://wiki.bash-hackers.org/commands/builtin/echo | http://cfajohnson.com/shell/cus-faq.html#Q0b | http://www.in-ulm.de/~mascheck/various/echo+printf<br/>
<font color="#A82F2F"><font size="2">(10:28:34 PM)</font> <b>izabera:</b></font> !read-r &gt; magnetophon<br/>
<font color="#A82F2F"><font size="2">(10:28:34 PM)</font> <b>greybot:</b></font> magnetophon: By default, if &apos;&apos;read&apos;&apos; reads a line of input terminated by a backslash (\), it will *continue* reading lines of input until the first line not terminated by &quot;\&quot;, or it hits EOF and then concatenate those lines into a single line. This is a dumb misfeature. So *always* use the -r option with &apos;&apos;read&apos;&apos;, unless you know you have a case when you want the default behavior, or when using the bash-only &apos;&apos;read -e&apos;&apos;.<br/>
<font color="#A82F2F"><font size="2">(10:28:51 PM)</font> <b>llua:</b></font> momomo: one might be true, the other won&apos;t be.<br/>
<font color="#A82F2F"><font size="2">(10:28:57 PM)</font> <b>izabera:</b></font> wait i can find more<br/>
<font color="#16569E"><font size="2">(10:29:18 PM)</font> <b>magnetophon:</b></font> izabera: thanks!<br/>
<font color="#A82F2F"><font size="2">(10:29:58 PM)</font> <b>momomo:</b></font> which one might be true? first?<br/>
<font color="#A82F2F"><font size="2">(10:30:03 PM)</font> <b>llua:</b></font> yea<br/>
<font color="#A82F2F"><font size="2">(10:30:14 PM)</font> <b>kurahaupo1:</b></font> Soni: this does seem rather like a bug in Bash, probably in the way that it&apos;s built, like it&apos;s using old-style wait() without a pid, which is being emulated on top of waitpid<br/>
<font color="#A82F2F"><font size="2">(10:30:46 PM)</font> <b>momomo:</b></font> ook .. i just got this from a place: if [[ &quot;$TERM&quot; = &quot;screen&quot; ]]; then ..<br/>
<font color="#A82F2F"><font size="2">(10:30:51 PM)</font> <b>izabera:</b></font> momomo: the second is checking if the string &quot;[$TEST&quot; is equal to the string &quot;FALSE]&quot;<br/>
<font color="#A82F2F"><font size="2">(10:30:54 PM)</font> <b>momomo:</b></font> does that mean it will never be true?<br/>
<font color="#A82F2F"><font size="2">(10:31:22 PM)</font> <b>izabera:</b></font> momomo: the second is never true because FALSE doesn&apos;t start with [<br/>
<font color="#A82F2F"><font size="2">(10:31:27 PM)</font> <b>llua:</b></font> [[ is different from what you showed<br/>
<font color="#A82F2F"><font size="2">(10:32:12 PM)</font> <b>momomo:</b></font> ook .. i need space in between ? in that case the second works ?<br/>
<font color="#A82F2F"><font size="2">(10:32:27 PM)</font> <b>izabera:</b></font> no spaces, [[ is a keyword<br/>
<font color="#A82F2F"><font size="2">(10:32:35 PM)</font> <b>momomo:</b></font> ook..<br/>
<font color="#A82F2F"><font size="2">(10:32:52 PM)</font> <b>momomo:</b></font> what about this: if [[ hostname == moserver* ]] ..<br/>
<font color="#A82F2F"><font size="2">(10:33:02 PM)</font> <b>momomo:</b></font> good? do i need &quot;&quot; quotes ?<br/>
<font color="#A82F2F"><font size="2">(10:33:29 PM)</font> <b>izabera:</b></font> quoting * would make it literal<br/>
<font color="#A82F2F"><font size="2">(10:33:33 PM)</font> <b>llua:</b></font> most likely want $(), but quotes isn&apos;t needed.<br/>
<font color="#A82F2F"><font size="2">(10:33:33 PM)</font> <b>izabera:</b></font> quote your variables<br/>
<font color="#A82F2F"><font size="2">(10:34:02 PM)</font> <b>llua:</b></font> or the HOSTNAME parameter.<br/>
<font color="#A82F2F"><font size="2">(10:34:28 PM)</font> <b>momomo:</b></font> ah.. yes<br/>
<font color="#A82F2F"><font size="2">(10:34:53 PM)</font> <b>subz3r0:</b></font> hey<br/>
<font color="#A82F2F"><font size="2">(10:35:04 PM)</font> <b>subz3r0:</b></font> having some issues with sed and variables i want to use<br/>
<font color="#A82F2F"><font size="2">(10:35:12 PM)</font> <b>subz3r0:</b></font> e.g<br/>
<font color="#A82F2F"><font size="2">(10:35:41 PM)</font> <b>izabera:</b></font> subz3r0: try to use awk, escaping strings for sed is painful<br/>
<font color="#A82F2F"><font size="2">(10:35:51 PM)</font> <b>subz3r0:</b></font> read -p &quot;Country (e.g DE for Germany): &quot; COUNTRY<br/>
<font color="#A82F2F"><font size="2">(10:36:11 PM)</font> <b>jgeboski:</b></font> is there anyway to merge the following into a single line: TEST=&quot;${VALUE%_*}&quot;; TEST=&quot;v${TEST//./}&quot;?<br/>
<font color="#A82F2F"><font size="2">(10:36:22 PM)</font> <b>izabera:</b></font> jgeboski: nope<br/>
<font color="#A82F2F"><font size="2">(10:36:24 PM)</font> <b>subz3r0:</b></font> sed -i &apos;s/export KEY_COUNTRY=&quot;US&quot;/export KEY_COUNTRY=\&quot;$COUNTRY\&quot;/&apos; vars<br/>
<font color="#A82F2F"><font size="2">(10:36:32 PM)</font> <b>izabera:</b></font> jgeboski: but you can drop the ; and make it a single line<br/>
<font color="#A82F2F"><font size="2">(10:36:52 PM)</font> <b>izabera:</b></font> !&quot; &gt; subz3r0<br/>
<font color="#A82F2F"><font size="2">(10:36:52 PM)</font> <b>greybot:</b></font> subz3r0: &quot;Double quote&quot; every literal that contains spaces/metacharacters and _every_ expansion: &quot;$var&quot;, &quot;$(command &quot;$var&quot;)&quot;, &quot;${array[@]}&quot;, &quot;a &amp; b&quot;. Use &apos;single quotes&apos; for code or literal $&apos;s: &apos;Costs $5 US&apos;, ssh host &apos;echo &quot;$HOSTNAME&quot;&apos;. See http://mywiki.wooledge.org/Quotes , http://mywiki.wooledge.org/Arguments and http://wiki.bash-hackers.org/syntax/words .<br/>
<font color="#A82F2F"><font size="2">(10:36:58 PM)</font> <b>subz3r0:</b></font> but what i get then in vars file is &quot;export KEY_COUNTRY=&quot;$COUNTRY&quot;<br/>
<font color="#A82F2F"><font size="2">(10:37:11 PM)</font> <b>izabera:</b></font> everything in &apos;&apos; is literal<br/>
<font color="#A82F2F"><font size="2">(10:37:22 PM)</font> <b>izabera:</b></font> use &quot;s/.../.../&quot;<br/>
<font color="#A82F2F"><font size="2">(10:37:26 PM)</font> <b>jgeboski:</b></font> izabera: yeah, just didn&apos;t know if I was able to merge the replacement/removal operations, thanks<br/>
<font color="#A82F2F"><font size="2">(10:37:59 PM)</font> <b>subz3r0:</b></font> but when everything is literal in &apos;&apos; how can sed know which to replace?<br/>
<font color="#A82F2F"><font size="2">(10:38:16 PM)</font> <b>izabera:</b></font> subz3r0: use &quot; &quot; instead of &apos; &apos;<br/>
<font color="#A82F2F"><font size="2">(10:38:39 PM)</font> <b>subz3r0:</b></font> will try that. but i dont understand it 100%<br/>
<font color="#A82F2F"><font size="2">(10:39:00 PM)</font> <b>izabera:</b></font> read the links<br/>
<font color="#A82F2F"><font size="2">(10:39:13 PM)</font> <b>kurahaupo1:</b></font> Soni: there&apos;s like 3000 lines in the source code for Bash that does process management and job control; this is going to take *days* to track down.<br/>
<font size="2">(10:39:47 PM)</font><b> arubi_ is now known as arubi</b><br/>
<font color="#A82F2F"><font size="2">(10:41:10 PM)</font> <b>kurahaupo1:</b></font> Soni: in the meantime, I suggest plan B; use a pipe which you can (attempt to) read from to see if the process is still alive. Unfortunately you&apos;ll need to use an explicit mkfifo, because &lt;(...) doesn&apos;t set $!<br/>
<font color="#A82F2F"><font size="2">(10:42:37 PM)</font> <b>kurahaupo1:</b></font> Soni: then, attempt to read from the fifo -- if it blocks, the utdl process is still alive; if it doesn&apos;t block, it&apos;s dead<br/>
<font color="#A82F2F"><font size="2">(10:45:12 PM)</font> <b>kurahaupo1:</b></font> ttfn<br/>
<font color="#A82F2F"><font size="2">(10:45:14 PM)</font> <b>Soni:</b></font> kurahaupo1, uhh<br/>
<font color="#A82F2F"><font size="2">(10:45:27 PM)</font> <b>Soni:</b></font> if it blocks...<br/>
<font color="#A82F2F"><font size="2">(10:45:30 PM)</font> <b>Soni:</b></font> wait...<br/>
<font color="#A82F2F"><font size="2">(10:45:55 PM)</font> <b>Soni:</b></font> timeout?<br/>
<font color="#A82F2F"><font size="2">(10:47:34 PM)</font> <b>Soni:</b></font> kurahaupo1, how do I use fifos? and am I supposed to &quot;timeout &lt;something&gt; cat &lt;fifo&gt;&quot; or... how am I supposed to do it?<br/>
<font color="#A82F2F"><font size="2">(11:03:49 PM)</font> <b>izabera:</b></font> # help declare | grep trace<br/>
<font color="#A82F2F"><font size="2">(11:03:50 PM)</font> <b>shbot:</b></font> izabera:       -t        to make NAMEs have the `trace&apos; attribute<br/>
<font color="#A82F2F"><font size="2">(11:03:50 PM)</font> <b>izabera:</b></font> ^ what is that?<br/>
<font color="#A82F2F"><font size="2">(11:04:31 PM)</font> <b>geirha:</b></font> for functions<br/>
<font color="#A82F2F"><font size="2">(11:05:12 PM)</font> <b>geirha:</b></font> wrt DEBUG and RETURN traps<br/>
<font color="#A82F2F"><font size="2">(11:05:13 PM)</font> <b>izabera:</b></font> can you explain a little more?<br/>
<font color="#A82F2F"><font size="2">(11:05:17 PM)</font> <b>kurahaupo:</b></font> Soni: read -t1 &lt;<br/>
<font color="#A82F2F"><font size="2">(11:05:37 PM)</font> <b>geirha:</b></font> See FUNCTIONS section of the manual<br/>
<font size="2">(11:06:04 PM)</font><b> corpdansen is now known as cafedansen</b><br/>
<font color="#A82F2F"><font size="2">(11:06:47 PM)</font> <b>izabera:</b></font> ah to inherit DEBUG and RETURN traps, thanks<br/>
<font color="#A82F2F"><font size="2">(11:15:05 PM)</font> <b>kingsley__:</b></font> FYI: xonsh is a Python-ish, BASHwards-compatible shell language and command prompt.<br/>
<font color="#A82F2F"><font size="2">(11:15:14 PM)</font> <b>kingsley__:</b></font> http://xonsh.org/<br/>
<font color="#A82F2F"><font size="2">(11:15:34 PM)</font> <b>izabera:</b></font> unlikely<br/>
<font color="#A82F2F"><font size="2">(11:17:44 PM)</font> <b>bekks:</b></font> &quot;The language is a superset of Python 3.4 with additional shell primitives that you are used to from BASH and IPython.&quot;<br/>
<font size="2">(11:25:36 PM)</font><b> The account has disconnected and you are no longer in this chat. You will automatically rejoin the chat when the account reconnects.</b><br/>
</body></html>
