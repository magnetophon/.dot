<html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Conversation with #debian-multimedia at Mon 01 Dec 2014 12:36:29 PM CET on magnetophon@irc.oftc.net (irc)</title></head><body><h3>Conversation with #debian-multimedia at Mon 01 Dec 2014 12:36:29 PM CET on magnetophon@irc.oftc.net (irc)</h3>
<font size="2">(12:36:29 PM)</font><b> The topic for #debian-multimedia is: discussions of packaging issues for audio and video applications | <a href="http://wiki.debian.org/DebianMultimedia">http://wiki.debian.org/DebianMultimedia</a> |  Please help with Bugs: <a href="http://deb.li/itGsE">http://deb.li/itGsE</a> | <a href="http://pet.debian.net/pkg-multimedia/pet.cgi">http://pet.debian.net/pkg-multimedia/pet.cgi</a> | not related to deb-multimedia.org</b><br/>
<font size="2">(12:36:29 PM)</font><b> Topic for #debian-multimedia set by ChanServ!services@services.oftc.net at 02:58:00 PM on 02/02/2014</b><br/>
<font size="2">(12:44:02 PM)</font><b> freedomrun [<em>~quassel@cpe-31-15-133-198.cable.telemach.net</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(12:48:14 PM)</font> <b>KGB-0:</b></font> <span style='color: dark green;'>Fabian Greffrath</span> <span style='color: brown;'>pristine-tar</span> 1e95a5b <span style='color: purple;'>flac</span> <span style='color: dark green;'>flac_1.3.1.orig.tar.xz.delta</span> <span style='color: dark green;'>flac_1.3.1.orig.tar.xz.id</span> pristine-tar data for flac_1.3.1.orig.tar.xz<br/>
<font color="#A82F2F"><font size="2">(12:48:14 PM)</font> <b>KGB-0:</b></font> <span style='color: dark green;'>Fabian Greffrath</span> <span style='color: brown;'>master</span> 7d8eba4 <span style='color: purple;'>flac</span> <span style='color: dark green;'>doc/FLAC.tag</span> add back doc/FLAC.tag<br/>
<font color="#A82F2F"><font size="2">(12:48:14 PM)</font> <b>KGB-0:</b></font> <span style='color: dark green;'>Fabian Greffrath</span> <span style='color: brown;'>upstream</span> 6ce9009 <span style='color: purple;'>flac</span> <span style='color: teal;'>(828 files in 75 dirs)</span> Imported Upstream version 1.3.1<br/>
<font color="#A82F2F"><font size="2">(12:48:14 PM)</font> <b>KGB-0:</b></font> <span style='color: dark green;'>Fabian Greffrath</span> <span style='color: brown;'>master</span> debaa46 <span style='color: purple;'>flac</span> Merge tag &apos;upstream/1.3.1&apos;<br/>
<font color="#A82F2F"><font size="2">(12:48:19 PM)</font> <b>KGB-0:</b></font> <span style='color: dark green;'>Fabian Greffrath</span> <span style='color: brown;'>tags</span> b174a5b <span style='color: purple;'>flac</span> <span style='color: dark green;'>upstream/1.3.1</span> Upstream version 1.3.1 (tagged commit: 6ce9009)<br/>
<font size="2">(12:56:28 PM)</font><b> tobald [<em>~tobald@170.222-243-81.adsl-dyn.isp.belgacom.be</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(12:57:47 PM)</font> <b>KGB-1:</b></font> <span style='color: dark green;'>Fabian Greffrath</span> <span style='color: brown;'>master</span> 41ed2e6 <span style='color: purple;'>flac</span> <span style='color: teal;'>debian/patches/</span> <span style='color: red;'><span style='font-weight: bold;'>0002-Add-missing-config.h-includes.patch</span></span> <span style='color: red;'><span style='font-weight: bold;'>0003-metaflac-Fix-local_strcat-to-terminate-string-correc.patch</span></span> <span style='color: teal;'>series</span> drop patches applied upstream<br/>
<font color="#A82F2F"><font size="2">(12:57:47 PM)</font> <b>KGB-1:</b></font> <span style='color: dark green;'>Fabian Greffrath</span> <span style='color: brown;'>master</span> 0156a05 <span style='color: purple;'>flac</span> <span style='color: teal;'>debian/patches/</span> <span style='color: dark green;'>flac.git-43ba7ad05f1656e885ce2f34a9a72494f45705ae.patch</span> <span style='color: teal;'>series</span> backport patch from upstream git to fix another input validation bug.<br/>
<font size="2">(01:18:20 PM)</font><b> fsateler [<em>~smuxi@pc-53-7-161-190.cm.vtr.net</em>] entered the room.</b><br/>
<font size="2">(01:31:03 PM)</font><b> tobald left the room (quit: Quit: Ex-Chat).</b><br/>
<font size="2">(01:39:06 PM)</font><b> fsateler left the room (quit: Remote host closed the connection).</b><br/>
<font color="#A82F2F"><font size="2">(01:40:58 PM)</font> <b>siretart:</b></font> micove: according to http://lists.debian.org/1415654400.3087.9.camel@adam-barratt.org.uk not even the current stable supports real i486, so I think we can safely expect all machines to be 586 or better<br/>
<font color="#A82F2F"><font size="2">(01:41:44 PM)</font> <b>siretart:</b></font> micove: what lintian error are you seeing? if it complains about 586 code, then its a bug in lintian that should be filed and fixed<br/>
<font color="#A82F2F"><font size="2">(01:42:37 PM)</font> <b>micove:</b></font> shlib-with-non-pic-code<br/>
<font color="#A82F2F"><font size="2">(01:42:38 PM)</font> <b>micove:</b></font> usr/lib/i386-linux-gnu/libmpg123.so.0.40.3<br/>
<font color="#A82F2F"><font size="2">(01:42:50 PM)</font> <b>micove:</b></font> in<br/>
<font color="#A82F2F"><font size="2">(01:42:52 PM)</font> <b>micove:</b></font> https://lintian.debian.org/maintainer/pkg-multimedia-maintainers@lists.alioth.debian.org.html#mpg123<br/>
<font color="#A82F2F"><font size="2">(01:42:57 PM)</font> <b>siretart:</b></font> micove: I suppose the patch in 751800 looks ok<br/>
<font color="#A82F2F"><font size="2">(01:43:26 PM)</font> <b>siretart:</b></font> oh, that one<br/>
<font color="#A82F2F"><font size="2">(01:44:15 PM)</font> <b>siretart:</b></font> mpg123 contains hand-written assembler that is highly optimized for x86-32, we have the same &quot;issue&quot; in libavcodec. Just add a lintian override, the upstream maintainer is aware of the implications here<br/>
<font color="#A82F2F"><font size="2">(01:44:15 PM)</font> <b>micove:</b></font> well the thing is that x86_dither = x86 and uses non-pic asm ... with-cpu=i586 is the pic code<br/>
<font color="#A82F2F"><font size="2">(01:44:38 PM)</font> <b>micove:</b></font> okay<br/>
<font color="#A82F2F"><font size="2">(01:45:00 PM)</font> <b>siretart:</b></font> wait, you are saying that the patch in 751800 fixes the issue without an override?<br/>
<font color="#A82F2F"><font size="2">(01:46:38 PM)</font> <b>siretart:</b></font> oh, I think now I see. for some reason we are using the special case i486 variant in mpg123, which is very special. the x86_dither variant has run-time cpu detection<br/>
<font color="#A82F2F"><font size="2">(01:46:39 PM)</font> <b>micove:</b></font> no, --with-cpu=x86 (current), --with-cpu=x86_dither (patch and equivalent to current) both result in non-pic code<br/>
<font color="#A82F2F"><font size="2">(01:46:54 PM)</font> <b>micove:</b></font> --with-cpu=586 solves the issue without override<br/>
<font color="#A82F2F"><font size="2">(01:47:09 PM)</font> <b>micove:</b></font> mpg123 uses SSE, MMX, 3D with auto detect<br/>
<font color="#A82F2F"><font size="2">(01:47:39 PM)</font> <b>siretart:</b></font> https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=751800#10<br/>
<font color="#A82F2F"><font size="2">(01:48:00 PM)</font> <b>siretart:</b></font> yes, I&apos;d argue let&apos;s go for --with-cpu=586, which uses the x86_dither variant. then we should be good<br/>
<font color="#A82F2F"><font size="2">(01:48:51 PM)</font> <b>siretart:</b></font> btw, the bug is wrongly tagged (hardly an upstream issue), and it is a pretty important thing. can you take care of that?<br/>
<font color="#A82F2F"><font size="2">(01:51:34 PM)</font> <b>micove:</b></font> with-cpu=i586  uses no asm so just i586 opt<br/>
<font color="#A82F2F"><font size="2">(01:52:08 PM)</font> <b>micove:</b></font> well the bug was that mpg123 uses DEB_HOST_GNU_CPU to detect with-cpu ... and like 6 months ago ... DEB_HOST_GNU_CPU was i486 which used the broken code<br/>
<font color="#A82F2F"><font size="2">(01:52:18 PM)</font> <b>micove:</b></font> since we changed to i586 it got &quot;fixed&quot;<br/>
<font color="#A82F2F"><font size="2">(01:52:46 PM)</font> <b>micove:</b></font> alessio changed the DEB_HOST_GNU_CPU to DEB_HOST_ARCH which broke the code like a year ago but no one noticed<br/>
<font color="#A82F2F"><font size="2">(01:53:09 PM)</font> <b>alessio:</b></font> micove, ? really did I?<br/>
<font color="#062585"><font size="2">(01:53:16 PM)</font> <b>***alessio</b></font> digging into it<br/>
<font color="#A82F2F"><font size="2">(01:54:29 PM)</font> <b>micove:</b></font> commit c706783790e11a5707f2739a3536d565355bdd90<br/>
<font color="#A82F2F"><font size="2">(01:54:39 PM)</font> <b>micove:</b></font> i have it in my local repo fixed<br/>
<font color="#A82F2F"><font size="2">(01:54:54 PM)</font> <b>micove:</b></font> but wanted to make sure if the non-asm cpu=i586 <br/>
<font color="#A82F2F"><font size="2">(01:55:04 PM)</font> <b>micove:</b></font> or non-pic with-cpu was to be used<br/>
<font color="#A82F2F"><font size="2">(01:56:44 PM)</font> <b>siretart:</b></font> micove: can you clarify what you exactly mean with &apos;non-asm&apos;?<br/>
<font color="#A82F2F"><font size="2">(01:56:52 PM)</font> <b>alessio:</b></font> alright<br/>
<font color="#A82F2F"><font size="2">(01:56:53 PM)</font> <b>alessio:</b></font> I see<br/>
<font color="#A82F2F"><font size="2">(01:57:11 PM)</font> <b>alessio:</b></font> yes, that was mine<br/>
<font color="#A82F2F"><font size="2">(01:57:37 PM)</font> <b>alessio:</b></font> while trying to differentiate the arm things<br/>
<font color="#A82F2F"><font size="2">(01:57:48 PM)</font> <b>micove:</b></font> no MMX, SSE and the amd one 3d<br/>
<font color="#A82F2F"><font size="2">(01:58:48 PM)</font> <b>micove:</b></font> 3Dnow* ... always forget the name<br/>
<font color="#A82F2F"><font size="2">(01:58:48 PM)</font> <b>siretart:</b></font> oh,  that indeed sounds like something that should really go into jessie<br/>
<font color="#A82F2F"><font size="2">(01:59:06 PM)</font> <b>micove:</b></font> here<br/>
<font color="#A82F2F"><font size="2">(01:59:06 PM)</font> <b>micove:</b></font> http://www.mpg123.com/benchmark/mpg123-1.16.0_Core-i3-3217U@1800MHz_Arch-Linux.txt<br/>
<font color="#A82F2F"><font size="2">(01:59:15 PM)</font> <b>micove:</b></font> that may explain it better<br/>
<font color="#A82F2F"><font size="2">(02:01:04 PM)</font> <b>micove:</b></font> from configure<br/>
<font color="#A82F2F"><font size="2">(02:01:17 PM)</font> <b>micove:</b></font>  --with-cpu=i586         Use code optimized for i586 processors<br/>
<font color="#A82F2F"><font size="2">(02:01:17 PM)</font> <b>micove:</b></font>   --with-cpu=i586_dither  Use code optimized for i586 processors with dithering (noise shaping), adds 256K to binary size<br/>
<font color="#A82F2F"><font size="2">(02:01:31 PM)</font> <b>micove:</b></font> --with-cpu=x86          Pack all x86 opts into one binary (excluding i486, including dither)<br/>
<font color="#A82F2F"><font size="2">(02:01:48 PM)</font> <b>micove:</b></font> x86 = x86_dither it seems<br/>
<font color="#A82F2F"><font size="2">(02:03:45 PM)</font> <b>siretart:</b></font> micove: that doesn&apos;t say anything about &apos;non-asm&apos;<br/>
<font size="2">(02:06:50 PM)</font><b> bjsnider [<em>~brandon@66-206-224-78.eastlink.ca</em>] entered the room.</b><br/>
<font color="#A82F2F"><font size="2">(02:07:36 PM)</font> <b>micove:</b></font> a sec<br/>
<font size="2">(02:43:29 PM)</font><b> The account has disconnected and you are no longer in this chat. You will automatically rejoin the chat when the account reconnects.</b><br/>
</body></html>
