# LIST of pluginS
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin "hallazzang/tmux-reset"
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
# set -g @plugin "tmux-plugins/tmux-yank"
# set -g @plugin 'tmux-plugins/tmux-continuum'
# set -g @plugin 'laktak/extrakto'
set -g @plugin 'fcsonline/tmux-thumbs'
set -g @plugin 'tmux-plugins/tmux-pain-control'
set -g @plugin 'dominikduda/tmux_mode_indicator'
set -g @plugin 'alexwforsythe/tmux-which-key'
# set -g @plugin '27medkamal/tmux-session-wizard'
# set -g @plugin 'odedlaz/tmux-status-variables'



# Other examples:
# set -g @plugin 'github_username/plugin_name'
# set -g @plugin 'git@github.com:user/plugin'
# set -g @plugin 'git@bitbucket.com:user/plugin'

# set  -g default-terminal "alacritty"
set  -g default-terminal "tmux-256color"
# set-option -ga terminal-override ',alacritty:Ms=\E]52;c;%p2%s\007'
# Zero-based indexing is fine in programming languages, but not so much in a
# multiplexer when zero is on the other side of the keyboard.
set  -g base-index  1
setw -g pane-base-index 1
# display tmux messages longer
set  -g display-time 1500
set  -g display-panes-time 800

# renumber windows sequentially after closing any of them
# https://github.com/thoughtbot/dotfiles/blob/master/tmux.conf
set -g renumber-windows on

# Address vim-mode switching delay (http://superuser.com/a/252717/65504)
set  -s escape-time   0
set -sg repeat-time   600
set  -g history-limit 50000
# Update status-{left,right} more often (default: 15)
set  -g status-interval 1
# Rather than constraining window size to the maximum size of any client
# connected to the *session*, constrain window size to the maximum size of any
# client connected to *that window*. Much more reasonable.
setw -g aggressive-resize off
# For terminals that support them, propagate these events to programs that
# understand them.
set  -s focus-events on
# Disnable mouse + mouse wheel
set  -g mouse on
# Vi-style keybinds
setw -g mode-keys vi
setw -g status-keys vi

# Disable confirmation
bind x kill-pane
bind X kill-window
bind q kill-session
bind Q kill-server

# reload ~/.tmux.conf using PREFIX r
bind r source-file ~/.config/tmux/tmux.conf \; display "Reloaded!"

set -s set-clipboard external

########################################
# Copy mode                            #
########################################

bind Enter copy-mode # enter copy mode
bind b list-buffers  # list paster buffers
bind B choose-buffer # choose which buffer to paste from
bind p paste-buffer  # paste from the top paste buffer
bind P run "xclip -selection clipboard -o | tmux load-buffer - ; tmux paste-buffer"

bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi C-v send-keys -X rectangle-toggle
bind -T copy-mode-vi Escape send-keys -X cancel
bind -T copy-mode-vi C-g send-keys -X cancel
bind -T copy-mode-vi H send-keys -X start-of-line
bind -T copy-mode-vi L send-keys -X end-of-line
# plugin settings:
# set -g @continuum-restore 'on'
 
# Load tmux-resurrect plugin
# set -g @resurrect-processes 'btm "watch -n 2 zpool status -v" emacs "sudo su -"';
# set -g @resurrect-processes 'btm watch emacs "sudo su -"'
# set -g @resurrect-processes "btm watch emacs sudo"
set -g @resurrect-processes 'btm watch emacs su'
# set -g @resurrect-restore 'on'
# bind-key C-r run-shell /home/bart/.config/tmux/plugins/tmux-resurrect/scripts/restore.sh

# set-option -g status-position bottom
# status left options
set-option -g status-left ''
# set-option -g status-left '#[bg=black,fg=cyan]#S#[fg=green]] #[fg=white]#T'
# set-option -g status-left '#{prefix_highlight}#[fg=green,bg=black][#[bg=black,fg=cyan]#S#[fg=green]] #[fg=white]#T'
set-option -g status-left-length 20

# window list options
setw -g automatic-rename on
set-window-option -g window-status-format '#[fg=cyan,dim]#I#[fg=blue]:#[default]#W#[fg=grey,dim]#F'
set-window-option -g window-status-current-format '#[bg=black,fg=cyan,bold]#I#[bg=black,fg=cyan]:#[fg=blue]#W#[fg=dim]#F'

# status right options
# set -g status-right '#[fg=green][#[fg=white]#{network_bandwidth}#[fg=green]] #[fg=green][#{cpu_fg_color}#{cpu_percentage}#[fg=green]] #{battery_status_bg}Batt:#{battery_percentage} #{battery_remain} #[fg=green] [#[fg=blue]%Y-%m-%d #[fg=blue]%H:%M#[fg=green]]'
# set -g status-right ''
# set -g status-right "#{prefix_highlight} | %a %Y-%m-%d %H:%M";
# set -g status-right " #{?client_prefix,#[reverse]<Prefix>#[noreverse] ,}"#{=21:pane_title}" %H:%M %d-%b-%y";
# set -g status-right '%y/%m/%d #{tmux_mode_indicator} %H:%M:%S'
set -g status-right "#{tmux_mode_indicator} | %a %Y-%m-%d %H:%M"
set -g status-right-length 150
set -g @batt_remain_short: 'true'


# switch windows alt+number
bind-key -n M-1 select-window -t 1
bind-key -n M-2 select-window -t 2
bind-key -n M-3 select-window -t 3
bind-key -n M-4 select-window -t 4
bind-key -n M-5 select-window -t 5
bind-key -n M-6 select-window -t 6
bind-key -n M-7 select-window -t 7
bind-key -n M-8 select-window -t 8
bind-key -n M-9 select-window -t 9


########################################
#      Yazi                            #
########################################

set -g allow-passthrough on

set -ga update-environment TERM
set -ga update-environment TERM_PROGRAM

run-shell ~/.config/tmux/plugins/tmux-thumbs/tmux-thumbs.tmux
# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.config/tmux/plugins/tpm/tpm'

